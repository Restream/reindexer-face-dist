webpackJsonp([1],{"/0vm":function(t,e){},"/Gca":function(t,e){},"/NGz":function(t,e){},"2+Bm":function(t,e,s){"use strict";var a=s("FLAC"),n={},i={name:"octicon",props:{name:{type:String,validator:function(t){return t?t in n:null}},scale:[Number,String],spin:Boolean,inverse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(Object(a.a)('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},clazz:function(){return{octicon:!0,"octicon-spin":this.spin,"octicon-flip-horizontal":"horizontal"===this.flip,"octicon-flip-vertical":"vertical"===this.flip,"octicon-inverse":this.inverse}},icon:function(){return this.name?n[this.name]:null},box:function(){return this.icon?this.icon.viewBox?this.icon.viewBox:"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},width:function(){return this.childrenWidth||this.icon&&this.icon.width*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,s=0;this.$children.forEach(function(t){e=Math.max(e,t.width),s=Math.max(s,t.height)}),this.childrenWidth=e,this.childrenHeight=s,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(s-t.height)/2})}},register:function(t){for(var e in t)n[e]=t[e]},icons:n},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{class:t.clazz,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon?s("path",{attrs:{d:t.icon.d}}):t._e()])],2)},staticRenderFns:[]};var r=s("VU/8")(i,o,!1,function(t){s("csa/")},null,null);e.a=r.exports},"3V15":function(t,e){},"4/hK":function(t,e){},"4kF5":function(t,e){},"5JN1":function(t,e){},"5Wvt":function(t,e){},"70mm":function(t,e){},"7vMj":function(t,e){},"8jVg":function(t,e){},"9M+g":function(t,e){},"A+Eb":function(t,e){},BzoV:function(t,e){},GUiZ:function(t,e){},Jmt5:function(t,e){},LD2N:function(t,e){},"M/VQ":function(t,e){},MIJw:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-100",attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},i=s("VU/8")({name:"app"},n,!1,null,null,null).exports,o=s("/ocq"),r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-wrapper"},[e("p",{staticClass:"notfound"},[this._v("404 Not Found")])])}]};var c=s("VU/8")({name:"not-found-page"},r,!1,function(t){s("A+Eb")},"data-v-4eeffe15",null).exports,l=s("Dd8w"),u=s.n(l),d=s("M4fF"),m=s.n(d),p=s("PJh5"),h=s.n(p),f=s("2+Bm"),v=s("NYxO"),_=s("lII0"),g=new a.default,b={name:"Modal",created:function(){g.$on("show",this.show)},destroy:function(){g.$off("show",this.show)},data:function(){return{type:"approval",header:"",message:"",strongMessage:"",event:null,eventParams:{},value:"",isShowed:!1,approvedName:null}},computed:{isApprovalType:function(){return"approval"===this.type},isCreatorType:function(){return"creator"===this.type},isUndoneType:function(){return"undone"===this.type},isRenameType:function(){return"rename"===this.type},Approved:function(){return this.approvedName===this.name}},methods:{show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,s=t.header,a=t.message,n=t.strongMessage,i=t.event,o=t.eventParams,r=t.callback,c=t.name;this.type=e||"approval",this.header=s||"",this.message=a||"",this.strongMessage=n||"",this.event=i||"",this.eventParams=o||{},this.callback=r||Function,this.name=c||null,this.isShowed=!0},onConfirm:function(t){t.preventDefault(),this.event&&(this.isApprovalType&&this.$emit(this.event,this.eventParams),this.isUndoneType&&this.Approved&&this.$emit(this.event,this.eventParams),this.isCreatorType&&this.$emit(this.event,u()({},this.eventParams,{value:this.value}))),this.value="",this.approvedName="",this.isShowed=!1,this.callback()},onConfirmRename:function(){var t=this;this.$emit(this.event,u()({},this.eventParams,{value:this.value})),this.$nextTick(function(){t.$modal.show("confirmRenameNS"),t.onCancel()})},onCancel:function(){this.value="",this.approvedName="",this.isShowed=!1}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{centered:"","hide-footer":t.isUndoneType||t.isRenameType},on:{ok:t.onConfirm},scopedSlots:t._u([{key:"modal-title",fn:function(){return[s("span",{class:{"text-danger":t.isUndoneType||t.isRenameType}},[t._v(t._s(t.header))])]},proxy:!0}]),model:{value:t.isShowed,callback:function(e){t.isShowed=e},expression:"isShowed"}},[t._v(" "),s("center",[t._v(t._s(t.message))]),t._v(" "),s("br"),t._v(" "),t.isApprovalType?s("div",{staticClass:"changes"},[s("strong",[t._v(t._s(t.strongMessage))])]):t._e(),t._v(" "),t.isUndoneType?s("div",[s("b-input",{model:{value:t.approvedName,callback:function(e){t.approvedName=e},expression:"approvedName"}}),t._v(" "),s("div",{staticClass:"float-right"},[s("b-button",{staticClass:"mt-3",attrs:{variant:"primary"},on:{click:t.onCancel}},[t._v("Cancel")]),t._v(" "),s("b-button",{staticClass:"mt-3",attrs:{variant:"danger",disabled:!t.Approved},on:{click:t.onConfirm}},[t._v("OK")])],1)],1):t._e(),t._v(" "),t.isRenameType?s("div",[s("b-input",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),s("div",{staticClass:"float-right"},[s("b-button",{staticClass:"mt-3",attrs:{variant:"primary"},on:{click:t.onCancel}},[t._v("Cancel")]),t._v(" "),s("b-button",{staticClass:"mt-3",attrs:{variant:"danger"},on:{click:function(e){return e.preventDefault(),t.onConfirmRename(e)}}},[t._v("Save")])],1)],1):t._e(),t._v(" "),s("b-form",{on:{submit:function(e){return e.preventDefault(),t.onConfirm(e)}}},[t.isCreatorType?s("b-form-input",{attrs:{size:"sm",type:"text",placeholder:"Enter a name"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e()],1)],1)},staticRenderFns:[]};var C=s("VU/8")(b,y,!1,function(t){s("QCFS")},"data-v-01b1fa94",null).exports,S=C,E={root:"/",items:"/items",indexes:"/indexes",queries:"/query",memory_stats:"/memory_stats",config:"/configuration",custom_config:"/custom_config",perfstats:"/perfstats",queriesperfstats:"/queriesperfstats",meta:"/meta",activity_stat:"/activity_stat",clients_stats:"/clients_stats"},w={name:"NavHeader",components:{Octicon:f.a},props:{databaseSelected:{type:String,default:""},databases:{type:Array,default:function(){return[]}}},data:function(){return{webroutes:E,newDatabase:"",tooltips:{plus:"Add database",trashcan:"Delete database",settings:"Settings"}}},computed:{database:function(){if(!this.databaseSelected&&!m.a.isEmpty(this.databases)){var t=this.databases[0];return this.$emit("onDatabaseSelect",t),t}return this.databaseSelected},databasesListIsEmpty:function(){return m.a.isEmpty(this.databases)},isNewDatabaseEmpty:function(){return m.a.isEmpty(this.newDatabase)},isDatabaseSelected:function(){return!m.a.isEmpty(this.databaseSelected)},curPath:function(){return this.$route.path}},mounted:function(){this.$emit("onDataLoad")},methods:{onDatabaseSelect:function(t){this.databaseSelected!==t&&this.$emit("onDatabaseSelect",t)},onDatabaseCreate:function(t){this.$store.dispatch("dbs/createDb",t)},onDatabaseDeleteQuestion:function(t){this.$cmodal.show({header:"This action cannot be undone! Are you sure?",message:"This action will cause a removal of the database '"+t+"', please, enter namespace for confirm:",strongMessage:t,event:"onDatabaseDelete",eventParams:t,type:"undone",name:t})}},watch:{databases:function(t){if(!t.includes(this.database)){var e=m.a.isEmpty(this.databases[0])?"":this.databases[0];m.a.isEmpty(e)?this.$refs.dbcreate.visible=!0:this.$emit("onDatabaseSelect",e)}}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark header-panel fixed-top"},[a("b-navbar-brand",{staticClass:"header-brand",attrs:{href:"#",to:t.webroutes.root}},[a("img",{attrs:{src:s("mxeB")}}),t._v("Reindexer Face")]),t._v(" "),a("b-navbar-nav",{staticClass:"header-menu"},[a("b-nav-item",{attrs:{href:"#",to:t.webroutes.items,exact:"",active:t.curPath===t.webroutes.items}},[t._v("Items")]),t._v(" "),a("b-nav-item",{attrs:{href:"#",to:t.webroutes.indexes,exact:"",active:t.curPath===t.webroutes.indexes}},[t._v("Indexes")]),t._v(" "),a("b-nav-item",{attrs:{href:"#",to:t.webroutes.custom_config,exact:"",active:t.curPath===t.webroutes.custom_config}},[t._v("Config")]),t._v(" "),a("b-nav-item",{attrs:{href:"#",to:t.webroutes.meta,exact:"",active:t.curPath===t.webroutes.meta}},[t._v("Meta")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"header-menu separator"},[a("b-nav-item",{attrs:{href:"#",to:t.webroutes.queries,exact:"",active:t.curPath===t.webroutes.queries}},[t._v("Query")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"header-menu statistic_block"},[a("b-dropdown",{staticClass:"header-database-select-button",attrs:{text:"Statistics",disabled:t.databasesListIsEmpty,variant:"dark"}},[a("b-dropdown-item",{attrs:{href:"#",to:t.webroutes.memory_stats}},[t._v("Memory consumption")]),t._v(" "),a("b-dropdown-item",{attrs:{href:"#",to:t.webroutes.perfstats}},[t._v("Overal performance")]),t._v(" "),a("b-dropdown-item",{attrs:{href:"#",to:t.webroutes.queriesperfstats}},[t._v("Queries performance")]),t._v(" "),a("b-dropdown-item",{attrs:{href:"#",to:t.webroutes.activity_stat}},[t._v("Current activities")]),t._v(" "),a("b-dropdown-item",{attrs:{href:"#",to:t.webroutes.clients_stats}},[t._v("Clients connections")])],1)],1),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-button-group",[a("b-dropdown",{staticClass:"header-database-select-button",attrs:{disabled:t.databasesListIsEmpty,variant:"dark",text:t.databaseSelected||t.database}},[a("b-dropdown-header",[t._v("Databases")]),t._v(" "),t._l(t.databases,function(e,s){return a("b-dropdown-item-button",{key:s,on:{click:function(s){return t.onDatabaseSelect(e)}}},[t._v(t._s(e))])})],2),t._v(" "),a("b-dropdown",{ref:"dbcreate",staticClass:"header-database-create-button",attrs:{variant:"dark",size:"md","no-caret":""}},[a("template",{slot:"button-content"},[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"icon_tooltip plus",attrs:{title:t.tooltips.plus}},[a("octicon",{staticClass:"mt-1",attrs:{name:"plus",scale:"1"}})],1)]),t._v(" "),a("b-container",{staticClass:"header-database-dropdown-menu mt-2 mb-3"},[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.onDatabaseCreate(t.newDatabase)}}},[a("b-form-input",{attrs:{variant:"primary",size:"sm",type:"text",placeholder:"New database"},model:{value:t.newDatabase,callback:function(e){t.newDatabase=e},expression:"newDatabase"}})],1)],1),t._v(" "),a("b-col",{attrs:{cols:"2"}},[a("b-button",{attrs:{size:"sm",variant:"success",disabled:t.isNewDatabaseEmpty},on:{click:function(e){return t.onDatabaseCreate(t.newDatabase)}}},[t._v("Create")])],1)],1)],1)],2),t._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"icon_tooltip",attrs:{title:t.tooltips.trashcan,size:"sm",variant:"dark",disabled:!t.isDatabaseSelected},on:{click:function(e){return t.onDatabaseDeleteQuestion(t.database)}}},[a("octicon",{staticClass:"mt-1",attrs:{name:"trashcan",scale:"1"}})],1),t._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"icon_tooltip",attrs:{title:t.tooltips.settings,size:"sm",variant:"dark"},on:{click:function(e){return t.$router.push({name:"ConfigPage"})}}},[a("octicon",{staticClass:"mt-1",attrs:{name:"gear",scale:"1"}})],1)],1)],1)],1)])},staticRenderFns:[]};var T=s("VU/8")(w,x,!1,function(t){s("jfUk")},"data-v-4a191008",null).exports,I=s("fZjL"),k=s.n(I),A=s("i8Yg"),N={name:"SideBar",components:{Scrolly:A.a,ScrollyViewport:A.c,ScrollyBar:A.b,Octicon:f.a},data:function(){return{newNamespace:"",filterNS:"",activeSideBarMove:!1,tooltips:{trashcan:"Delete namespace",plus:"Add namespace",sync:"Refresh namespaces",rename:"Rename namespace"}}},props:{items:{type:Array,default:function(){return[]}},iconsSet:{type:Array,default:function(){return[]}},selectedNamespace:{type:String,default:""},isOpened:{type:Boolean,default:!1},isItemsLoading:{type:Boolean,default:!1},isSelectedLoading:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},computed:u()({},Object(v.d)({namespace:function(t){return t.settings.namespace||t.items.namespaces[0]},database:function(t){return t.settings.database}}),{isNamespaceSelected:function(){return m.a.size(this.selectedNamespace)},isNewNamespaceEmpty:function(){return m.a.isEmpty(this.newNamespace)},getFilter:function(){return this.filterNS.toLowerCase().trim()},keymap:function(){var t=this;return{left:function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&(t.activeSideBarMove=!0)},right:function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&(t.activeSideBarMove=!1)},down:function(e){var s=document.activeElement;if(t.activeSideBarMove&&m.a.isUndefined(s.selectionStart)&&"ConfigPage"!==t.$router.currentRoute.name&&"ActivityPage"!==t.$router.currentRoute.name&&"PerfstatsPage"!==t.$router.currentRoute.name){e.preventDefault();var a=t.filter(t.items),n=m.a.findIndex(a,function(e){return e===t.namespace});a[n+1]&&t.onNamespaceSelect(a[n+1]),document.getElementsByClassName("scrolly-viewport")[0].scrollTo({top:45*n,behavior:"smooth"})}},up:function(e){var s=document.activeElement;if(t.activeSideBarMove&&m.a.isUndefined(s.selectionStart)&&"ConfigPage"!==t.$router.currentRoute.name&&"ActivityPage"!==t.$router.currentRoute.name&&"PerfstatsPage"!==t.$router.currentRoute.name){e.preventDefault();var a=t.filter(t.items),n=m.a.findIndex(a,function(e){return e===t.namespace});a[n-1]&&t.onNamespaceSelect(a[n-1]),document.getElementsByClassName("scrolly-viewport")[0].scrollTo({top:45*(n-1),behavior:"smooth"})}},enter:function(){var e=document.activeElement;if("filterNS"===e.getAttribute("id")){t.activeSideBarMove=!0;var s=t.filter(t.items)[0];s&&(t.onNamespaceSelect(s),e.blur())}}}}}),mounted:function(){this.onDataLoad(),this.$eventHub.on("focusOnFilterNamespace",this.focusOnFilter)},methods:{getUrl:function(t){var e=u()({},this.$route.query)||{};e.namespace=t,e.db=e.db||this.database;var s="?";return k()(e).forEach(function(t){s+=t+"="+e[t]+"&"}),"/face/items"+s},highlight:function(t){return"<span>"+t.replace(this.getFilter,'<span class="highligth">'+this.getFilter+"</span>")+"</span>"},filter:function(){var t=this;try{return this.items.filter(function(e){return e.match(t.getFilter)})}catch(t){return""}},focusOnFilter:function(){this.$refs&&this.$refs.filterNS&&this.$refs.filterNS.focus()},isSpinnable:function(t){return t===this.selectedNamespace&&this.isSelectedLoading},itemIconSelect:function(t){return this.iconsSet[t]?this.iconsSet[t]:""},mouseOver:function(){this.active=!this.active},onToggle:function(){this.$emit("onToggle")},onDataLoad:function(){this.$emit("onDataLoad")},onNamespaceSelect:function(t){this.$emit("onNamespaceSelect",t)},onNamespaceDelete:function(t){this.$emit("onNamespaceDelete",t)},onNamespaceCreate:function(){this.$emit("onNamespaceCreate")},onNamespaceRename:function(t){this.$emit("onNamespaceRename",t)}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.keymap,expression:"keymap"}],staticClass:"sidebar-container bg-dark",class:{"sidebar-container-max":t.isOpened}},[s("button",{staticClass:"btn-block sidebar-toggler text-muted",on:{click:t.onToggle}},[s("b-icon",{attrs:{icon:"arrow-clockwise",animation:"spin","font-scale":"4"}}),t._v(" "),s("octicon",{directives:[{name:"show",rawName:"v-show",value:!t.isOpened,expression:"!isOpened"}],staticClass:"sidebar-icon",attrs:{name:"grabber",scale:"3"}}),t._v(" "),s("octicon",{directives:[{name:"show",rawName:"v-show",value:t.isOpened,expression:"isOpened"}],staticClass:"sidebar-icon collapse",attrs:{name:"chevron-left",scale:"2.5"}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isOpened,expression:"isOpened"}],staticClass:"collapse-text"},[t._v("Collapse sidebar")])],1),t._v(" "),t.isOpened?s("div",{staticClass:"sidebar-control-panel"},[s("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"sidebar-panel-button sidebar-panel-button-left text-white float-left icon_tooltip",class:{"sidebar-panel-button-disabled":t.isDisabled||!t.isNamespaceSelected},attrs:{title:t.tooltips.trashcan},on:{click:function(e){return t.onNamespaceDelete(t.selectedNamespace)}}},[s("octicon",{attrs:{name:"trashcan",scale:"2"}})],1),t._v(" "),s("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"sidebar-panel-button sidebar-panel-button-left text-white icon_tooltip",class:{"sidebar-panel-button-disabled":t.isDisabled},attrs:{title:t.tooltips.plus},on:{click:t.onNamespaceCreate}},[s("octicon",{attrs:{name:"plus",scale:"2"}})],1),t._v(" "),s("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"sidebar-panel-button sidebar-panel-button-left text-white icon_tooltip",class:{"sidebar-panel-button-disabled":t.isDisabled||!t.isNamespaceSelected},attrs:{title:t.tooltips.rename},on:{click:function(e){return t.onNamespaceRename(t.selectedNamespace)}}},[s("octicon",{attrs:{name:"pencil",scale:"2"}})],1),t._v(" "),s("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"sidebar-panel-button sidebar-panel-button-right text-white float-right icon_tooltip",class:{"sidebar-panel-button-disabled":t.isDisabled},attrs:{title:t.tooltips.sync},on:{click:t.onDataLoad}},[s("octicon",{attrs:{name:"sync",scale:"2",spin:t.isItemsLoading}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"sidebar-items-list",class:{"sidebar-hide":!t.isOpened}},[s("div",{staticClass:"ns-filter"},[s("b-form-input",{ref:"filterNS",staticClass:"mb-1",attrs:{id:"filterNS",variant:"primary",size:"sm",placeholder:"Enter namespace for the filter..."},model:{value:t.filterNS,callback:function(e){t.filterNS=e},expression:"filterNS"}})],1),t._v(" "),s("scrolly",{staticClass:"sidebar-scroll-container"},[s("scrolly-viewport",[s("ul",{staticClass:"list-unstyled"},t._l(t.filter(t.items),function(e){return s("li",{staticClass:"item",class:{"item-active":t.selectedNamespace===e},on:{mouseover:t.mouseOver}},[s("a",{staticClass:"link",attrs:{href:t.getUrl(e)},on:{click:function(s){return s.preventDefault(),t.onNamespaceSelect(e)}}},[s("span",{staticClass:"text item-text",domProps:{innerHTML:t._s(t.highlight(e))}})])])}),0)]),t._v(" "),s("scrolly-bar",{attrs:{axis:"y"}})],1)],1)])},staticRenderFns:[]};var z=s("VU/8")(N,F,!1,function(t){s("3V15"),s("kape")},"data-v-0dece764",null).exports,M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-card",{attrs:{title:"Keyboard Shortcuts"}},[e("b-col",{attrs:{cols:"12"}},[e("b-table",{attrs:{striped:"",hover:"",items:this.keys}})],1)],1)},staticRenderFns:[]},L=s("VU/8")({name:"ShortkeyHelp",data:function(){return{keys:[{key:"q",globa_shortcuts:"Redirect to Query Page"},{key:"f",globa_shortcuts:"Focus on find items"},{key:"s",globa_shortcuts:"Focus on filter namespace"},{key:"esc",globa_shortcuts:"Blur active element"},{key:"shift+right",globa_shortcuts:"Scrolls the list forward"},{key:"shift+left",globa_shortcuts:"Scrolls back through the list"}]}}},M,!1,null,null,null).exports,D=s("xGou"),P=s.n(D)()({chr:"X"}),R={name:"default-layout",components:{Modal:S,Octicon:f.a,Sidebar:z,Toast:_.Toast,NavHeader:T,ShortkeyHelp:L},data:function(){return{scrollList:!1,newNamespace:""}},computed:u()({},Object(v.d)({isSidebarOpened:function(t){return t.settings.isSidebarOpened},sidebarIcons:function(t){return t.namespaces.list.map(function(t){return t.storage_enabled?"database":"flame"})},databases:function(t){return t.dbs.list},database:function(t){return t.settings.database},namespace:function(t){return t.settings.namespace||t.items.namespaces[0]||t.namespaces.one.name},sidebarIsLoading:function(t){return t.namespaces.isLoading},sidebarIsSelectedLoading:function(t){return t.items.isLoading},sidebarIsDisabled:function(t){return m.a.isEmpty(t.settings.database)}}),Object(v.c)({sidebarItems:"namespaces/namesWithoutHash"}),{keymap:function(){var t=this;return{q:function(e){if("QueriesPage"!==t.$router.currentRoute.name){var s=document.activeElement;m.a.isUndefined(s.selectionStart)&&(e.preventDefault(),t.$router.push({name:"QueriesPage"}))}},s:function(e){var s=document.activeElement;m.a.isUndefined(s.selectionStart)&&(e.preventDefault(),t.$eventHub.emit("focusOnFilterNamespace"))},"/+shift":function(e){var s=document.activeElement;m.a.isUndefined(s.selectionStart)&&(e.preventDefault(),t.$modal.show("shortcuts"))},f:function(e){var s=document.activeElement;m.a.isUndefined(s.selectionStart)&&(e.preventDefault(),t.$router.push({name:"ItemsPage"}))},esc:function(){t.$refs.lightning_rod.focus()},right:function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&(t.scrollList=!0)},left:function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&(t.scrollList=!1)},down:function(){var e=document.activeElement;if(m.a.isUndefined(e.selectionStart)&&t.scrollList){var s=document.querySelector("#list-scrolly"),a=document.querySelector(".flex-table-body");s&&(s.scrollTop+=50),a&&(a.scrollTop+=50)}},up:function(){var e=document.activeElement;if(m.a.isUndefined(e.selectionStart)&&t.scrollList){var s=document.querySelector("#list-scrolly"),a=document.querySelector(".flex-table-body");s&&(s.scrollTop-=50),a&&(a.scrollTop-=50)}}}},statisticPage:function(){switch(this.$router.currentRoute.name){case"PerfstatsPage":case"QueriesPerfstatsPage":case"ActivityPage":case"MemoryStatsPage":case"ConfigPage":case"ClientsStatsPage":case"MainPage":case"QueriesPage":return!0;default:return!1}}}),methods:u()({},Object(v.b)({selectDatabase:"settings/selectDatabase",fetchDatabases:"dbs/getDbList",fetchNamespaces:"namespaces/getNamespacesList",selectNamespace:"settings/selectNamespace",onSidebarToggle:"settings/sidebarToggle",resetNamespaces:"namespaces/reset",resetItems:"items/reset",resetSelectedNamespace:"settings/resetSelectedNamespace",getItemsList:"items/getItemsList",getNamespaceOne:"namespaces/getNamespaceOne",setMeta:"metas/setMeta"}),{onSidebarDataLoad:function(){this.database&&this.fetchNamespaces(this.database)},onDatabaseSelect:function(t){var e=this;this.resetNamespaces(),this.resetItems(),this.resetSelectedNamespace(),this.selectDatabase(t).then(function(){return e.fetchNamespaces(e.database)}),localStorage.setItem("database",t);var s=u()({},this.$route.query,{db:t});"ItemsPage"===this.$router.currentRoute.name&&(s={db:t}),this.$router.push({query:s})},onNamespaceSelect:function(t){var e=this,s=JSON.parse(localStorage.getItem("itemsFilters"))||{};this.getNamespaceOne({db:this.database,namespace:t}).then(function(){"CustomConfigPage"!==e.$router.currentRoute.name&&e.getItemsList({db:e.database,namespace:t,params:{filter:s[t],pageSize:e.$route.query.page_size,width:window.innerWidth/P.width,with_columns:1}})}),this.selectNamespace(t),"ItemsPage"!==this.$router.currentRoute.name&&"MetaPage"!==this.$router.currentRoute.name&&"CustomConfigPage"!==this.$router.currentRoute.name&&"IndexesPage"!==this.$router.currentRoute.name?this.$router.push({name:"ItemsPage"}):"ItemsPage"===this.$router.currentRoute.name?this.$router.push({query:u()({},this.$route.query,{db:this.database,namespace:t,filter:s[t],page_size:this.$route.query.page_size,page:this.$route.query.page})}):"CustomConfigPage"===this.$router.currentRoute.name&&this.$router.push({query:u()({},this.$route.query,{db:this.database,namespace:t})}),this.$eventHub.emit("namespaceChanged")},onNamespaceDeleteQuestion:function(t){var e={db:this.database,namespace:t};this.$cmodal.show({header:"This action cannot be undone! Are you sure?",message:"This action will cause a removal of the namespace '"+t+"', please, enter namespace for confirm:",strongMessage:t,event:"onNamespaceDelete",eventParams:e,type:"undone",name:t})},onNamespaceCreateQuestion:function(t){var e={db:this.database};this.$cmodal.show({type:"creator",header:"Create",message:"This action will create a namespace:",strongMessage:t,event:"onNamespaceCreate",eventParams:e})},onNamespaceRenameQuestion:function(t){var e={db:this.database};this.$cmodal.show({header:"Rename Namespace",message:"This action will rename the namespace '"+t+"', please, enter new name:",strongMessage:t,event:"onNamespaceRename",eventParams:e,name:t,type:"rename"})},onDatabaseDelete:function(t){this.$store.dispatch("dbs/deleteDb",t)},onNamespaceCreate:function(t){var e={db:t.db,json:{name:t.value,storage:{enabled:!0,drop_on_file_format_error:!0,create_if_missing:!0},indexes:[]}};this.$store.dispatch("namespaces/createNamespace",e)},onNamespaceDelete:function(t){var e=this;this.selectNamespace(""),this.$store.dispatch("namespaces/deleteNamespace",t).then(function(){e.$router.push({name:"MainPage"})})},onItemDelete:function(t){var e=u()({db:this.database,namespace:this.namespace},t);this.$store.dispatch("items/deleteItem",e)},onNamespaceClear:function(){var t={db:this.database,namespace:this.namespace};this.$store.dispatch("items/clearNamespace",t)},onNamespaceRename:function(t){this.newNamespace=t.value},onNamespaceRenameConfirm:function(){var t=this,e={db:this.database,namespace:this.namespace,newNamespace:this.newNamespace};this.$store.dispatch("namespaces/renameNamespace",e).then(function(){t.fetchNamespaces(t.database),t.$router.push({query:u()({},t.$route.query,{namespace:t.newNamespace})}),t.selectNamespace(t.newNamespace)}),this.onCloseConfirmRenameNS()},onItemUpdate:function(t){var e=u()({db:this.database,namespace:this.namespace},t);this.$store.dispatch("items/updateItem",e)},onItemCreate:function(t){var e=u()({db:this.database,namespace:this.namespace},t);this.$store.dispatch("items/createItem",e)},onIndexDelete:function(t){var e={db:this.database,namespace:this.namespace,index:t};this.$store.dispatch("namespaces/deleteIndex",e)},onIndexCreate:function(t){var e={db:this.database,namespace:this.namespace,index:t};this.$store.dispatch("namespaces/createIndex",e)},updateMeta:function(t){var e={db:this.database,namespace:this.namespace,item:t,params:{with_values:!0}};this.setMeta(e)},onCloseConfirmRenameNS:function(){this.$modal.hide("confirmRenameNS")}}),mounted:function(){var t=this.$route.query.db;t&&this.onDatabaseSelect(t)},watch:{database:function(t){this.fetchNamespaces(t)}}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.keymap,expression:"keymap"}],staticClass:"h-100"},[s("nav-header",{attrs:{databases:t.databases,databaseSelected:t.database},on:{onDataLoad:t.fetchDatabases,onDatabaseSelect:t.onDatabaseSelect}}),t._v(" "),s("modal",{on:{onDatabaseDelete:t.onDatabaseDelete,onNamespaceDelete:t.onNamespaceDelete,onNamespaceCreate:t.onNamespaceCreate,onItemDelete:t.onItemDelete,onItemCreate:t.onItemCreate,onItemUpdate:t.onItemUpdate,onNamespaceClear:t.onNamespaceClear,onIndexDelete:t.onIndexDelete,onIndexCreate:t.onIndexCreate,updateMeta:t.updateMeta,onNamespaceRename:t.onNamespaceRename}}),t._v(" "),s("div",{staticClass:"content-container h-100",class:{"content-container-min":t.isSidebarOpened}},[s("sidebar",{attrs:{items:t.sidebarItems,iconsSet:t.sidebarIcons,selectedNamespace:t.namespace,isOpened:t.isSidebarOpened,isItemsLoading:t.sidebarIsLoading,isSelectedLoading:t.sidebarIsSelectedLoading,isDisabled:t.sidebarIsDisabled},on:{onToggle:t.onSidebarToggle,onDataLoad:t.onSidebarDataLoad,onNamespaceSelect:t.onNamespaceSelect,onNamespaceDelete:t.onNamespaceDeleteQuestion,onNamespaceCreate:t.onNamespaceCreateQuestion,onNamespaceRename:t.onNamespaceRenameQuestion}}),t._v(" "),s("span",{ref:"lightning_rod",staticClass:"hidden",attrs:{tabindex:"0"}}),t._v(" "),s("div",{staticClass:"page-content h-100"},[s("transition",{attrs:{name:"fade"}},[t.namespace&&!t.statisticPage?s("div",{staticClass:"selected-namespace"},[t._v("Selected namespace: "),s("b",[t._v(t._s(t.namespace))])]):t._e()]),t._v(" "),t._t("page")],2),t._v(" "),s("toast",{attrs:{position:"se"}})],1),t._v(" "),s("v-modal",{attrs:{name:"shortcuts",adaptive:!0,scrollable:!0,minWidth:500,minHeight:500}},[s("ShortkeyHelp")],1),t._v(" "),s("v-modal",{attrs:{name:"confirmRenameNS",adaptive:!0,scrollable:!0,height:150,minWidth:500,minHeight:150}},[s("div",{staticClass:"p-3"},[s("h4",{staticClass:"text-center"},[t._v("Are you sure you want to rename"),s("br"),t._v(" the "),s("b",{staticClass:"text-danger"},[t._v(t._s(t.namespace))]),t._v(" to "),s("b",{staticClass:"text-danger"},[t._v(t._s(t.newNamespace))])]),t._v(" "),s("div",{staticClass:"float-right"},[s("b-button",{staticClass:"mt-3",attrs:{variant:"primary"},on:{click:t.onCloseConfirmRenameNS}},[t._v("Cancel")]),t._v(" "),s("b-button",{staticClass:"mt-3",attrs:{variant:"danger"},on:{click:function(e){return e.preventDefault(),t.onNamespaceRenameConfirm(e)}}},[t._v("Save")])],1)])])],1)},staticRenderFns:[]};var O=s("VU/8")(R,j,!1,function(t){s("etaR"),s("pMoH")},"data-v-0a43f8da",null).exports,q=s("35dM"),B=s.n(q),U={mega:1e6,gyga:1e9,kilo:1e3};var $=s("DbJJ"),Q=s.n($);var X={name:"MainPage",components:{DefaultLayout:O},data:function(){return{refreshStatusIntervalMs:5e3,clockTick:1e3,refreshIntervalDescriptor:null,uptimeIncrementDescriptor:null,isUnavailable:!1}},computed:u()({},Object(v.d)({status:function(t){return t.service.status},version:function(t){return t.service.version},uptime:function(t){return t.service.uptime},startTime:function(t){return t.service.startTime}}),{onOffStatus:function(){return this.isUnavailable?"Offline":"Online"},startTimeFormatted:function(){return p.unix(this.startTime).format("DD.MM.YYYY HH:MM:ss")}}),methods:u()({},Object(v.b)({getStatus:"service/getStatus",modifyServiceStateAsKV:"service/modifyStateAsKV"}),{bytesToSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=1;t>U.mega?s=2:t>U.gyga&&(s=3);var a=B()(t,{precision:s});return e?""+a.value+a.unit:a},uptimeFormat:function(t){var e=Math.floor(t/86400),s=Math.floor((t-86400*e)/3600),a=Math.floor((t-86400*e-3600*s)/60),n=t-86400*e-3600*s-60*a;return(e>0?Q()("day",e,!0)+" ":"")+" "+(s<10?"0"+s:""+s)+":"+(a<10?"0"+a:""+a)+":"+(n<10?"0"+n:""+n)},getStatusAndSync:function(){var t=this;this.getStatus().then(function(){clearInterval(t.uptimeIncrementDescriptor),t.isUnavailable=!1;var e={};t.uptime<t.status.uptime&&(e.uptime=t.status.uptime),m.a.isEmpty(t.status.version)||(e.version=t.status.version),m.a.isNil(t.status.start_time)||(e.startTime=t.status.start_time),t.modifyServiceStateAsKV(e),t.uptimeIncrementDescriptor=setInterval(t.uptimeIncrement,t.clockTick)}).catch(function(){t.isUnavailable=!0,clearInterval(t.uptimeIncrementDescriptor)})},uptimeIncrement:function(){this.modifyServiceStateAsKV({uptime:this.uptime+1})}}),mounted:function(){this.getStatusAndSync(),this.refreshIntervalDescriptor=setInterval(this.getStatusAndSync,this.refreshStatusIntervalMs)},destroyed:function(){clearInterval(this.refreshIntervalDescriptor),clearInterval(this.uptimeIncrementDescriptor)}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("div",{staticClass:"container mt-5"},[s("b-jumbotron",{attrs:{header:"Reindexer Face",lead:t.version}},[s("p",{class:{"text-danger":t.isUnavailable,"text-success":!t.isUnavailable}},[s("b",[t._v(t._s(t.onOffStatus))])]),t._v(" "),s("br"),t._v(" "),s("p",[s("b",[t._v("Start time")]),t._v(": "+t._s(t.startTimeFormatted))]),t._v(" "),s("p",[s("b",[t._v("Uptime")]),t._v(": "+t._s(t.uptimeFormat(t.uptime)))]),t._v(" "),s("p",[s("b",[t._v("Allocated")]),t._v(": "+t._s(t.bytesToSize(t.status.current_allocated_bytes)))]),t._v(" "),s("p",[s("b",[t._v("Heap size")]),t._v(": "+t._s(t.bytesToSize(t.status.heap_size)))]),t._v(" "),s("p",[s("b",[t._v("Pageheap free")]),t._v(": "+t._s(t.bytesToSize(t.status.pageheap_free)))]),t._v(" "),s("p",[s("b",[t._v("Pageheap unmapped")]),t._v(": "+t._s(t.bytesToSize(t.status.pageheap_unmapped)))])])],1)])])},staticRenderFns:[]},H=s("VU/8")(X,G,!1,null,null,null).exports,V=s("mvHQ"),W=s.n(V),J={name:"Preloader",props:{value:{type:Boolean,default:!1}}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{aligner:t.value}},[t.value?s("div",{attrs:{id:"floatingCirclesG"}},[s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_01"}}),t._v(" "),s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_02"}}),t._v(" "),s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_03"}}),t._v(" "),s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_04"}}),t._v(" "),s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_05"}}),t._v(" "),s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_06"}}),t._v(" "),s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_07"}}),t._v(" "),s("div",{staticClass:"f_circleG",attrs:{id:"frotateG_08"}})]):t._e()])},staticRenderFns:[]};var K={name:"PageStatusNotifier",components:{Preloader:s("VU/8")(J,Y,!1,function(t){s("bnvi")},"data-v-17a49d00",null).exports},props:{currentDatabaseName:{type:String,default:null},currentNamespaceName:{type:String,default:null},isLoadingProgress:{type:Boolean,default:!1}},computed:{warningMessage:function(){return!this.isLoadingProgress&&m.a.isEmpty(this.currentDatabaseName)?"Create a database":!m.a.isNull(this.currentNamespaceName)&&m.a.isEmpty(this.currentNamespaceName)&&m.a.size(this.currentDatabaseName)?"Select a namespace":null}}},Z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("preloader",{model:{value:t.isLoadingProgress,callback:function(e){t.isLoadingProgress=e},expression:"isLoadingProgress"}}),t._v(" "),t.warningMessage?s("b-alert",{attrs:{show:""}},[t._v(t._s(t.warningMessage))]):t._e()],1)},staticRenderFns:[]};var tt=s("VU/8")(K,Z,!1,function(t){s("Vu5b")},null,null).exports,et=s("Gu7T"),st=s.n(et),at=s("o4sT"),nt=s.n(at),it=s("vdhV"),ot=s.n(it),rt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"inner_close"},[e("div",{staticClass:"text-center"},[this._v("Do you want to close dialog? All changes will be lost.")]),this._v(" "),e("div",{staticClass:"float-right mt-3 mb-3"},[e("b-button",{attrs:{variant:"success",size:"md"},on:{click:this.toStay}},[this._v("Do not close")]),this._v(" "),e("b-button",{attrs:{variant:"danger",size:"md"},on:{click:this.toExit}},[this._v("Discard changes and close")])],1)])},staticRenderFns:[]};var ct=s("VU/8")({name:"ConfirmClose",methods:{toStay:function(){this.$emit("toStay")},toExit:function(){this.$emit("toExit")}}},rt,!1,function(t){s("/NGz")},"data-v-f2e4fa60",null).exports,lt={name:"An index name is used in 'WHERE' or 'JOIN' queries.\nFor the composite indexes name is also defines composite index parts in the following format:\nsubindex1+subindex2[[+...subindexN][=namealias]]]",jsonPaths:"A name for mapping to json field. May contain nested fields: 'nested.field'.\nMay contain a few comma-separated json fileds: 'field1,field2' .",fieldType:"Index field type.",indexType:"Index type.",options:"Pk - field is a part of a primary key. Struct must have at least 1 field tagged with pk;\n\nArray - array index;\n\nDense - reduce index size. For hash and tree it will save 8 bytes per unique key value.\nFor - it will save 4-8 bytes per each element. Useful for indexes with high selectivity, but for tree and hash indexes with low selectivity can seriously decrease update performance;\n\nSparse - value of index may not present in the document.",collateMode:"numeric - create string index that provides values order in numeric sequence. The field type must be a string.\n\nascii - create case-insensitive string index works with ASCII. The field type must be a string.\n\nutf8 - create case-insensitive string index works with UTF8. The field type must be a string.\n\ncustom  - create custom order string index.\n",sortOrderLetters:" a sequence of letters which defines sort order",config:"index config in JSON format",enable_translit:"Enable russian translit variants processing. e.g. term 'luntik' will match word 'лунтик'",enable_numbers_search:"Enable number variants processing. e.g. term '100' will match words one hundred",enable_kb_layout:"Enable wrong keyboard layout variants processing. e.g. term 'keynbr' will match word 'лунтик'",log_level:"Log level of full text search engine",merge_limit:"Maximum documents count which will be processed in merge query results. Increasing this value may refine ranking of queries with high frequency words, but will decrease search speed",extra_word_symbols:"List of symbols, which will be threated as word part, all other symbols will be thrated as wors separators",stop_words:"List of stop words. Words from this list will be ignored in documents and queries",stemmers:"List of stemmers to use",bm25_boost:"Boost of bm25 ranking",bm25_weight:"Weight of bm25 rank in final rank 0: bm25 will not change final rank. 1: bm25 will affect to finl rank in 0 - 100% range",distance_boost:"Boost of search query term distance in found document",distance_weght:"Weight of search query terms distance in found document in final rank 0: distance will not change final rank. 1: distance will affect to final rank in 0 - 100% range",term_len_boost:"Boost of search query term length",term_len_weght:"Weight of search query term length in final rank. 0: term length will not change final rank. 1: term length will affect to final rank in 0 - 100% range",min_relevancy:"Minimum rank of found documents. 0: all found documents will be returned 1: only documents with relevancy >= 100% will be returned",max_typos_in_word:"Maximum possible typos in word. 0: typos is disabled, words with typos will not match. N: words with N possible typos will match. It is not recommended to set more than 1 possible typo -It will seriously increase RAM usage, and decrease search speed",max_typo_len:"Maximum word length for building and matching variants with typos",max_rebuild_steps:"Maximum steps withou full rebuild of ft - more steps faster commit slower select - optimal about 15",max_step_size:"Maximum unique words to step",stop_words_default:"Use default stop words",full_match_boost:"Boost of full match of search phrase with doc",synonyms:{tokens:"List source terms, which will be replaced with alternatives",alternatives:"List of alternatives, which will be used for search documents"}},ut={name:"SynomynModal",props:{synonyms:{type:Array,default:function(){return[{tokens:[],alternatives:[]}]}}},components:{Octicon:f.a,VueTagsInput:ot.a},data:function(){var t=this.$props.synonyms;return{tooltips:lt,tokens:[],alternatives:[],synonymsModify:t.map(function(t){return{tokens:t.tokens.map(function(t){return{text:t}}),alternatives:t.alternatives.map(function(t){return{text:t}})}})}},computed:{isSynonyms:function(){return this.synonymsModify.length>0}},methods:{Close:function(){this.$modal.hide("synonyms")},saveChanges:function(){var t=this;this.$emit("synonymsSaved",this.synonymsModify.map(function(t){return{tokens:t.tokens.map(function(t){return t.text}),alternatives:t.alternatives.map(function(t){return t.text})}})),setTimeout(function(){t.$modal.hide("synonyms",{confirmExit:!0})},100)},addSynonim:function(){this.synonymsModify=[].concat(st()(this.synonymsModify),[{tokens:[],alternatives:[]}])},removeSynonim:function(t){this.synonymsModify=this.synonymsModify.filter(function(e,s){return s!==t})},tokenChange:function(t,e){this.synonymsModify[t].tokens=e,this.checkChanges()},alternativesChange:function(t,e){this.synonymsModify[t].alternatives=e,this.checkChanges()},onTagBlurAlternatives:function(t,e){var s=t.target.value;m.a.isEmpty(s)||(this.synonymsModify[e].alternatives=[].concat(st()(this.synonymsModify[e].alternatives),[{text:s}]),this.alternatives[e]="",this.checkChanges())},onTagBlurToken:function(t,e){var s=t.target.value;m.a.isEmpty(s)||(this.synonymsModify[e].tokens=[].concat(st()(this.synonymsModify[e].tokens),[{text:s}]),this.tokens[e]="",this.checkChanges())},checkChanges:function(){var t=W()(this.synonymsModify),e=W()(this.synonyms);this.$emit("isChangedSyn",t!==e)}}},dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:"",id:"synonimsConfig"}},[s("b-form",{ref:"form",staticClass:"mt-4",on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[s("b-row",[s("b-col",{staticClass:"mt-2",attrs:{cols:"12"}},[s("h5",[t._v("Fulltext synonyms definition config")])]),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"6"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.synonyms.tokens,name:"question"}}),t._v("\n        List source terms, which will be replaced with alternatives\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"6"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.synonyms.alternatives,name:"question"}}),t._v("\n        List of alternatives, which will be used for search documents\n      ")],1),t._v(" "),t._l(t.synonymsModify,function(e,a){return[s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"6"}},[s("vue-tags-input",{attrs:{tags:e.tokens,addOnKey:[13,32],saveOnKey:[13,32],placeholder:"add token"},on:{"tags-changed":function(e){return t.tokenChange(a,e)},blur:function(e){return t.onTagBlurToken(e,a)}},model:{value:t.tokens[a],callback:function(e){t.$set(t.tokens,a,e)},expression:"tokens[index]"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"5"}},[s("vue-tags-input",{attrs:{tags:e.alternatives,addOnKey:[13,32],saveOnKey:[13,32],placeholder:"add alternative"},on:{"tags-changed":function(e){return t.alternativesChange(a,e)},blur:function(e){return t.onTagBlurAlternatives(e,a)}},model:{value:t.alternatives[a],callback:function(e){t.$set(t.alternatives,a,e)},expression:"alternatives[index]"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"1"}},[s("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return e.stopPropagation(),t.removeSynonim(a)}}},[s("octicon",{attrs:{name:"trashcan"}})],1)],1)]}),t._v(" "),s("b-col",{attrs:{cols:"12"}},[s("b-button",{class:{plus_syn:t.isSynonyms},attrs:{variant:"primary",size:"sm"},on:{click:function(e){return e.stopPropagation(),t.addSynonim()}}},[t._v("\n          Add new synonym\n        ")])],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"12"}},[s("b-button",{staticClass:"float-right ml-1",attrs:{size:"sm",variant:"primary"},on:{click:t.Close}},[t._v("Cancel")]),t._v(" "),s("b-button",{staticClass:"float-right",attrs:{size:"sm",type:"submit",variant:"success"},on:{click:t.saveChanges}},[t._v("Ok")])],1)],2)],1)],1)},staticRenderFns:[]};var mt=s("VU/8")(ut,dt,!1,function(t){s("XTMt")},"data-v-e3bffbe8",null).exports,pt={bm25_boost:1,bm25_weight:.5,distance_boost:1,distance_weght:.5,enable_kb_layout:!0,enable_numbers_search:!1,enable_translit:!0,min_relevancy:.05,term_len_boost:1,term_len_weght:.3,max_typos_in_word:1,max_typo_len:15,max_rebuild_steps:50,max_step_size:4e3,merge_limit:2e4,stemmers:["en","ru"],log_level:0,extra_word_symbols:"-/+",full_match_boost:1,synonyms:[{tokens:[],alternatives:[]}]},ht={name:"ConfigModal",props:{config:{type:String,default:"{}"}},components:{Octicon:f.a,SynomynModal:mt,ConfirmClose:ct},data:function(){var t=void 0;try{t=JSON.parse(this.$props.config),m.a.isEmpty(t)&&(t=u()({},pt))}catch(e){t={synonyms:[{tokens:[],alternatives:[]}]}}return{tooltips:lt,localConfig:t,default_stop_words:m.a.isEmpty(m.a.get(t,"stop_words")),stemmers_opt:["en","ru","nl","fin","de","da","fr","it","hu","no","pt","ro","es","sv","tr"],synonymsIsChanged:!1}},updated:function(){var t=W()(this.localConfig),e=W()(this.config);this.$emit("isChanged",t!==e)},methods:{toggleSynomin:function(){this.$modal.show("synonyms")},saveChanges:function(){var t=Array.prototype.map.call(this.$refs.form,function(t){return t.checkValidity()});-1===m.a.indexOf(t,!1)&&(this.default_stop_words&&m.a.unset(this.localConfig,"stop_words"),this.$emit("configSaved",this.localConfig),this.$modal.hide("config",{confirmExit:!0}))},Close:function(){this.$modal.hide("config")},Reset:function(){this.$modal.show("confirmResetConfig")},synonymsSaved:function(t){this.localConfig.synonyms=[].concat(st()(t))},isChangedSyn:function(t){this.synonymsIsChanged=t},toStay:function(){this.$modal.hide("ConfirmCloseSynomyms")},toExit:function(){this.$modal.hide("ConfirmCloseSynomyms"),this.$modal.hide("synonyms",{confirmExit:!0})},beforeClose:function(t){var e=this,s=m.a.get(t,"params.confirmExit",!1);if(this.synonymsIsChanged&&!s){if(t.stop(),document.getElementById("ConfirmDialogSymonym"))return;setTimeout(function(){e.$modal.show("ConfirmCloseSynomyms")},100)}}}},ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:"",id:"configModal"}},[s("b-form",{ref:"form",staticClass:"mt-4",on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[s("b-row",[s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"12"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.enable_translit,name:"question"}}),t._v("enable translit\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.localConfig.enable_translit,expression:"localConfig.enable_translit"}],staticClass:"float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localConfig.enable_translit)?t._i(t.localConfig.enable_translit,null)>-1:t.localConfig.enable_translit},on:{change:function(e){var s=t.localConfig.enable_translit,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.localConfig,"enable_translit",s.concat([null])):i>-1&&t.$set(t.localConfig,"enable_translit",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.localConfig,"enable_translit",n)}}})],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"12"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.enable_numbers_search,name:"question"}}),t._v("enable numbers search\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.localConfig.enable_numbers_search,expression:"localConfig.enable_numbers_search"}],staticClass:"float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localConfig.enable_numbers_search)?t._i(t.localConfig.enable_numbers_search,null)>-1:t.localConfig.enable_numbers_search},on:{change:function(e){var s=t.localConfig.enable_numbers_search,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.localConfig,"enable_numbers_search",s.concat([null])):i>-1&&t.$set(t.localConfig,"enable_numbers_search",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.localConfig,"enable_numbers_search",n)}}})],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"12"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.enable_kb_layout,name:"question"}}),t._v("enable kb layout\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.localConfig.enable_kb_layout,expression:"localConfig.enable_kb_layout"}],staticClass:"float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localConfig.enable_kb_layout)?t._i(t.localConfig.enable_kb_layout,null)>-1:t.localConfig.enable_kb_layout},on:{change:function(e){var s=t.localConfig.enable_kb_layout,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.localConfig,"enable_kb_layout",s.concat([null])):i>-1&&t.$set(t.localConfig,"enable_kb_layout",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.localConfig,"enable_kb_layout",n)}}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.log_level,name:"question"}}),t._v("log level\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",min:0,max:4},model:{value:t.localConfig.log_level,callback:function(e){t.$set(t.localConfig,"log_level",t._n(e))},expression:"localConfig.log_level"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.merge_limit,name:"question"}}),t._v("merge limit\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",min:0,max:65535},model:{value:t.localConfig.merge_limit,callback:function(e){t.$set(t.localConfig,"merge_limit",t._n(e))},expression:"localConfig.merge_limit"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.extra_word_symbols,name:"question"}}),t._v("extra word symbols\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{model:{value:t.localConfig.extra_word_symbols,callback:function(e){t.$set(t.localConfig,"extra_word_symbols",e)},expression:"localConfig.extra_word_symbols"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.stop_words_default,name:"question"}}),t._v("default stop words\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.default_stop_words,expression:"default_stop_words"}],staticClass:"float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.default_stop_words)?t._i(t.default_stop_words,null)>-1:t.default_stop_words},on:{change:function(e){var s=t.default_stop_words,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.default_stop_words=s.concat([null])):i>-1&&(t.default_stop_words=s.slice(0,i).concat(s.slice(i+1)))}else t.default_stop_words=n}}})]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.default_stop_words,expression:"!default_stop_words"}],staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.stop_words,name:"question"}}),t._v("stop words\n      ")],1),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.default_stop_words,expression:"!default_stop_words"}],staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{disabled:t.default_stop_words,value:t.localConfig.stop_words?t.localConfig.stop_words.join():""},on:{input:function(e){return t.localConfig.stop_words=e.split(",")}}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.stemmers,name:"question"}}),t._v("stemmers\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-select",{staticClass:"stemmers",attrs:{multiple:"",options:t.stemmers_opt},model:{value:t.localConfig.stemmers,callback:function(e){t.$set(t.localConfig,"stemmers",e)},expression:"localConfig.stemmers"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.bm25_boost,name:"question"}}),t._v("bm25 boost\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:10},model:{value:t.localConfig.bm25_boost,callback:function(e){t.$set(t.localConfig,"bm25_boost",t._n(e))},expression:"localConfig.bm25_boost"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.bm25_weight,name:"question"}}),t._v("bm25 weight\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:1},model:{value:t.localConfig.bm25_weight,callback:function(e){t.$set(t.localConfig,"bm25_weight",t._n(e))},expression:"localConfig.bm25_weight"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.distance_boost,name:"question"}}),t._v("distance boost\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:10},model:{value:t.localConfig.distance_boost,callback:function(e){t.$set(t.localConfig,"distance_boost",t._n(e))},expression:"localConfig.distance_boost"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.distance_weght,name:"question"}}),t._v("distance weght\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:1},model:{value:t.localConfig.distance_weght,callback:function(e){t.$set(t.localConfig,"distance_weght",t._n(e))},expression:"localConfig.distance_weght"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.term_len_boost,name:"question"}}),t._v("term len boost\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:10},model:{value:t.localConfig.term_len_boost,callback:function(e){t.$set(t.localConfig,"term_len_boost",t._n(e))},expression:"localConfig.term_len_boost"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.term_len_weght,name:"question"}}),t._v("term len weght\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:1},model:{value:t.localConfig.term_len_weght,callback:function(e){t.$set(t.localConfig,"term_len_weght",t._n(e))},expression:"localConfig.term_len_weght"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.full_match_boost,name:"question"}}),t._v("full match boost\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:10},model:{value:t.localConfig.full_match_boost,callback:function(e){t.$set(t.localConfig,"full_match_boost",t._n(e))},expression:"localConfig.full_match_boost"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.min_relevancy,name:"question"}}),t._v("min relevancy\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:1},model:{value:t.localConfig.min_relevancy,callback:function(e){t.$set(t.localConfig,"min_relevancy",t._n(e))},expression:"localConfig.min_relevancy"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.max_typos_in_word,name:"question"}}),t._v("max typos in word\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:2},model:{value:t.localConfig.max_typos_in_word,callback:function(e){t.$set(t.localConfig,"max_typos_in_word",t._n(e))},expression:"localConfig.max_typos_in_word"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.max_typo_len,name:"question"}}),t._v("max typo len\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:100},model:{value:t.localConfig.max_typo_len,callback:function(e){t.$set(t.localConfig,"max_typo_len",t._n(e))},expression:"localConfig.max_typo_len"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.max_rebuild_steps,name:"question"}}),t._v("max rebuild steps\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:0,max:500},model:{value:t.localConfig.max_rebuild_steps,callback:function(e){t.$set(t.localConfig,"max_rebuild_steps",t._n(e))},expression:"localConfig.max_rebuild_steps"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"4"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.max_step_size,name:"question"}}),t._v("max step size\n      ")],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"8"}},[s("b-form-input",{attrs:{type:"number",step:.001,min:5,max:1e9},model:{value:t.localConfig.max_step_size,callback:function(e){t.$set(t.localConfig,"max_step_size",t._n(e))},expression:"localConfig.max_step_size"}})],1),t._v(" "),s("b-col",{staticClass:"mt-2",attrs:{cols:"6"}},[s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:t.toggleSynomin}},[t._v("\n          Edit synonyms\n        ")])],1),t._v(" "),s("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"12"}},[s("b-button",{staticClass:"float-right ml-1",attrs:{size:"sm",variant:"primary"},on:{click:t.Close}},[t._v("Cancel")]),t._v(" "),s("b-button",{staticClass:"float-right",attrs:{size:"sm",type:"submit",variant:"success"},on:{click:t.saveChanges}},[t._v("Ok")])],1)],1)],1),t._v(" "),s("v-modal",{attrs:{name:"synonyms",height:"auto",adaptive:!0,reset:!0,scrollable:!0,width:1200},on:{"before-close":t.beforeClose}},[s("SynomynModal",{attrs:{synonyms:t.localConfig.synonyms},on:{synonymsSaved:t.synonymsSaved,isChangedSyn:t.isChangedSyn}})],1),t._v(" "),s("v-modal",{attrs:{name:"ConfirmCloseSynomyms",height:"auto",adaptive:!0,reset:!0,scrollable:!0}},[s("confirm-close",{attrs:{id:"ConfirmDialogSymonym"},on:{toStay:t.toStay,toExit:t.toExit}})],1)],1)},staticRenderFns:[]};var vt=s("VU/8")(ht,ft,!1,function(t){s("7vMj")},"data-v-494e0391",null).exports,_t={name:"IndexModifyWindow",components:{Octicon:f.a,VueTagsInput:ot.a,Editor:nt.a,ConfigModal:vt,ConfirmClose:ct},props:{value:{type:Boolean,default:!0},index:{type:Object,required:!0},isModifying:{type:Boolean,default:!0}},data:function(){var t=this.$props.value,e=this.$props.index;return{tooltips:lt,isShown:t,indexBody:e,originalIndexBody:u()({},e),tag:"",rightJSON:!0,toggleFullTextConfig:!1,configIsChanged:!1}},computed:{isJsonPathsEmpty:function(){var t=this.indexBody.jsonPaths;return 0===m.a.size(t)},isValid:function(){var t=this.indexBody,e=t.name,s=t.fieldType,a=t.indexType,n=t.collateMode,i=t.sortOrderLetters,o=t.config,r=e&&s&&a&&n&&o&&!this.isJsonPathsEmpty&&this.rightJSON;return"custom"===this.indexBody.collateMode?Boolean(r&&i):Boolean(r)},tags:function(){return m.a.map(this.indexBody.jsonPaths,function(t){return{text:t}})||[]}},methods:{onTagAdd:function(t){this.indexBody.jsonPaths=m.a.map(t,function(t){return t.text})},toggleModal:function(){this.toggleFullTextConfig=!this.toggleFullTextConfig,this.$modal.show("config")},onTagBlur:function(t){var e=t.target.value;m.a.isEmpty(e)||(this.tag="",this.indexBody.jsonPaths=[].concat(st()(this.indexBody.jsonPaths),[e]))},onConfirm:function(t){this.isValid&&(this.$emit(t?"onUpdate":"onCreate",this.indexBody),this.$modal.hide("IndexModifyWindow",{confirmExit:!0}))},onWindowHide:function(){this.$emit("onWindowHide")},prettyStringifyObject:function(t){var e={};try{e=JSON.parse(t)}catch(e){return this.rightJSON=!1,t}return this.rightJSON=!0,W()(e,null,"  ")},applyEditorChanges:function(t){this.indexBody.config=t},onConfigChange:function(t){try{this.indexBody.config=W()(t)}catch(t){this.indexBody.config="{}"}},isChanged:function(t){this.configIsChanged=t},toStay:function(){this.$modal.hide("ConfirmCloseIndexModify")},toExit:function(){this.$modal.hide("ConfirmCloseIndexModify"),this.$modal.hide("config",{confirmExit:!0})},beforeClose:function(t){var e=this;if(document.getElementById("synonimsConfig"))t.stop();else{var s=m.a.get(t,"params.confirmExit",!1);if(this.configIsChanged&&!s){if(t.stop(),document.getElementById("ConfirmDialogIndexModify"))return;setTimeout(function(){e.$modal.show("ConfirmCloseIndexModify")},100)}}}},watch:{value:function(t){this.isShown=t},index:function(t){this.indexBody=t,this.originalIndexBody=u()({},this.indexBody)},"indexBody.indexType":function(){"ttl"===this.indexBody.indexType&&(this.indexBody.fieldType="int64")}}},gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"root"},[s("b-container",{attrs:{fluid:""}},[s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-4 mt-2",attrs:{cols:"2"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.name,name:"question"}}),t._v("name\n        ")],1),t._v(" "),s("b-col",[s("b-input",{attrs:{state:Boolean(t.indexBody.name)},model:{value:t.indexBody.name,callback:function(e){t.$set(t.indexBody,"name",e)},expression:"indexBody.name"}})],1)],1),t._v(" "),s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-4 mt-2",attrs:{cols:"2"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.fieldType,name:"question"}}),t._v("field_type\n        ")],1),t._v(" "),s("b-col",[s("b-form-select",{attrs:{disabled:"ttl"===t.indexBody.indexType,state:Boolean(t.indexBody.fieldType),id:"field_type",value:null,options:["int","int64","double","string","bool","composite"]},model:{value:t.indexBody.fieldType,callback:function(e){t.$set(t.indexBody,"fieldType",e)},expression:"indexBody.fieldType"}})],1)],1),t._v(" "),s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-4 mt-2",attrs:{cols:"2"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.indexType,name:"question"}}),t._v("index_type\n        ")],1),t._v(" "),s("b-col",[s("b-form-select",{attrs:{state:Boolean(t.indexBody.indexType),id:"index_type",value:null,options:["hash","tree","text","ttl","-"]},model:{value:t.indexBody.indexType,callback:function(e){t.$set(t.indexBody,"indexType",e)},expression:"indexBody.indexType"}})],1)],1),t._v(" "),s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-4 mt-2",attrs:{cols:"2"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.options,name:"question"}}),t._v("options\n        ")],1),t._v(" "),s("b-col",{staticClass:"text-center"},[s("label",{staticClass:"mt-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.indexBody.isPk,expression:"indexBody.isPk"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.indexBody.isPk)?t._i(t.indexBody.isPk,null)>-1:t.indexBody.isPk},on:{change:function(e){var s=t.indexBody.isPk,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.indexBody,"isPk",s.concat([null])):i>-1&&t.$set(t.indexBody,"isPk",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.indexBody,"isPk",n)}}}),t._v("Pk")]),t._v(" "),s("label",{staticClass:"mt-2 ml-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.indexBody.isArray,expression:"indexBody.isArray"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.indexBody.isArray)?t._i(t.indexBody.isArray,null)>-1:t.indexBody.isArray},on:{change:function(e){var s=t.indexBody.isArray,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.indexBody,"isArray",s.concat([null])):i>-1&&t.$set(t.indexBody,"isArray",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.indexBody,"isArray",n)}}}),t._v("Array")]),t._v(" "),s("label",{staticClass:"mt-2 ml-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.indexBody.isDense,expression:"indexBody.isDense"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.indexBody.isDense)?t._i(t.indexBody.isDense,null)>-1:t.indexBody.isDense},on:{change:function(e){var s=t.indexBody.isDense,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.indexBody,"isDense",s.concat([null])):i>-1&&t.$set(t.indexBody,"isDense",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.indexBody,"isDense",n)}}}),t._v("Dense")]),t._v(" "),s("label",{staticClass:"mt-2 ml-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.indexBody.isSparse,expression:"indexBody.isSparse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.indexBody.isSparse)?t._i(t.indexBody.isSparse,null)>-1:t.indexBody.isSparse},on:{change:function(e){var s=t.indexBody.isSparse,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.indexBody,"isSparse",s.concat([null])):i>-1&&t.$set(t.indexBody,"isSparse",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.indexBody,"isSparse",n)}}}),t._v("Sparse")])])],1),t._v(" "),s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-4 mt-2",attrs:{cols:"2"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.collateMode,name:"question"}}),t._v("collate_mode\n        ")],1),t._v(" "),s("b-col",[s("b-form-select",{attrs:{state:Boolean(t.indexBody.collateMode),value:null,options:["none","ascii","utf8","numeric","custom"]},model:{value:t.indexBody.collateMode,callback:function(e){t.$set(t.indexBody,"collateMode",e)},expression:"indexBody.collateMode"}})],1)],1),t._v(" "),"custom"==t.indexBody.collateMode?s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-5 mt-2",attrs:{cols:"3"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.sortOrderLetters,name:"question"}}),t._v("sort_order_letters\n        ")],1),t._v(" "),s("b-col",[s("b-input",{attrs:{state:Boolean(t.indexBody.sortOrderLetters)},model:{value:t.indexBody.sortOrderLetters,callback:function(e){t.$set(t.indexBody,"sortOrderLetters",e)},expression:"indexBody.sortOrderLetters"}})],1)],1):t._e(),t._v(" "),s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-4 mt-2",attrs:{cols:"2"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.jsonPaths,name:"question"}}),t._v("json_paths\n        ")],1),t._v(" "),s("b-col",[s("vue-tags-input",{class:{tags_selector_default:!0,tags_selector_invalid:t.isJsonPathsEmpty,tags_selector_valid:!t.isJsonPathsEmpty},attrs:{"allow-edit-tags":"",addOnKey:[13,32],saveOnKey:[13,32],tags:t.tags},on:{blur:t.onTagBlur,"tags-changed":t.onTagAdd},scopedSlots:t._u([{key:"tagCenter",fn:function(e){return s("div",{staticClass:"tag-center"},[s("span",{class:{hidden:e.edit},on:{click:function(t){return e.performOpenEdit(e.index)}}},[t._v(t._s(e.tag.text))]),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"props.edit"},{name:"model",rawName:"v-model",value:e.tag.text,expression:"props.tag.text"}],staticClass:"tag-input",attrs:{type:"text"},domProps:{value:e.tag.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.target.blur())},blur:function(t){return e.performSaveEdit(e.index)},input:function(s){s.target.composing||t.$set(e.tag,"text",s.target.value)}}})])}}]),model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}})],1)],1),t._v(" "),s("b-row",{directives:[{name:"show",rawName:"v-show",value:"text"===t.indexBody.indexType,expression:"indexBody.indexType === 'text'"}],staticClass:"mb-1"},[s("b-col",[s("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"success"},on:{click:t.toggleModal}},[t._v("\n            Full text config\n          ")])],1)],1),t._v(" "),s("b-row",{staticClass:"mb-1"},[s("b-col",{staticClass:"col-sm-4 mt-2",attrs:{cols:"2"}},[s("octicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mr-1 icon_tooltip",attrs:{title:t.tooltips.config,name:"question"}}),t._v("config\n        ")],1),t._v(" "),s("b-col",[s("div",{class:{editor_container:!0,editor_wrong_json:!t.rightJSON}},[s("editor",{staticClass:"editor editor_config",attrs:{lang:"json",theme:"chrome",width:"100%",height:"200px",value:t.prettyStringifyObject(t.indexBody.config)},on:{input:function(e){t.applyEditorChanges(e)}}})],1)])],1)],1),t._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{class:{"float-right":!0,disabled:!t.isValid},attrs:{size:"sm",variant:"success"},on:{click:function(e){return e.preventDefault(),t.onConfirm(t.isModifying)}}},[t._v("\n      "+t._s(t.isModifying?"Update":"Create")+"\n    ")])],1),t._v(" "),s("v-modal",{attrs:{name:"config",height:"auto",adaptive:!0,reset:!0,scrollable:!0},on:{"before-close":t.beforeClose}},[s("ConfigModal",{attrs:{config:t.indexBody.config},on:{configSaved:t.onConfigChange,isChanged:t.isChanged}})],1),t._v(" "),s("v-modal",{attrs:{name:"ConfirmCloseIndexModify",height:"auto",adaptive:!0,reset:!0,scrollable:!0}},[s("confirm-close",{attrs:{id:"ConfirmDialogIndexModify"},on:{toStay:t.toStay,toExit:t.toExit}})],1)],1)},staticRenderFns:[]};var bt=s("VU/8")(_t,gt,!1,function(t){s("fhoY")},"data-v-0ca680bf",null).exports,yt=s("pFYg"),Ct=s.n(yt),St=s("c/Tr"),Et=s.n(St),wt=s("KOGR"),xt={name:"DataTable",components:{Octicon:f.a,Editor:nt.a,FlexTable:wt.FlexTable},props:{title:{type:String,default:""},sortable:{type:Boolean,default:!0},items:{type:Array,default:function(){return[]}},itemTemplate:{type:String,default:""},totalItems:{type:Number,default:0},columns:{type:Array,default:function(){return[]}},columnNames:{type:Array,default:function(){return[]}},theads:{type:Array,default:function(){return[]}},noDisplayColumnsButton:{type:Boolean,default:!1},selectedFields:{type:Array,default:function(){return[]}},sortableFields:{type:Array,default:function(){return[]}},isWithActions:{type:Boolean,default:!1},isUpdateAllowed:{type:Boolean,default:!1},isRemoveAllowed:{type:Boolean,default:!1},sortField:{type:String,default:""},sortOrder:{type:String,default:"asc"},onSelectedFieldsChange:{type:Function,default:m.a.noop},onSortChange:{type:Function,default:m.a.noop},onItemDelete:{type:Function,default:m.a.noop},onItemUpdate:{type:Function,default:m.a.noop},doSomthing:{type:Function,default:m.a.noop},notShowDefaultView:{type:Boolean,default:!1}},data:function(){return{tableItems:[],mutableItems:[],tableSelectedFields:[],newItemJson:this.itemTemplate,webroutes:E,loading:!1,height:0,nobreakHeader:"QueriesPerfstatsPage"===this.$router.currentRoute.name||"PerfstatsPage"===this.$router.currentRoute.name}},created:function(){window.onresize=m.a.debounce(this.onResize,300)},destroyed:function(){window.onresize=null},mounted:function(){this.tableItems=m.a.cloneDeep(this.items),this.mutableItems=m.a.cloneDeep(this.items),this.tableSelectedFields=m.a.cloneDeep(this.selectedFields),this.calculateHeight()},updated:function(){var t=this;this.$nextTick(function(){Et()(document.querySelectorAll(".flex-table-head .flex-table-col span:first-child")).forEach(function(e){return e.addEventListener("click",t.handleHeaderClick)})})},computed:u()({},Object(v.d)({columnsWidth:function(t){return t.items.columns}}),{fields:function(){return this.getFields()},itemsSize:function(){return m.a.size(this.items)},tableFieldsSelectedNotEmpty:function(){return!m.a.isEmpty(this.tableSelectedFields)}}),methods:{onResize:function(){this.calculateHeight()},calculateHeight:function(){var t=m.a.get(document.getElementsByClassName("page-content")[0],"offsetHeight",window.offsetHeight)-(m.a.get(document.getElementById("control-top-block"),"offsetHeight",0)+45)-175;"PerfstatsPage"===this.$router.currentRoute.name||"QueriesPage"===this.$router.currentRoute.name||"QueriesPerfstatsPage"===this.$router.currentRoute.name?this.height=null:this.height=t<600?600:t},toggleExpand:function(t){var e=[].concat(st()(this.tableItems));e[t].expandStatus?m.a.unset(e[t],"expandStatus"):e[t].expandStatus=!0,this.tableItems=[].concat(st()(e))},getFields:function(){var t=this;if(m.a.isEmpty(this.items))return[];var e=[];if(this.columns.forEach(function(s,a){if(t.tableSelectedFields.includes(s))switch(s){case"longest_query":e.push({title:t.columnNames[a]||s,key:s,width:100,sortable:t.sortable,type:"slot"});break;case"client":e.push({title:t.columnNames[a]||s,key:s,width:"ActivityPage"===t.$router.currentRoute.name?t.getClientWidth():t.getColumnWidth(s),sortable:t.sortable});break;default:e.push({title:t.columnNames[a]||s,key:s,width:t.getColumnWidth(s),sortable:t.sortable,render:function(e,a){var n=a.row[s];return"object"===Ct()(a.row[s])&&(n=W()(a.row[s])),e("div",{on:{click:function(){return t.doSomthing(a.row.namespace)}}},n)}})}}),this.isWithActions&&e.unshift({type:"expand",width:50,maxWidth:50}),"MemoryStatsPage"===this.$router.currentRoute.name||"PerfstatsPage"===this.$router.currentRoute.name)return e;try{var s=0;if(e.forEach(function(t){t.width>0&&(s+=t.width)}),s<=0)return e;e=e.filter(function(t){return t.width});var a=(document.querySelector("#control-top-block")||document.querySelector(".page-content")).offsetWidth;return s<a&&(e[e.length-1]=u()({},e[e.length-1],{width:a-(s-e[e.length-1].width)-80})),e}catch(t){return e}},getColumnWidth:function(t){var e=this,s=null;return this.columnsWidth.forEach(function(a){a.name===t&&(s=e.nobreakHeader&&"number"==typeof e.items[0][t]?100:(a.width_chars+2)*P.width)}),s},getClientWidth:function(){var t=null,e=null;return this.columnsWidth.forEach(function(s){switch(s.name){case"client":t=(s.width_chars+2)*P.width;break;case"user":e=(s.width_chars+2)*P.width}}),(t+e)/2},onSortCtxChange:function(t){var e=t.key,s=t.order;if("normal"!==s){var a={sortField:e,sortOrder:s};this.onSortChange(a)}},onDelete:function(t){this.onItemDelete(this.items[t])},onUpdate:function(t){this.onItemUpdate(this.mutableItems[t],this.items[t])},onFieldSelect:function(t){if(this.tableSelectedFields.includes(t)){var e=this.tableSelectedFields.indexOf(t);this.tableSelectedFields.splice(e,1)}else this.tableSelectedFields.push(t);this.onSelectedFieldsChange(this.tableSelectedFields)},checkIsFieldSelected:function(t){return this.tableSelectedFields.includes(t)},prettyStringifyObject:function(t){return W()(t,null,"  ")},applyEditorChanges:function(t,e){var s={};try{s=JSON.parse(e)}catch(t){return}this.mutableItems[t]=s},reset:function(){this.tableSelectedFields=m.a.cloneDeep(this.selectedFields)},handleHeaderClick:function(t){t.preventDefault(),t.stopPropagation();var e=t.target.innerText;if(e){var s="asc"===this.sortOrder?"desc":"asc";this.onSortCtxChange({key:e,order:s})}}},watch:{items:function(t){this.tableItems=m.a.cloneDeep(t),this.mutableItems=m.a.cloneDeep(t)},itemTemplate:function(t){this.newItemJson=t},tableSelectedFields:function(){this.tableItems=m.a.cloneDeep(this.tableItems)},selectedFields:function(t){this.tableSelectedFields=t}}},Tt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"datatable-container animated fadeIn delayer"},[s("b-row",[s("b-col",{attrs:{cols:"6"}},[t._t("default")],2),t._v(" "),s("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[s("b-btn",{directives:[{name:"show",rawName:"v-show",value:!t.notShowDefaultView,expression:"!notShowDefaultView"}],staticClass:"mr-4 mb-2",on:{click:t.reset}},[t._v("Default view")]),t._v(" "),t.noDisplayColumnsButton?t._e():s("b-dropdown",{staticClass:"pull-right float-right",attrs:{variant:"primary",text:"Columns"}},t._l(t.columns,function(e,a){return s("a",{key:a,staticClass:"dropdown-item datatable_custom_dropdown_item",attrs:{replace:""},on:{click:function(s){return s.stopPropagation(),t.onFieldSelect(e)}}},[t.checkIsFieldSelected(e)?s("octicon",{attrs:{name:"check"}}):t._e(),t._v(t._s(e)+"\n        ")],1)}),0)],1)],1),t._v(" "),t.tableFieldsSelectedNotEmpty?s("flex-table",{class:{tableAction:t.isWithActions,nobreakHeader:!t.nobreakHeader},attrs:{resizable:"",loading:t.loading,size:"big",columns:t.fields,data:t.tableItems,height:t.height},on:{"on-sort-change":t.onSortCtxChange},scopedSlots:t._u([{key:"controls",fn:function(e){e.row;var a=e.index;return[s("div",{staticClass:"text-center operation"},[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(e){return e.stopPropagation(),t.toggleExpand(a)}}},[s("octicon",{attrs:{name:"pencil"}})],1),t._v(" "),t.isRemoveAllowed?s("b-button",{staticClass:"mr-2",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return e.stopPropagation(),t.onDelete(a)}}},[s("octicon",{attrs:{name:"trashcan"}})],1):t._e()],1)]}},{key:"expand",fn:function(e){e.row;var a=e.index;return[s("b-card",[s("editor",{staticClass:"editor mt-1",attrs:{value:t.prettyStringifyObject(t.mutableItems[a]),lang:"json",theme:"chrome",width:"100%",height:"400px"},on:{input:function(e){t.applyEditorChanges(a,e)}}}),t._v(" "),t.isUpdateAllowed?s("div",{staticClass:"text-center"},[s("b-button",{staticClass:"mt-2",attrs:{variant:"primary",size:"md"},on:{click:function(e){return e.stopPropagation(),t.onUpdate(a)}}},[t._v("Update")]),t._v(" "),s("b-button",{staticClass:"mt-2 ml-2",attrs:{variant:"danger",size:"md"},on:{click:function(e){return e.stopPropagation(),t.onDelete(a)}}},[t._v("Delete")])],1):t._e()],1)]}},{key:"longest_query",fn:function(e){var a=e.row;return e.index,[s("div",{ref:a.longest_query},[s("b-link",{staticClass:"edit_query",attrs:{to:t.webroutes.queries+"?q="+encodeURIComponent(a.longest_query)}},[t._v("edit query")]),t._v(" "),s("b-tooltip",{attrs:{target:function(){return t.$refs[a.longest_query]}}},[t._v(t._s(a.longest_query))])],1)]}}],null,!1,844448125)}):t._e()],1)},staticRenderFns:[]};var It=s("VU/8")(xt,Tt,!1,function(t){s("MIJw")},null,null).exports,kt={name:"IndexesPage",components:{DefaultLayout:O,Octicon:f.a,PageStatusNotifier:tt,IndexModifyWindow:bt,DataTable:It,ConfirmClose:ct},data:function(){var t={name:"",jsonPaths:[],fieldType:"",indexType:"",collateMode:"",sortOrderLetters:"",config:"{}",isPk:!1,isArray:!1,isDense:!1,isAppendable:!1,isSparse:!1};return{newIndexTemplate:u()({},t),index:u()({},t),originIndex:u()({},t),indexModifyWindowIsShown:!1,isIndexModifying:!1}},updated:function(){if(this.namespaceOne.name!==this.namespace&&this.getNamespaceOne({db:this.db,namespace:this.namespace}),this.namespaceOneExists){var t=this.$refs.table.offsetHeight,e=window.innerHeight-140;t>e&&(this.$refs.table_container.style.height=e+"px")}},computed:u()({},Object(v.d)({db:function(t){return t.settings.database},namespace:function(t){return t.settings.namespace||t.namespaces.one.name},namespaceOne:function(t){return t.namespaces.one},isLoading:function(t){return t.namespaces.isLoading}}),Object(v.c)({indexes:"namespaces/indexes",fields:"namespaces/indexFields"}),{namespaceOneExists:function(){return!m.a.isEmpty(this.namespaceOne)},indexesSize:function(){return m.a.size(this.indexes)},selectedFields:function(){return m.a.cloneDeep(this.fields)},indexesWithLabels:function(){return this.indexes.map(function(t){return{name:t.name,fieldType:t.field_type,jsonPaths:m.a.join(t.json_paths,", "),indexType:t.index_type,options:[{label:"danger",value:t.is_pk?"PK":""},{label:"success",value:t.is_dense?"Dense":""},{label:"primary",value:t.is_array?"Array":""},{label:"info",value:t.is_sparse?"Sparse":""},{label:"warning",value:m.a.isEmpty(t.collate_mode)||"none"===t.collate_mode?"":"Collate: "+t.collate_mode},{label:"secondary",value:m.a.isEmpty(t.sort_order_letters)?"":'Sort order letters: "'+t.sort_order_letters+'"'}]}})}}),methods:u()({},Object(v.b)({getNamespaceOne:"namespaces/getNamespaceOne"}),{addNewIndex:function(){this.index=u()({},this.newIndexTemplate,{jsonPaths:[]}),this.isIndexModifying=!1,this.$modal.show("IndexModifyWindow")},onIndexAddClick:function(){this.isIndexModifying=!1,this.indexModifyWindowIsShown=!0},onUpdateIndexClick:function(t){var e=u()({},this.indexes[t]),s=m.a.mapKeys(e,function(t,e){return m.a.camelCase(e)});this.index=u()({},this.newIndexTemplate,s),this.originIndex=u()({},this.index),this.isIndexModifying=!0,this.indexModifyWindowIsShown=!0,this.$modal.show("IndexModifyWindow")},onIndexCreate:function(){var t=this,e=u()({},this.index,{config:JSON.parse(this.index.config)||{}}),s={db:this.db,namespace:this.namespace,index:e};this.$store.dispatch("namespaces/createIndex",s).then(function(){t.indexModifyWindowIsShown=!1})},onIndexUpdate:function(){var t=this,e=u()({},this.index,{config:JSON.parse(this.index.config)||{}}),s={db:this.db,namespace:this.namespace,index:e};this.$store.dispatch("namespaces/updateIndex",s).then(function(){t.indexModifyWindowIsShown=!1})},onIndexDeleteQuestion:function(t){var e=t.name;this.$cmodal.show({header:"Are you sure?",message:"This action will cause a removal of the index:",strongMessage:e,event:"onIndexDelete",eventParams:e})},onModifyIndexWindowHide:function(){this.indexModifyWindowIsShown=!1},onIndexModifyConfirm:function(){this.onCreateIndexClick()},toStay:function(){this.$modal.hide("ConfirmClose")},toExit:function(){this.$modal.hide("ConfirmClose"),this.$modal.hide("IndexModifyWindow",{confirmExit:!0})},beforeClose:function(t){var e=this;if(document.getElementById("configModal"))t.stop();else{var s=W()(this.index),a=W()(this.originIndex),n=m.a.get(t,"params.confirmExit",!1);if(s!==a&&!n){if(t.stop(),document.getElementById("ConfirmClose"))return;setTimeout(function(){e.$modal.show("ConfirmClose")},100)}}}}),watch:{namespaceOne:function(t){m.a.isEqual(this.namespaceOne,t)||(this.index=m.a.copyDeep(this.newIndexTemplate))}}},At={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("v-modal",{attrs:{name:"IndexModifyWindow",height:"auto",adaptive:!0,reset:!0,scrollable:!0},on:{"before-close":t.beforeClose}},[s("IndexModifyWindow",{attrs:{index:t.index,isModifying:t.isIndexModifying},on:{onCreate:t.onIndexCreate,onUpdate:t.onIndexUpdate,onWindowHide:t.onModifyIndexWindowHide},model:{value:t.indexModifyWindowIsShown,callback:function(e){t.indexModifyWindowIsShown=e},expression:"indexModifyWindowIsShown"}})],1),t._v(" "),s("v-modal",{attrs:{name:"ConfirmClose",height:"auto",adaptive:!0,reset:!0,scrollable:!0}},[s("confirm-close",{attrs:{id:"ConfirmClose"},on:{toStay:t.toStay,toExit:t.toExit}})],1),t._v(" "),s("PageStatusNotifier",{attrs:{isLoadingProgress:t.isLoading,currentDatabaseName:t.db,currentNamespaceName:t.namespace}}),t._v(" "),t.namespaceOneExists?s("b-container",{attrs:{fluid:""}},[s("b-btn",{staticClass:"mb-3",attrs:{size:"sm",variant:"success"},on:{click:t.addNewIndex}},[t._v("Add index")]),t._v(" "),s("div",{ref:"table_container",staticClass:"table-responsive"},[s("table",{ref:"table",staticClass:"table table-sm table-bordered table-striped table-indexes"},[s("thead",[s("tr",{staticClass:"d-flex"},[s("th",{staticClass:"col-sm-2"},[t._v("Index")]),t._v(" "),s("th",{staticClass:"col-sm-4"},[t._v("Field Json Path")]),t._v(" "),s("th",{staticClass:"col-sm-1"},[t._v("Field Type")]),t._v(" "),s("th",{staticClass:"col-sm-1"},[t._v("Index Type")]),t._v(" "),s("th",{staticClass:"col-sm-3"},[t._v("Options")]),t._v(" "),s("th",{staticClass:"col-sm-1"},[t._v("Actions")])])]),t._v(" "),s("tbody",t._l(t.indexesWithLabels,function(e,a){return s("tr",{key:a,staticClass:"d-flex"},[s("td",{staticClass:"col-sm-2"},[s("div",{staticClass:"cellContent"},[t._v(t._s(e.name))])]),t._v(" "),s("td",{staticClass:"col-sm-4"},[s("div",{staticClass:"cellContent"},[t._v(t._s(e.jsonPaths))])]),t._v(" "),s("td",{staticClass:"col-sm-1"},[t._v(t._s(e.fieldType))]),t._v(" "),s("td",{staticClass:"col-sm-1"},[t._v(t._s(e.indexType))]),t._v(" "),s("td",{staticClass:"col-sm-3"},[s("div",{staticClass:"cellContent"},t._l(e.options,function(e,a){return s("b-badge",{key:a,staticClass:"mr-3",attrs:{pill:"",variant:e.label}},[t._v(t._s(e.value))])}),1)]),t._v(" "),s("td",{staticClass:"col-sm-1"},[s("b-button",{staticClass:"mr-1",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return e.preventDefault(),t.onUpdateIndexClick(a)}}},[s("octicon",{attrs:{name:"pencil"}})],1),t._v(" "),s("b-button",{staticClass:"mr-1",attrs:{variant:"danger",size:"sm"},on:{click:function(s){s.preventDefault(),t.onIndexDeleteQuestion({name:e.name})}}},[s("octicon",{attrs:{name:"trashcan"}})],1)],1)])}),0)])])],1):t._e()],1)])},staticRenderFns:[]};var Nt=s("VU/8")(kt,At,!1,function(t){s("/0vm")},"data-v-aa186396",null).exports,Ft=s("bOdI"),zt=s.n(Ft),Mt=s("0/ic"),Lt=s.n(Mt),Dt=s("saTp"),Pt=s.n(Dt),Rt=[10,25,50],jt={db:"",namespace:"",q:"",filter:"",page:1,pageSize:Rt[0],sortField:"",sortOrder:"asc",viewType:"list",offset:0,limit:Rt[0]},Ot={name:"List",components:{Octicon:f.a,Scrolly:A.a,ScrollyViewport:A.c,ScrollyBar:A.b},props:{visible:{type:Boolean,default:!0},canClear:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!0},items:{type:Array,default:[]},onItemUpdateQuestion:{type:Function,require:!0},onItemDeleteQuestion:{type:Function,require:!0},jsonRootName:{type:Function,require:!0}},data:function(){return{editable:[],editableItems:[],height:"0px",scrollOpt:{suppressScrollX:!0},ops:{bar:{background:"#ccc"},scrollPanel:{scrollingX:!1}}}},created:function(){window.onresize=m.a.debounce(this.onResize,300)},destroyed:function(){window.onresize=null},mounted:function(){this.calculateHeight()},methods:{onResize:function(){this.calculateHeight()},calculateHeight:function(){var t=m.a.get(document.getElementsByClassName("page-content")[0],"offsetHeight",window.offsetHeight)-m.a.get(document.getElementById("control-top-block"),"offsetHeight",0)-220;t<500&&(t=500),this.height=t+"px"},copyToClipboard:function(t){var e="";try{e=W()(t,null,2)}catch(t){return}var s=document.createElement("textarea");s.value=e,s.setAttribute("readonly",""),s.style={position:"absolute",left:"-9999px"},document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)},onChangeData:function(t,e){this.$set(this.editableItems,t,e)},editToggle:function(t){var e=this.editable.map(function(e,s){return s===t&&!e});this.$set(this,"editable",e),this.editableItems=this.items.map(this.replaceLength)},updateItem:function(t){this.onItemUpdateQuestion(this.revertLength(this.editableItems[t]),this.items[t]),this.editToggle(t)},replaceLength:function(t){try{return JSON.parse(W()(t).replace(/length/g,"Length"))}catch(e){return t}},revertLength:function(t){try{return JSON.parse(W()(t).replace(/Length/g,"length"))}catch(e){return t}}},watch:{items:function(){this.editable=m.a.fill(Array(this.items.length),!1),this.editableItems=this.items.map(this.replaceLength)}}},qt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.visible?s("b-container",{staticClass:"animated fadeIn delayer",attrs:{fluid:""}},[s("vue-scroll",{attrs:{ops:t.ops}},[s("div",{staticClass:"scroll-container",style:{height:t.height}},t._l(t.editableItems,function(e,a){return s("b-row",{key:a},[s("b-col",[s("b-card",[s("b-btn",{staticClass:"btn-copy",on:{click:function(s){return t.copyToClipboard(e)}}},[s("octicon",{attrs:{name:"clippy",scale:"1"}})],1),t._v(" "),s("tree-view",{attrs:{data:e,options:{modifiable:t.editable[a],maxDepth:1,rootObjectKey:t.jsonRootName(e)}},on:{"change-data":function(e){return t.onChangeData(a,e)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.editable[a],expression:"editable[index]"}]},[s("div",{staticClass:"text-left"},[s("b-btn",{staticClass:"btn mt-2 btn-primary btn-md",attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.updateItem(a)}}},[t._v("Update")])],1)]),t._v(" "),s("div",{staticClass:"control_block"},[t.canEdit?s("b-btn",{on:{click:function(e){return t.editToggle(a)}}},[s("svg",{staticClass:"octicon",attrs:{version:"1.1",role:"presentation",width:"14",height:"16",viewBox:"0 0 12 16"}},[s("path",{attrs:{d:"M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"}})])]):t._e(),t._v(" "),t.canEdit?s("b-btn",{attrs:{variant:"danger"},on:{click:function(){return t.onItemDeleteQuestion(e)}}},[s("svg",{staticClass:"octicon",attrs:{version:"1.1",role:"presentation",width:"12",height:"16",viewBox:"0 0 12 16"}},[s("path",{attrs:{d:"M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"}})])]):t._e()],1)],1)],1)],1)}),1)])],1):t._e()},staticRenderFns:[]};var Bt=s("VU/8")(Ot,qt,!1,function(t){s("SyuR")},"data-v-bfbb9b72",null).exports,Ut={added:"green",removed:"red",modified:"blue"},$t={indent:" ",newLine:"\n",color:!0,wrap:function(t,e){return Pt.a[Ut[t]](e)}},Qt={name:"ItemsPage",components:{DefaultLayout:O,Modal:S,PageStatusNotifier:tt,DataTable:It,Octicon:f.a,Editor:nt.a,List:Bt,ConfirmClose:ct},props:{db:{type:String,default:jt.db},namespace:{type:String,default:jt.namespace},page:{type:Number,default:jt.page},pageSize:{type:Number,default:jt.pageSize},sortField:{type:String,default:jt.sortField},sortOrder:{type:String,default:jt.sortOrder},filter:{type:String,default:jt.filter},viewType:{type:String,default:jt.viewType}},data:function(){var t=this.$props;return{params:u()({},t),jsonEditor:"",clHeight:500,precepts:"",showPercepts:!1,newItem:"",isChanged:!1}},computed:u()({},Object(v.d)({view:function(t){return t.settings.view},dbUsed:function(t){return t.settings.database},namespaceUsed:function(t){return t.settings.namespace},columnsSelected:function(t){return t.settings.namespacesSelectedFields},items:function(t){return t.items.list},totalItems:function(t){return t.items.total},isLoading:function(t){return t.items.isLoading}}),{keymap:function(){var t=this;return{f:function(e){var s=document.activeElement;m.a.isUndefined(s.selectionStart)&&(e.preventDefault(),t.$refs.find&&t.$refs.find.focus())},"shift+right":function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&t.totalItems>t.params.page*t.params.pageSize&&t.onPageChange(t.params.page+1)},"shift+left":function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&t.params.page>1&&t.onPageChange(t.params.page-1)}}}},Object(v.c)({indexesFields:"namespaces/indexesNames",sortableFields:"namespaces/sortableFields",itemTemplate:"namespaces/itemTemplate",columns:"items/fields",itemsSize:"items/itemsSize",itemsJson:"items/itemsJson"}),{selectedDb:function(){return this.db||this.dbUsed},selectedNs:function(){return this.namespace||this.namespaceUsed},columnsFromSettings:function(){var t=m.a.get(this.columnsSelected,this.db,null);return t?m.a.get(t,this.namespace,this.indexesFields):this.indexesFields},isLocked:function(){return!this.totalItems},paginationInfo:function(){var t=this.totalItems||this.itemsSize;if(!t)return"No items found";var e=this.params.page*this.params.pageSize,s=t<e?t:e;return"showing items from "+(this.params.page-1)*this.params.pageSize+" to "+s+" of "+t},pageSizeVariants:function(){return Rt},ButtonPerceptsText:function(){return this.showPercepts?"Hide percepts":"Add percepts"}}),methods:u()({},Object(v.b)({selectDatabase:"settings/selectDatabase",selectNamespace:"settings/selectNamespace",getItemsList:"items/getItemsList",getNamespaceOne:"namespaces/getNamespaceOne"}),{toggleShowPercepts:function(){m.a.isEmpty(this.precepts)&&(this.showPercepts=!this.showPercepts,this.showPercepts?this.clHeight=334:this.clHeight=500)},editorInit:function(){this.newItem=this.itemTemplate},beforeClose:function(t){!m.a.get(t,"params.confirmExit",!1)&&this.isChanged&&(t.stop(),this.$modal.show("ConfirmClose"))},jsonRootName:function(t){return this.indexesFields[0]?m.a.isEmpty(t)?this.namespace+"_"+this.indexesFields[0]:m.a.isEmpty(this.indexesFields.id)?this.namespace+"_"+this.indexesFields[0]+"_"+t[this.indexesFields[0]]:this.namespace+"_"+this.indexesFields.id+"_"+t[this.indexesFields.id]:""+this.namespace},onSelectedFieldsChange:function(t){this.$store.dispatch("settings/setSelectedFieldsForNamespace",{db:this.db,namespace:this.namespace,fields:t})},onQuery:function(){var t=this;this.params.db=this.selectedDb,this.params.namespace=this.selectedNs;var e=m.a.pickBy(this.params),s={db:this.selectedDb,namespace:this.selectedNs,params:u()({},e,{width:window.innerWidth/P.width,with_columns:1})},a=m.a.mapKeys(e,function(t,e){return m.a.snakeCase(e)});this.getItemsList(s).then(function(){t.$router.push({path:t.$router.path,query:a})})},onItemDeleteQuestion:function(t){var e=m.a.pickBy(this.params),s={item:t,params:u()({},e,{width:window.innerWidth/P.width,with_columns:1})};this.$cmodal.show({header:"Are you sure?",message:"This action will cause a removal of the item:",strongMessage:m.a.truncate(W()(t,null,2),{length:500,separator:" "}),event:"onItemDelete",eventParams:s})},onItemCreateQuestion:function(t){var e=this,s=m.a.pickBy(this.params),a={item:t,precepts:this.precepts,params:u()({},s,{width:window.innerWidth/P.width,with_columns:1})};this.$cmodal.show({header:"Are you sure?",message:"This action will create a new item:",strongMessage:m.a.truncate(W()(t,null,2),{length:500,separator:" "}),event:"onItemCreate",eventParams:a,callback:function(){return setTimeout(e.onQuery,100)}})},onItemUpdateQuestion:function(t,e){var s=Lt()(e,t,$t),a=m.a.pickBy(this.params),n={item:t,params:u()({},a,{width:window.innerWidth/P.width,with_columns:1})};this.$cmodal.show({header:"Are you sure?",message:"This action will change the existed item:",strongMessage:m.a.truncate(s.text,{length:500,separator:" "}),event:"onItemUpdate",eventParams:n})},onViewTypeChange:function(t){this.params.viewType=t},onPageSizeChange:function(t){this.params.pageSize=t,this.params.page=1,this.onQuery()},onSortChange:function(t){var e=t.sortField,s=t.sortOrder;this.params.sortField=e,this.params.sortOrder=s,this.onQuery()},onEditorSave:function(){try{var t=JSON.parse(this.newItem);this.$modal.hide("createModal",{confirmExit:!0}),this.onItemCreateQuestion(t)}catch(t){m.a.noop()}},onCancelCreate:function(){this.$modal.hide("createModal")},toStay:function(){this.$modal.hide("ConfirmClose")},toExit:function(){this.$modal.hide("ConfirmClose"),this.$modal.hide("createModal",{confirmExit:!0})},openCreateModal:function(){this.$modal.show("createModal")},onFindClick:function(){this.onQuery();var t=JSON.parse(localStorage.getItem("itemsFilters"))||{};localStorage.setItem("itemsFilters",W()(u()({},t,zt()({},this.selectedNs,this.params.filter))))},resetFilter:function(){var t=this;this.$nextTick(function(){var e=JSON.parse(localStorage.getItem("itemsFilters"))||{};localStorage.setItem("itemsFilters",W()(u()(zt()({},t.selectedNs,t.params.filter),e))),t.params.filter=e[t.selectedNs]})}}),mounted:function(){this.selectDatabase(this.selectedDb),this.selectedDb&&this.selectedNs&&(this.getNamespaceOne({db:this.selectedDb,namespace:this.selectedNs}),this.onQuery()),this.$eventHub.on("namespaceChanged",this.resetFilter),this.$watchAll(["params.page"],this.onQuery)},watch:{newItem:function(t){this.isChanged=t!==this.itemTemplate}}},Xt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.keymap,expression:"keymap"}],attrs:{slot:"page"},slot:"page"},[s("PageStatusNotifier",{attrs:{isLoadingProgress:t.isLoading,currentDatabaseName:t.selectedDb,currentNamespaceName:t.selectedNs}}),t._v(" "),t.selectedDb&&t.selectedNs?s("b-container",{staticClass:"mb-4",attrs:{fluid:"",id:"control-top-block"}},[s("b-row",[s("b-col",[s("b-input-group",{attrs:{size:"sm"}},[s("b-input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"find",attrs:{placeholder:"Input filter expression: e.g name='name' and year > 2000",size:"sm"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onFindClick(e)}},model:{value:t.params.filter,callback:function(e){t.$set(t.params,"filter",e)},expression:"params.filter"}}),t._v(" "),s("b-button",{staticClass:"ml-2",attrs:{variant:"success",size:"sm"},on:{click:t.onFindClick}},[t._v("Find")]),t._v(" "),s("b-button",{staticClass:"ml-2",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return e.preventDefault(),t.openCreateModal(e)}}},[t._v("Add new item")])],1)],1)],1),t._v(" "),s("b-row",{staticClass:"mt-4"},[s("b-col",{directives:[{name:"show",rawName:"v-show",value:t.items.length>0,expression:"items.length > 0"}]},[s("b-button-group",{attrs:{size:"sm"}},[s("b-button",{attrs:{variant:"outline-primary",pressed:"list"===t.params.viewType},on:{click:function(e){return t.onViewTypeChange("list")}}},[t._v("List")]),t._v(" "),s("b-button",{attrs:{variant:"outline-primary",pressed:"table"===t.params.viewType},on:{click:function(e){return t.onViewTypeChange("table")}}},[t._v("Table")])],1)],1),t._v(" "),s("b-col",{attrs:{cols:"6",offset:t.items.length>0?0:3}},[s("center",[s("strong",[t._v(t._s(t.paginationInfo))])])],1),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:t.items.length>0,expression:"items.length > 0"}]},[s("b-pagination",{staticClass:"float-right ml-2",attrs:{size:"sm","hide-ellipsis":"","hide-goto-end-buttons":"",limit:null,"total-rows":t.totalItems,"per-page":t.params.pageSize},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}}),t._v(" "),s("b-dropdown",{staticClass:"float-right",attrs:{size:"sm",variant:"primary",text:String(t.params.pageSize)}},t._l(t.pageSizeVariants,function(e){return s("b-dropdown-item",{key:e,on:{click:function(s){return t.onPageSizeChange(e)}}},[t._v(t._s(e)+"\n              ")])}),1)],1)],1)],1):t._e(),t._v(" "),s("List",{attrs:{visible:!("list"!==t.params.viewType||!t.itemsSize),items:t.items,jsonRootName:t.jsonRootName,onItemUpdateQuestion:t.onItemUpdateQuestion,onItemDeleteQuestion:t.onItemDeleteQuestion,canClear:""}}),t._v(" "),"table"===t.params.viewType?s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",[t.selectedNs?s("data-table",{staticClass:"mt-1",attrs:{isWithActions:"",isUpdateAllowed:"",isRemoveAllowed:"",isCreateAllowed:"",title:t.selectedNs,items:t.items,itemTemplate:t.itemTemplate,columns:t.columns,selectedFields:t.columnsFromSettings,sortableFields:t.sortableFields,sortField:t.params.sortField,sortOrder:t.params.sortOrder,onSelectedFieldsChange:t.onSelectedFieldsChange,onSortChange:t.onSortChange,onItemDelete:t.onItemDeleteQuestion,onItemUpdate:t.onItemUpdateQuestion}}):t._e()],1)],1)],1):t._e(),t._v(" "),s("v-modal",{attrs:{name:"createModal",height:"auto",minWidth:800,adaptive:!0,reset:!0,scrollable:!0},on:{"before-close":t.beforeClose}},[s("b-row",[s("b-col",[s("b-card",{staticClass:"no-border",attrs:{title:"Body"}},[s("div",{style:{overflow:"scroll",height:t.clHeight+"px"}},[s("editor",{ref:"editor",staticClass:"editor",attrs:{lang:"json",theme:"chrome",width:"100%",height:500},on:{init:t.editorInit},model:{value:t.newItem,callback:function(e){t.newItem=e},expression:"newItem"}})],1)]),t._v(" "),t.showPercepts?s("b-card",{staticClass:"no-border",attrs:{title:"Precepts"}},[s("b-form-textarea",{ref:"precepts",attrs:{rows:"3","max-rows":"6",placeholder:"Enter precepts... Input one precept per line, e.g: 'id=serial()'"},model:{value:t.precepts,callback:function(e){t.precepts=e},expression:"precepts"}})],1):t._e(),t._v(" "),t.precepts?t._e():s("b-card",{staticClass:"no-border"},[s("b-button",{on:{click:t.toggleShowPercepts}},[t._v(t._s(t.ButtonPerceptsText))])],1),t._v(" "),s("center",[s("b-btn",{staticClass:"mt-3 mb-3",attrs:{variant:"success",size:"md"},on:{click:t.onEditorSave}},[t._v("Save")]),t._v(" "),s("b-btn",{staticClass:"mt-3 mb-3",attrs:{variant:"danger",size:"md"},on:{click:t.onCancelCreate}},[t._v("Cancel")])],1)],1)],1)],1),t._v(" "),s("v-modal",{attrs:{name:"ConfirmClose",height:"auto",adaptive:!0,reset:!0,scrollable:!0}},[s("confirm-close",{attrs:{id:"ConfirmClose"},on:{toStay:t.toStay,toExit:t.toExit}})],1)],1)])},staticRenderFns:[]};var Gt=s("VU/8")(Qt,Xt,!1,function(t){s("8jVg")},"data-v-84893ea2",null).exports,Ht=s("//Fk"),Vt=s.n(Ht),Wt=s("8U58"),Jt=s.n(Wt),Yt=s("OBQT"),Kt=s.n(Yt),Zt=s("vMAF"),te=s.n(Zt),ee=te()({SET:null,EQ:null,EMPTY:null,LT:null,LE:null,GT:null,GE:null,RANGE:null}),se=te()({MAX:null,MIN:null,AVG:null,SUM:null,FACET:null}),ae=te()({AND:null,NOT:null,OR:null}),ne={name:"QueryBuilder",components:{VueTagsInput:ot.a,Editor:nt.a,Octicon:f.a},data:function(){return{autoCompleteStyle:{inputWrapper:"autocomplite",vueSimpleSuggest:"position-relative",defaultInput:"autocomplite_input",suggestions:"position-absolute list-group z-1000",suggestItem:"suggest"},tag:"",tag_sort:[],tag_filters:[],query:{req_total:"enabled",filters:[],sort:[],explain:!1,select_filter:[],select_functions:[],strict_mode:"names"},fieldsSort:[{key:"field",label:"Field"},{key:"desc",label:"Desc"},{key:"value",label:"Forced sort values"},{key:"remove",label:""}],fieldsFilters:[{key:"op",label:"Operator"},{key:"field",label:"Field"},{key:"cond",label:"Condition"},{key:"value",label:"Value"},{key:"remove",label:""}],selectFunctionColumn:[{key:"func",label:"Function"},{key:"field",label:"Field"},{key:"remove",label:"&#9760;"}],conditions:ee,options:ae,selectFunc:se,filteredOptions:[]}},props:{page:{type:Number,default:jt.page},pageSize:{type:Number,default:jt.pageSize},tabIndex:{type:Number,default:0}},computed:u()({},Object(v.d)({namespaces:function(t){return t.namespaces.list},database:function(t){return t.settings.database},indexes:function(t){return t.namespaces.indexes},namespace:function(t){return t.settings.namespace}}),{indexesNotArray:function(){return this.indexes.filter(function(t){return!t.is_array})},namesOfIndexes:function(){return this.indexes.map(function(t){return t.name})},indexesNames:function(){var t=this.tag.split("");return this.indexes.map(function(t){return t.name.split("")}).filter(function(e){return m.a.intersection(t,e).length}).map(function(t){return{text:t.join("")}})},parseSelectFunctions:function(){var t=this;return this.query.select_functions.map(function(e){return t.splitSelectFunc(e)})}}),beforeUpdate:function(){this.filteredOptions=this.namesOfIndexes.sort()},methods:u()({},Object(v.b)({getItemsListByQuery:"items/getItemsListByPost",getIndexesFromNamespace:"namespaces/getIndexesFromNamespace",selectNamespace:"settings/selectNamespace"}),{initEditor:function(t){this.editor=t,this.editor.textInput.getElement().disabled=!0},filterPlaceholder:function(t){switch(t){case"SET":return"Add multiple values";case"RANGE":return"Add min and max values";default:return"Add value"}},updateFilteredOptions:function(){this.filteredOptions=this.namesOfIndexes.sort()},splitSelectFunc:function(t){var e=t.substring(0,t.length-1).split(/\(/g);return{func:e[0],field:e[1]}},onSubmit:function(){this.$emit("makeRequest");var t={db:this.database,params:u()({},this.query,{namespace:this.namespace,limit:this.pageSize,offset:this.pageSize*(this.page-1)}),query:{width:window.innerWidth/P.width,with_columns:1}};this.getItemsListByQuery(t)},getIndexes:function(){var t={db:this.database,namespace:this.namespace};this.getIndexesFromNamespace(t)},addSort:function(t){this.query.sort=m.a.unionBy([].concat(st()(this.query.sort),[{field:t,desc:!0}]),"field")},removeSort:function(t){var e=t.field;this.query.sort=this.query.sort.filter(function(t){return t.field!==e})},addFilter:function(){this.query.filters.push({cond:ee.SET})},removeFilter:function(t){this.query.filters.splice(t,1)},setFilter:function(t){var e=t.index,s=t.field,a=t.value,n=this.query.filters;n[e][s]=a,this.query=u()({},this.query,{filters:n})},resetQueryFilters:function(){this.query.filters=[]},resetQuerySort:function(){this.query.sort=[]},onTagAddSort:function(t,e,s){if(m.a.isEmpty(t))m.a.unset(this.query,s+"."+e+".values");else{var a=t.map(function(t){return t.text})||[];m.a.set(this.query,s+"."+e+".values",a),this.$forceUpdate()}},onTagAddFilter:function(t,e,s){if(m.a.isEmpty(t))m.a.unset(this.query,s+"."+e+".value");else{var a=t.map(function(t){return t.text})||[];m.a.set(this.query,s+"."+e+".value",a),this.$forceUpdate()}},selectFilterChange:function(t){this.query.select_filter=t.map(function(t){return t.text})},addSelectFuntion:function(){this.query.select_functions.push(this.selectFunc.MIN+"("+this.indexes[0].name+")")},selectFunction:function(t,e,s){var a=this.splitSelectFunc(this.query.select_functions[e]);a[s]=t,m.a.set(this.query,"select_functions["+e+"]",this.concatSelectFunc(a))},concatSelectFunc:function(t){return t.func+"("+t.field+")"},removeFunction:function(t){this.query.select_functions.splice(t,1)},applyEditorChanges:function(t){var e={};try{e=JSON.parse(t)}catch(t){return}this.query=e},showJSON:function(){this.$modal.show("json")}}),mounted:function(){this.$eventHub.on("itemsChanged",this.onSubmit)},watch:{namespace:function(){this.getIndexes(),this.resetQueryFilters(),this.resetQuerySort()},page:function(){1===this.tabIndex&&this.onSubmit()},pageSize:function(){1===this.tabIndex&&this.onSubmit()}}},ie={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("b-card",[s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"float-left"},[s("b-form-select",{staticClass:"mb-3",attrs:{value:t.namespace,md:"3"},on:{input:t.selectNamespace}},[s("option",{attrs:{value:""}},[t._v("Please select a namespace")]),t._v(" "),t._l(t.namespaces,function(e){return s("option",{domProps:{value:e.name}},[t._v(t._s(e.name))])})],2)],1)]),t._v(" "),s("b-col",{attrs:{cols:"12"}},[s("label",{staticClass:"form-check-label ml-1 mb-2",attrs:{for:"explain"}},[t._v("Explain")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.query.explain,expression:"query.explain"}],staticClass:"form-check-input ml-3",attrs:{id:"explain",type:"checkbox"},domProps:{checked:Array.isArray(t.query.explain)?t._i(t.query.explain,null)>-1:t.query.explain},on:{change:function(e){var s=t.query.explain,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.query,"explain",s.concat([null])):i>-1&&t.$set(t.query,"explain",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.query,"explain",n)}}})]),t._v(" "),s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"ml-1 form-check float-left"},[s("label",{staticClass:"mt-2 form-check-label",attrs:{for:"strict_mode"}},[t._v("Strict mode")]),t._v(" "),s("b-form-select",{staticClass:"strictModeSelect",attrs:{id:"strict_mode",options:["none","names","indexes"],size:"md"},model:{value:t.query.strict_mode,callback:function(e){t.$set(t.query,"strict_mode",e)},expression:"query.strict_mode"}})],1)])],1),t._v(" "),t.namespace?s("b-tabs",{attrs:{card:""}},[s("b-tab",{attrs:{title:"Sort",active:""}},[s("b-row",[s("b-col",{attrs:{cols:"12"}},[t.query.sort.length?s("b-table",{attrs:{striped:"",hover:"",items:t.query.sort,fields:t.fieldsSort},scopedSlots:t._u([{key:"desc",fn:function(e){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.item.desc,expression:"sort.item.desc"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.item.desc)?t._i(e.item.desc,null)>-1:e.item.desc},on:{change:function(s){var a=e.item.desc,n=s.target,i=!!n.checked;if(Array.isArray(a)){var o=t._i(a,null);n.checked?o<0&&t.$set(e.item,"desc",a.concat([null])):o>-1&&t.$set(e.item,"desc",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(e.item,"desc",i)}}})]}},{key:"value",fn:function(e){return[s("vue-tags-input",{attrs:{"allow-edit-tags":"",addOnKey:[13,32],saveOnKey:[13,32],placeholder:"Add values, to be placed to the begining of results"},on:{"tags-changed":function(s){return t.onTagAddSort(s,e.index,"sort")}},scopedSlots:t._u([{key:"tagCenter",fn:function(e){return s("div",{staticClass:"tag-center"},[s("span",{class:{hidden:e.edit},on:{click:function(t){return e.performOpenEdit(e.index)}}},[t._v(t._s(e.tag.text))]),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"props.edit"},{name:"model",rawName:"v-model",value:e.tag.text,expression:"props.tag.text"}],staticClass:"tag-input",attrs:{type:"text"},domProps:{value:e.tag.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.target.blur())},blur:function(t){return e.performSaveEdit(e.index)},input:function(s){s.target.composing||t.$set(e.tag,"text",s.target.value)}}})])}}],null,!0),model:{value:t.tag_sort[e.index],callback:function(s){t.$set(t.tag_sort,e.index,s)},expression:"tag_sort[sort.index]"}})]}},{key:"remove",fn:function(e){return[s("b-button",{staticClass:"button float-right",attrs:{variant:"danger"},on:{click:function(s){return t.removeSort(e.item)}}},[s("octicon",{attrs:{name:"trashcan",scale:"1"}})],1)]}}],null,!1,539801756)}):t._e(),t._v(" "),s("label",[t._v("Add new sort  \n              "),s("b-form-select",{staticClass:"mb-3 select-sort",attrs:{md:"6"},on:{change:t.addSort}},t._l(t.indexesNotArray,function(e){return s("option",{domProps:{value:e.name}},[t._v(t._s(e.name))])}),0)],1)],1)],1)],1),t._v(" "),s("b-tab",{attrs:{title:"Filters"}},[s("b-row",[s("b-col",{attrs:{cols:"12"}},[t.query.filters.length?s("b-table",{attrs:{striped:"",hover:"",items:t.query.filters,fields:t.fieldsFilters},scopedSlots:t._u([{key:"field",fn:function(e){return[s("vue-simple-suggest",{attrs:{styles:t.autoCompleteStyle,list:t.filteredOptions,"min-length":0,"filter-by-query":!1},on:{select:function(s){return t.setFilter({index:e.index,field:"field",value:s})}},model:{value:e.item.field,callback:function(s){t.$set(e.item,"field",s)},expression:"filter.item.field"}})]}},{key:"cond",fn:function(e){return[s("b-form-select",{attrs:{value:{index:e.index,field:"cond",value:e.item.cond}},on:{change:t.setFilter}},t._l(t.conditions,function(a){return s("option",{domProps:{value:{index:e.index,field:"cond",value:a}}},[t._v(t._s(a))])}),0)]}},{key:"op",fn:function(e){return[s("b-form-select",{attrs:{value:{index:e.index,field:"op",value:e.item.op}},on:{change:t.setFilter}},t._l(t.options,function(a){return s("option",{domProps:{value:{index:e.index,field:"op",value:a}}},[t._v(t._s(a))])}),0)]}},{key:"value",fn:function(e){return[s("vue-tags-input",{attrs:{"allow-edit-tags":"",addOnKey:[13,32],saveOnKey:[13,32],disabled:"EMPTY"===e.item.cond,placeholder:t.filterPlaceholder(e.item.cond)},on:{"tags-changed":function(s){return t.onTagAddFilter(s,e.index,"filters")}},scopedSlots:t._u([{key:"tagCenter",fn:function(e){return s("div",{staticClass:"tag-center"},[s("span",{class:{hidden:e.edit},on:{click:function(t){return e.performOpenEdit(e.index)}}},[t._v(t._s(e.tag.text))]),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"props.edit"},{name:"model",rawName:"v-model",value:e.tag.text,expression:"props.tag.text"}],staticClass:"tag-input",attrs:{type:"text"},domProps:{value:e.tag.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.target.blur())},blur:function(t){return e.performSaveEdit(e.index)},input:function(s){s.target.composing||t.$set(e.tag,"text",s.target.value)}}})])}}],null,!0),model:{value:t.tag_filters[e.index],callback:function(s){t.$set(t.tag_filters,e.index,s)},expression:"tag_filters[filter.index]"}})]}},{key:"remove",fn:function(e){return[s("b-button",{staticClass:"button float-right",attrs:{variant:"danger"},on:{click:function(s){return t.removeFilter(e.index)}}},[s("octicon",{attrs:{name:"trashcan",scale:"1"}})],1)]}}],null,!1,2130401359)}):t._e(),t._v(" "),s("b-btn",{staticClass:"mt-3 mb-3 button",attrs:{variant:"primary"},on:{click:t.addFilter}},[t._v("Add new filter")])],1)],1)],1),t._v(" "),s("b-tab",{attrs:{title:"Fields filter"}},[s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("vue-tags-input",{attrs:{placeholder:"Add multiple fields, or keep empty to output all fields",addOnKey:[13,32],saveOnKey:[13,32],"allow-edit-tags":"","autocomplete-items":t.indexesNames},on:{"tags-changed":t.selectFilterChange},scopedSlots:t._u([{key:"tagCenter",fn:function(e){return s("div",{staticClass:"tag-center"},[s("span",{class:{hidden:e.edit},on:{click:function(t){return e.performOpenEdit(e.index)}}},[t._v(t._s(e.tag.text))]),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"props.edit"},{name:"model",rawName:"v-model",value:e.tag.text,expression:"props.tag.text"}],staticClass:"tag-input",attrs:{type:"text"},domProps:{value:e.tag.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.target.blur())},blur:function(t){return e.performSaveEdit(e.index)},input:function(s){s.target.composing||t.$set(e.tag,"text",s.target.value)}}})])}}],null,!1,2215797584),model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}})],1)],1)],1),t._v(" "),t._e()],1):t._e(),t._v(" "),s("b-row",[s("b-col",{staticClass:"text-right",attrs:{cols:"12"}},[s("b-button",{staticClass:"mr-2",on:{click:t.showJSON}},[t._v("JSON view")]),t._v(" "),s("b-button",{staticClass:"button",attrs:{type:"submit",variant:"success"}},[t._v("Execute")])],1)],1)],1),t._v(" "),s("v-modal",{attrs:{name:"json",adaptive:!0,scrollable:!0,minWidth:500,minHeight:700}},[s("b-card",{attrs:{title:"JSON preview"}},[s("editor",{staticClass:"editor editor_config",attrs:{lang:"json",theme:"chrome",width:"100%",height:"600px",value:JSON.stringify(t.query,null,"  ")},on:{init:t.initEditor}})],1)],1)],1)},staticRenderFns:[]};var oe=s("VU/8")(ne,ie,!1,function(t){s("XP3n"),s("vqpw")},"data-v-969b29a0",null).exports,re={name:"Explain",components:{DataTable:It},data:function(){return{columns:["field","method","keys","cost","matched","comparators"]}},computed:u()({},Object(v.d)({explain:function(t){return t.items.explain}}),{selectedFields:function(){return m.a.cloneDeep(this.columns)}})},ce={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",[s("b-col",[t.explain?s("b-card",{attrs:{title:"Explain"}},[s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("th",[t._v("indexes")]),t._v(" "),s("td",[s("strong",[t._v(t._s(t.explain.indexes_us))]),t._v(" us")]),t._v(" "),s("td",[t._v("Indexes keys select time")])]),t._v(" "),s("tr",[s("th",[t._v("loop")]),t._v(" "),s("td",[s("strong",[t._v(t._s(t.explain.loop_us))]),t._v(" us")]),t._v(" "),s("td",[t._v("Intersection loop time")])]),t._v(" "),s("tr",[s("th",[t._v("postprocess")]),t._v(" "),s("td",[s("strong",[t._v(t._s(t.explain.postprocess_us))]),t._v(" us")]),t._v(" "),s("td",[t._v("Query post process time")])]),t._v(" "),s("tr",[s("th",[t._v("prepare")]),t._v(" "),s("td",[s("strong",[t._v(t._s(t.explain.prepare_us))]),t._v(" us")]),t._v(" "),s("td",[t._v("Query prepare and optimize time")])]),t._v(" "),s("tr",[s("th",[t._v("sort_index")]),t._v(" "),s("td",[s("strong",[t._v(t._s(t.explain.sort_index))])]),t._v(" "),s("td",[t._v("Index, which used for sort results")])]),t._v(" "),s("tr",[s("th",[t._v("total")]),t._v(" "),s("td",[s("strong",[t._v(t._s(t.explain.total_us))]),t._v(" us")]),t._v(" "),s("td",[t._v("Total query execution time")])])])]),t._v(" "),s("h4",{staticClass:"selectors_header"},[t._v("selectors")]),t._v(" "),t.explain.selectors?s("data-table",{staticClass:"mt-1",attrs:{items:t.explain.selectors,columns:t.columns,selectedFields:t.selectedFields}}):t._e()],1):t._e()],1)],1)},staticRenderFns:[]};var le=s("VU/8")(re,ce,!1,function(t){s("5JN1")},"data-v-7b8046a5",null).exports,ue={name:"Aggregations",components:{DataTable:It},computed:u()({},Object(v.d)({aggregations:function(t){return t.items.aggregations},columns:function(t){var e=t.items.aggregations[0].fields;return["count"].concat(st()(e))},columnsDistinct:function(t){var e=t.items.aggregations[0].fields;return[].concat(st()(e))},fields:function(t){var e=t.items.aggregations[0].fields;return e},columnsName:function(){return[(this.aggregations.find(function(t){return"facet"===t.type})||{}).field,"count"]}}),{selectedFields:function(){return Object(d.cloneDeep)(this.columns)}}),methods:{getItems:function(t){var e=this,s=[];return t.forEach(function(t,a){s.push({count:t.count}),t.values.forEach(function(t,n){s[a][e.fields[n]]=t})}),s},getItemsForDistinct:function(t){var e=[];return t.distincts?(t.distincts.forEach(function(s){e.push(zt()({},t.fields[0],s))}),e):e},getColumnsDistinct:function(t){return t.fields}}},de={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",[s("b-col",[t.aggregations?s("b-card",t._l(t.aggregations,function(e){return s("div",["facet"!==e.type&&"distinct"!==e.type?s("div",{staticClass:"aggregation"},[s("span",{staticClass:"type"},[t._v(t._s(e.type))]),t._v(" "),s("span",[t._v("("+t._s(e.field)+")")]),t._v(" "),s("span",[t._v(" = ")]),t._v(" "),s("span",[t._v(t._s(e.value))])]):t._e(),t._v(" "),"facet"===e.type?s("data-table",{attrs:{items:t.getItems(e.facets),columns:t.columns,"column-names":t.columns,selectedFields:t.selectedFields,"no-display-columns-button":""}}):t._e(),t._v(" "),"distinct"===e.type?s("data-table",{attrs:{items:t.getItemsForDistinct(e),columns:t.getColumnsDistinct(e),"column-names":t.getColumnsDistinct(e),selectedFields:t.getColumnsDistinct(e),"no-display-columns-button":"",notShowDefaultView:""}}):t._e()],1)}),0):t._e()],1)],1)},staticRenderFns:[]};var me={added:"green",removed:"red",modified:"blue"},pe={indent:" ",newLine:"\n",color:!0,wrap:function(t,e){return Pt.a[me[t]](e)}},he={name:"ItemsPage",components:{DefaultLayout:O,DataTable:It,PageStatusNotifier:tt,Explain:le,Aggregations:s("VU/8")(ue,de,!1,function(t){s("X2Yw")},"data-v-708bd006",null).exports,QueryBuilder:oe,List:Bt,VueResizable:Kt.a},props:{db:{type:String,default:jt.db},page:{type:Number,default:jt.page},pageSize:{type:Number,default:jt.pageSize},viewType:{type:String,default:jt.viewType},q:{type:String,default:jt.q}},data:function(){var t=this.$props;return{tabIndex:0,params:u()({},t),firstQuery:!1,selection:{start:{line:0,ch:0},end:{line:0,ch:0}},needSelect:!1,cm:null,cmOption:{tabSize:4,viewportMargin:1,styleActiveLine:!0,lineNumbers:!0,mode:"text/x-sql",autofocus:!0,hintOptions:{completeSingle:!1,hint:this.selectSuggest},gutters:["CodeMirror-lint-markers"],lint:{getAnnotations:this.lint}},startHeight:85}},computed:u()({},Object(v.d)({queryHistory:function(t){return t.settings.queryHistory},database:function(t){return t.settings.database},items:function(t){return t.items.qList},explain:function(t){return t.items.explain},aggregations:function(t){return t.items.aggregations},totalItems:function(t){return t.items.qTotal},queryTotal:function(t){return t.items.queryTotal},isLoading:function(t){return t.items.isLoading},namespaces:function(t){return t.items.namespaces},cacheEnabled:function(t){return t.items.cacheEnabled},suggests:function(t){return t.suggest.suggests},sqlError:function(t){return t.items.error}}),Object(v.c)({fields:"items/qFields",itemsSize:"items/qItemsSize"}),{keymap:function(){var t=this;return{"shift+right":function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&t.totalItems>t.params.page*t.params.pageSize&&t.onPageChange(t.params.page+1)},"shift+left":function(){var e=document.activeElement;m.a.isUndefined(e.selectionStart)&&t.params.page>1&&t.onPageChange(t.params.page-1)},"ctrl+enter":function(e){e.preventDefault();var s=t.cm.doc.getCursor();t.onQuery().then(function(){t.cm.doc.setCursor(s),t.needSelect&&t.cm.doc.setSelection(t.selection.start,t.selection.end)})},"meta+enter":function(e){e.preventDefault();var s=t.cm.doc.getCursor();t.onQuery().then(function(){t.cm.doc.setCursor(s),t.needSelect&&t.cm.doc.setSelection(t.selection.start,t.selection.end)})},"shift+space":function(e){e.preventDefault(),t.cm.showHint()}}},rightNamespace:function(){return 1===this.namespaces.length},selectedFields:function(){return m.a.cloneDeep(this.fields)},isAnyItemInQueryHistory:function(){return!m.a.isEmpty(this.queryHistory)},isLocked:function(){return!this.totalItems},isExplain:function(){return!m.a.isNull(this.explain)},isAggregations:function(){return!m.a.isEmpty(this.aggregations)},pageSizeVariants:function(){return Rt},getMaxHeight:function(){return window.innerHeight-300}}),methods:u()({},Object(v.b)({selectDatabase:"settings/selectDatabase",pushQueryToHistory:"settings/pushQueryToHistory",loadQueriesFromHistory:"settings/loadQueriesFromHistory",getItemsListByQuery:"items/getItemsListByQuery",reset:"items/reset",getSuggest:"suggest/getSuggest",clearSuggest:"suggest/clearSuggest",clearError:"items/clearError"}),{onCmReady:function(t){var e=this;t.setSize(null,this.startHeight),this.cm=t,this.cm.on("change",function(t,s){if("complete"===s.origin){var a=s.text,n=s.removed,i=s.from;if(-1===a[0].indexOf(n[0])){e.cm.doc.undo();var o=e.cm.getCursor();e.cm.doc.replaceRange(a[0]+" ",i,{line:o.line,ch:o.ch})}}})},resizeHandler:function(t){this.cm.setSize(null,t.height)},onSuggest:m.a.throttle(function(t){var e=t.getValue(),s=t.getCursor(),a=s.ch,n=s.line,i=t.getTokenAt(s).string,o=this.findQuery(e);if(e&&o.trim()){var r=a,c=!1;this.needSelect&&n===this.selection.start.line&&a>this.selection.start.ch&&(r=a-this.selection.start.ch,a>this.selection.end.ch&&this.selection.end.line===n&&(r-=a-this.selection.end.ch,c=!0)),this.needSelect&&!c&&n===this.selection.end.line&&a>this.selection.end.ch&&(r=a-(a-this.selection.end.ch)),n>=this.selection.start.line&&(n-=this.selection.start.line),this.getSuggest({db:this.database,params:{q:o,pos:r,line:n}}).then(function(){i.trim()||t.closeHint()})}},300),selectSuggest:function(t){var e=t.getCursor(),s=t.getTokenAt(e),a=s.start,n=s.end,i=s.string,o=e.line,r=a,c=[].concat(st()(this.suggests));return i.trim()+" "==" "&&(r=e.ch),new RegExp(/[(),.?"':{}|<>]/g).test(i)&&(r=e.ch,c=c.map(function(t){return" "+t})),{list:c,from:Jt.a.Pos(o,r),to:Jt.a.Pos(o,n)}},lint:function(){if(!this.sqlError)return[];try{var t=m.a.get(this.sqlError,"response.data.description",", ").split(", "),e=t.slice(-1)[0].split(" ")[1]-1,s=t.slice(-1)[0].split(" ")[3]-1;s<1&&(s=1);var a=this.cm.getTokenAt(Jt.a.Pos(e,s)),n=a.start,i=a.end;return[{message:t[0]||"",from:Jt.a.Pos(e,n),to:Jt.a.Pos(e,i)}]}catch(t){return[]}},paginationInfo:function(){var t=this.totalItems;if(this.isLoading)return"";if(!t)return this.queryTotal?"total "+this.queryTotal:"No items found";var e=this.params.page*this.params.pageSize,s=t<e?t:e;return this.queryTotal?"showing items from "+(this.params.page-1)*this.params.pageSize+" to "+s+" of "+t+", total "+this.queryTotal:"showing items from "+(this.params.page-1)*this.params.pageSize+" to "+s+" of "+t},jsonRootName:function(t){if(m.a.isEmpty(t[this.fields.id])){var e=this.fields[0];return e+"_"+t[e]}return this.fields.id+"_"+t.id},Execute:function(){var t=this;this.onQuery().then(function(){t.needSelect&&t.cm.doc.setSelection(t.selection.start,t.selection.end)})},onQuery:function(){var t=this;this.firstQuery=!0,m.a.isEmpty(this.$refs.queryselect)||(this.$refs.queryselect.visible=!1);var e=this.database||this.params.db;if(!e)return Vt.a.reject();this.database||this.selectDatabase(e),this.params.db=this.database;var s=m.a.pickBy(this.params),a=this.findQuery(this.params.q),n={db:this.database,params:u()({},s,{q:a,width:window.innerWidth/P.width,with_columns:1})},i=m.a.mapKeys(s,function(t,e){return m.a.snakeCase(e)});return a.trim()&&(this.pushQueryToHistory({query:this.params.q}),this.getItemsListByQuery(n).then(function(){return t.acceptChangeViewType(i),Vt.a.resolve()})),Vt.a.resolve()},findQuery:function(t){var e=0;if([].concat(st()(t)).forEach(function(t){";"===t&&(e+=1)}),!e)return this.needSelect=!1,this.selection.start={ch:0,line:0},t;this.needSelect=!0;for(var s=[],a=[],n=this.cm.doc.lineCount(),i=0;i<n;i+=1)a.push(this.cm.getLineTokens(i));var o=this.cm.getCursor(),r=this.cm.getLineTokens(o.line),c=this.cm.getTokenAt(o),l=r.findIndex(function(t){return t.string===c.string&&t.start<o.ch&&t.end>=o.ch});l<0&&(l=0);for(var u=!1,d=!1,p=l;p<r.length;p+=1){var h=m.a.trim(r[p].string,";");if(m.a.isEmpty(h)||s.push(r[p].string),m.a.isEmpty(h)||o.line===n-1&&p===r.length-1){u=!0,this.selection.end={line:o.line,ch:r[p].end},m.a.isEmpty(h)&&(this.selection.end.ch-=r[p].string.length);break}}if(!u)for(var f=o.line+1;f<n&&!u;f+=1){var v=this.cm.getLineTokens(f);s.push("\n");for(var _=0;_<v.length;_+=1){var g=m.a.trim(v[_].string,";");if(m.a.isEmpty(g)||s.push(v[_].string),m.a.isEmpty(g)||f===n-1&&_===v.length-1){u=!0,this.selection.end={line:f,ch:v[_].end};break}}}for(var b=l-1;b>=0;b-=1){var y=m.a.trim(r[b].string,";");if(m.a.isEmpty(y)||s.unshift(r[b].string),m.a.isEmpty(y)||0===o.line&&0===b){d=!0,this.selection.start={line:o.line,ch:m.a.isEmpty(y)?r[b].start+r[b].string.length:r[b].start};break}}if(!d)for(var C=o.line-1;C>=0&&!d;C-=1){var S=this.cm.getLineTokens(C);s.unshift("\n");for(var E=S.length-1;E>=0;E-=1){var w=m.a.trim(S[E].string,";");if(m.a.isEmpty(w)||s.unshift(S[E].string),m.a.isEmpty(w)||0===C&&0===E){d=!0,this.selection.start={line:C,ch:m.a.isEmpty(w)?S[E].start+S[E].string.length:S[E].start};break}}}return s.join("")},acceptChangeViewType:function(t){var e=this.params.viewType;"explain"!==e||this.isExplain||this.onViewTypeChange("list"),"aggregations"!==e||this.isAggregations||this.onViewTypeChange("list"),"list"!==e&&"table"!==e||(this.isLocked&&this.isExplain&&this.onViewTypeChange("explain"),this.isLocked&&this.isAggregations&&this.onViewTypeChange("aggregations")),this.$router.push({path:this.$router.path,query:t})},onQuerySelect:function(t){this.params.q=t,this.clearError()},onViewTypeChange:function(t){this.params.viewType=t},onPageSizeChange:function(t){this.params.pageSize=t,this.params.page=1,0===this.tabIndex&&this.onQuery()},onPageChange:function(t){this.params.page=t,0===this.tabIndex&&this.onQuery()},onItemDeleteQuestion:function(t){var e=this,s=m.a.pickBy(this.params),a={item:t,params:u()({},s,{width:window.innerWidth/P.width,with_columns:1})};this.$cmodal.show({header:"Are you sure?",message:"This action will cause a removal of the item:",strongMessage:m.a.truncate(W()(t,null,2),{length:500,separator:" "}),event:"onItemDelete",eventParams:a,callback:0===this.tabIndex?this.onQuery:function(){return e.$eventHub.emit("itemsChanged")}})},requestIsMaked:function(){this.firstQuery=!0},onItemUpdateQuestion:function(t,e){var s=this,a=Lt()(e,t,pe),n=m.a.pickBy(this.params),i={item:t,params:u()({},n,{width:window.innerWidth/P.width,with_columns:1})};this.$cmodal.show({header:"Are you sure?",message:"This action will change the existed item:",strongMessage:m.a.truncate(a.text,{length:500,separator:" "}),event:"onItemUpdate",eventParams:i,callback:0===this.tabIndex?this.onQuery:function(){return s.$eventHub.emit("itemsChanged")}})}}),mounted:function(){this.reset(),this.loadQueriesFromHistory(),m.a.isEmpty(this.params.q)&&(this.params.q=this.queryHistory[0]||"")},beforeDestroy:function(){try{localStorage.setItem("query",this.params.q)}catch(t){localStorage.setItem("query",null)}},watch:{tabIndex:function(){this.firstQuery=!1},suggests:function(){this.cm.showHint()}}},fe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.keymap,expression:"keymap"}],attrs:{slot:"page"},slot:"page"},[s("PageStatusNotifier",{attrs:{isLoadingProgress:t.isLoading,currentDatabaseName:t.database}}),t._v(" "),t.database?s("b-container",{attrs:{fluid:"",id:"control-top-block"}},[s("b-tabs",{model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[s("b-tab",{attrs:{title:"SQL",active:""}},[s("b-row",{attrs:{id:"stick-container"}},[s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"editor-group"},[s("vue-resizable",{attrs:{height:t.startHeight,"min-height":50,"max-height":t.getMaxHeight},on:{"resize:end":t.resizeHandler}},[s("codemirror",{ref:"cm",staticClass:"cm-editor",attrs:{options:t.cmOption},on:{ready:t.onCmReady,changes:t.onSuggest},model:{value:t.params.q,callback:function(e){t.$set(t.params,"q",e)},expression:"params.q"}})],1),t._v(" "),s("affix",{attrs:{"relative-element-selector":"#stick-container",offset:{top:60,bottom:0}}},[s("b-button-group",[s("b-button",{attrs:{disabled:!t.database},on:{click:function(e){return e.stopPropagation(),t.Execute(e)}}},[t._v("Execute")]),t._v(" "),s("b-dropdown",{ref:"queryselect",attrs:{disabled:!t.isAnyItemInQueryHistory}},t._l(t.queryHistory,function(e,a){return s("b-dropdown-item",{key:a,on:{click:function(s){return s.stopPropagation(),t.onQuerySelect(e)}}},[t._v(t._s(e))])}),1)],1)],1)],1)])],1)],1),t._v(" "),s("b-tab",{attrs:{title:"Query builder"}},[s("query-builder",{attrs:{tabIndex:t.tabIndex,page:t.params.page,pageSize:t.params.pageSize},on:{makeRequest:t.requestIsMaked}})],1)],1),t._v(" "),s("b-row",{staticClass:"mt-4"},[s("b-col",{directives:[{name:"show",rawName:"v-show",value:t.items.length>0,expression:"items.length > 0"}]},[s("b-button-group",{attrs:{size:"sm"}},[s("b-button",{attrs:{disabled:t.isLocked,variant:"outline-primary",pressed:"list"===t.params.viewType},on:{click:function(e){return t.onViewTypeChange("list")}}},[t._v("List")]),t._v(" "),s("b-button",{attrs:{disabled:t.isLocked,variant:"outline-primary",pressed:"table"===t.params.viewType},on:{click:function(e){return t.onViewTypeChange("table")}}},[t._v("Table")]),t._v(" "),t.explain?s("b-button",{attrs:{variant:"outline-primary",pressed:"explain"===t.params.viewType},on:{click:function(e){return t.onViewTypeChange("explain")}}},[t._v("Explain")]):t._e(),t._v(" "),t.aggregations.length?s("b-button",{attrs:{variant:"outline-primary",pressed:"aggregations"===t.params.viewType},on:{click:function(e){return t.onViewTypeChange("aggregations")}}},[t._v("Aggregations")]):t._e()],1)],1),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:t.firstQuery,expression:"firstQuery"}],attrs:{cols:"6",offset:t.items.length>0?0:3}},[s("center",[s("strong",[t._v(t._s(t.paginationInfo()))])])],1),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:t.items.length>0,expression:"items.length > 0"}]},[s("b-pagination",{staticClass:"float-right ml-2",attrs:{disabled:t.isLocked||"explain"===this.params.viewType,size:"sm","hide-ellipsis":"","hide-goto-end-buttons":"",limit:null,"total-rows":t.totalItems,"per-page":t.params.pageSize},on:{change:t.onPageChange},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}}),t._v(" "),s("b-dropdown",{staticClass:"float-right",attrs:{disabled:t.isLocked||"explain"===this.params.viewType,size:"sm",variant:"primary",text:String(t.params.pageSize)}},t._l(t.pageSizeVariants,function(e,a){return s("b-dropdown-item",{key:a,on:{click:function(s){return t.onPageSizeChange(e)}}},[t._v(t._s(e)+"\n            ")])}),1)],1)],1)],1):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.items.length>0,expression:"items.length > 0"}]},[s("List",{attrs:{visible:"list"===t.params.viewType,items:t.items,jsonRootName:t.jsonRootName,onItemUpdateQuestion:t.onItemUpdateQuestion,onItemDeleteQuestion:t.onItemDeleteQuestion,canEdit:t.cacheEnabled&&t.rightNamespace}}),t._v(" "),"table"===t.params.viewType?s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",[t.itemsSize?s("data-table",{staticClass:"mt-1",attrs:{isWithActions:t.cacheEnabled&&t.rightNamespace,isUpdateAllowed:t.cacheEnabled&&t.rightNamespace,isRemoveAllowed:t.cacheEnabled&&t.rightNamespace,items:t.items,columns:t.fields,selectedFields:t.selectedFields,onItemDelete:t.onItemDeleteQuestion,onItemUpdate:t.onItemUpdateQuestion,sortable:!1}}):t._e()],1)],1)],1):t._e()],1),t._v(" "),"explain"===t.params.viewType?s("b-container",{attrs:{fluid:""}},[s("Explain")],1):t._e(),t._v(" "),"aggregations"===t.params.viewType?s("b-container",{attrs:{fluid:""}},[s("Aggregations")],1):t._e()],1)])},staticRenderFns:[]};var ve=s("VU/8")(he,fe,!1,function(t){s("70mm"),s("olqt")},"data-v-5d9a6568",null).exports,_e=s("XiRE"),ge=s.n(_e),be=s("WaEV"),ye=s.n(be),Ce={name:"MemoryStatsPage",components:{DefaultLayout:O,PageStatusNotifier:tt,DataTable:It},props:{namespace:{type:String,default:null},index:{type:Number,default:null},page:{type:Number,default:jt.page},pageSize:{type:Number||String,default:jt.pageSize},indexes:{type:Boolean,default:!1},cache:{type:Boolean,default:!1}},data:function(){var t=this.$props,e=t.page,s=t.pageSize,a=localStorage,n=a.sortField,i=void 0===n?"namespace":n,o=a.sortOrder,r=void 0===o?"desc":o,c=localStorage,l=c.displayType,u=c.typeChart;return l||(l=this.$route.query.displayType||"chart"),u||(u=this.$route.query.typeChart||"pie"),{Chart:null,typeChart:u,sortOrder:r,metric:"byte",params:{page:e,pageSize:s},sortField:i,displayType:l}},computed:u()({},Object(v.d)({database:function(t){return t.settings.database},items:function(t){return t.items.qList},itemsNames:function(t){return t.items.qList.map(function(t){return t.name})},isLoading:function(t){return t.items.isLoading},totalItems:function(t){return t.items.qTotal}}),{columnsNames:function(){return this.columns.map(function(t){return t.replace(/_/g," ").replace(/us$/,"ms")})},columnsIndexesNames:function(){return this.columns_indexes.map(function(t){return t.replace(/_/g," ").replace(/us$/,"ms")})},dropdownText:function(){return"table"===this.displayType?"table":this.typeChart},columns:function(){return["namespace","total","items_count","data_size","indexes_size","cache_size","WAL_size"]},columns_indexes:function(){return["name","unique_keys_count","total","idset_btree_size","idset_plain_size","sort_orders_size","idset_cache","data_size","fulltext_size"]},selectedFields:function(){return m.a.cloneDeep(this.columns)},selectedFieldsIndexes:function(){return m.a.cloneDeep(this.columns_indexes)},table_items:function(){var t=this,e=m.a.sortBy(this.items.map(function(t){return u()({namespace:t.name,items_count:t.items_count,total:m.a.get(t,"total.data_size",0)+m.a.get(t,"total.cache_size",0)+m.a.get(t,"total.indexes_size",0)+m.a.get(t,"replication.wal_size",0),WAL_size:m.a.get(t,"replication.wal_size",0)},t.total)}),function(e){return"namespace"===t.sortField?e[t.sortField]:+e[t.sortField]});if("desc"===this.sortOrder&&(e=e.reverse()),!this.params.pageSize){var s={};e.forEach(function(t){k()(t).forEach(function(e){"namespace"!==e&&(s[e]=t[e]+(s[e]||0))})}),e.push(u()({namespace:"total"},s))}return e=e.map(function(e){return u()({},e,{data_size:t.rounding(e.data_size),cache_size:t.rounding(e.cache_size),indexes_size:t.rounding(e.indexes_size),total:t.rounding(e.total),WAL_size:t.rounding(e.WAL_size)})})},table_items_indexes:function(){var t=this,e=[];if(!this.namespace)return e;var s=this.items.findIndex(function(e){return e.name===t.namespace}),a=this.items[s];return a?(e=m.a.sortBy(a.indexes.map(function(t){return{name:t.name,unique_keys_count:m.a.get(t,"uniq_keys_count",0),idset_btree_size:m.a.get(t,"idset_btree_size",0),idset_plain_size:m.a.get(t,"idset_plain_size",0),sort_orders_size:m.a.get(t,"sort_orders_size",0),idset_cache:m.a.get(t,"idset_cache.total_size",0),data_size:m.a.get(t,"data_size",0),fulltext_size:m.a.get(t,"fulltext_size",0),total:m.a.get(t,"idset_btree_size",0)+m.a.get(t,"idset_plain_size",0)+m.a.get(t,"sort_orders_size",0)+m.a.get(t,"idset_cache.total_size",0)+m.a.get(t,"data_size",0)+m.a.get(t,"fulltext_size",0)}}),function(e){return"name"===t.sortField?e[t.sortField]:+e[t.sortField]}),"desc"===this.sortOrder&&(e=e.reverse()),e=e.map(function(e){return u()({},e,{idset_btree_size:t.rounding(e.idset_btree_size),idset_plain_size:t.rounding(e.idset_plain_size),sort_orders_size:t.rounding(e.sort_orders_size),idset_cache:t.rounding(e.idset_cache),data_size:t.rounding(e.data_size),fulltext_size:t.rounding(e.fulltext_size),total:t.rounding(e.total)})})):e},itInnerRequest:function(){return this.namespace&&m.a.isNumber(this.index)},inChart:function(){return this.itInnerRequest||this.indexes||this.cache},pageSizeVariants:function(){return Rt},OutPageSize:function(){return this.params.pageSize?String(this.params.pageSize):"All"},data:function(){return this.indexes?this.datasetsIndexes:this.cache?this.datasetsCache:this.itInnerRequest?this.datasetsInner:{labels:this.itemsNames,datasets:this.datasets}},totals:function(){return this.items.map(function(t){return t.total})},datasetsCache:function(){var t=this,e=this.items.findIndex(function(e){return e.name===t.namespace});if(!this.items[e])return{};var s=1,a=0;return"GB"===this.metric&&(s=U.gyga,a=2),"MB"===this.metric&&(s=U.mega,a=2),"kB"===this.metric&&(s=U.kilo,a=1),{labels:[].concat(st()(this.items[e].indexes.map(function(t){return t.name})),["join_cache"]),datasets:[{label:this.itemsNames[e],borderWidth:1,backgroundColor:this.items[e].indexes.map(function(){return ge()().hexString()}),borderColor:new Array(this.items[e].indexes.length).fill("#fff"),data:[].concat(st()(this.items[e].indexes.map(function(t){return(m.a.get(t,"idset_cache.total_size",0)/s).toFixed(a)})),[(m.a.get(this.items[e],"join_cache.total_size",0)/s).toFixed(a)])}]}},datasetsIndexes:function(){var t=this,e=this.items.findIndex(function(e){return e.name===t.namespace}),s={labels:this.items[e].indexes.map(function(t){return t.name}),datasets:[{label:this.itemsNames[e],borderWidth:1,backgroundColor:this.items[e].indexes.map(function(){return ge()().hexString()}),borderColor:new Array(this.items[e].indexes.length).fill("#fff"),data:this.items[e].indexes.map(function(t){return m.a.get(t,"idset_btree_size",0)+m.a.get(t,"idset_plain_size",0)+m.a.get(t,"sort_orders_size",0)+m.a.get(t,"fulltextSize",0)})}]},a=1,n=0,i=m.a.max(s.datasets[0].data);return i>U.gyga?(a=U.gyga,this.metric="GB",n=2):i>U.mega?(a=U.mega,this.metric="MB",n=2):i>U.kilo?(a=U.kilo,this.metric="kB",n=1):this.metric="",s.datasets[0].data=s.datasets[0].data.map(function(t){return(t/a).toFixed(n)}),s},datasetsInner:function(){var t=this,e=k()(this.items[this.index].total),s=k()(this.totals[this.index]).reduce(function(e,s){return e+t.totals[t.index][s]},0),a=1,n=0;return s>U.gyga?(a=U.gyga,this.metric="GB",n=2):s>U.mega?(a=U.mega,this.metric="MB",n=2):s>U.kilo&&(a=U.kilo,this.metric="kB",n=1),{labels:e,datasets:[{label:this.itemsNames[this.index],borderWidth:1,backgroundColor:e.map(function(){return ge()().hexString()}),borderColor:new Array(e.length).fill("#fff"),data:e.map(function(e){return(t.items[t.index].total[e]/a).toFixed(n)})}]}},datasets:function(){var t=this,e=[];if(!this.totals.length)return e;var s="desc"===this.sortOrder?0:this.totals.length-1,a=k()(this.totals[s]).reduce(function(e,a){return e+t.totals[s][a]},0),n=1,i=0,o="Size in bytes";return a>U.gyga?(n=U.gyga,this.metric="GB",i=2,o="Size in gygabyte"):a>U.mega?(n=U.mega,this.metric="MB",i=2,o="Size in megabyte"):a>U.kilo&&(n=U.kilo,this.metric="kB",i=1,o="Size in kilobyte"),e.push({label:o,borderWidth:1,backgroundColor:new Array(this.totals.length),borderColor:new Array(this.totals.length).fill("#fff"),data:new Array(this.totals.length)}),this.totals.forEach(function(t,s){var a=ge()();e[0].backgroundColor[s]=a.hexString(),e[0].data[s]=(k()(t).reduce(function(e,s){return e+t[s]},0)/n).toFixed(i)}),e},pathRequest:function(){var t="";return this.itInnerRequest&&(t=""+this.namespace,this.cache&&(t=this.namespace+"/cache"),this.indexes&&(t=this.namespace+"/indexes")),t}}),methods:u()({},Object(v.b)({getItemsList:"items/getItemsListByQuery"}),{onChangeDisplayType:function(t){localStorage.setItem("displayType",t),this.displayType=t,this.init()},onSortChange:m.a.debounce(function(t){var e=t.sortField,s=t.sortOrder,a=e.replace(/ /g,"_");localStorage.setItem("sortField",a),localStorage.setItem("sortOrder",s),this.sortField=a,this.sortOrder=s},100),rounding:function(t){var e=1,s="",a=0;return t>U.gyga?(e=U.gyga,s="GB",a=2):t>U.mega?(e=U.mega,s="MB",a=2):t>U.kilo&&(e=U.kilo,s="kB",a=1),(t/e).toFixed(a)+" "+s},init:function(){var t=this;if(this.database){var e={desc:!0,q:"select * from #memstats order by 'total.data_size' "+this.sortOrder};this.$router.push({query:u()({},this.$route.query,{displayType:this.displayType,typeChart:this.typeChart})}),this.params.pageSize&&(e.pageSize=this.params.pageSize,e.page=this.params.page,this.inChart||this.$router.push({path:this.$router.path,query:u()({},this.params,{displayType:this.displayType,typeChart:this.typeChart})})),this.getItemsList({db:this.database,params:e}).then(function(){t.Chart&&t.Chart.destroy(),t.Chart=new ye.a(t.$refs.chart,{type:t.typeChart,data:t.data,options:{onClick:function(e,s){if(!m.a.isEmpty(s)){var a=m.a.get(s,"[0]._index");if(t.itInnerRequest)return 1!==a||t.indexes||t.cache||t.$router.push({name:"MemoryStatsPage",query:{db:t.database,namespace:t.namespace,indexes:!0,displayType:t.displayType,typeChart:t.typeChart}}),void(2!==a||t.indexes||t.cache||t.$router.push({name:"MemoryStatsPage",query:{db:t.database,namespace:t.namespace,cache:!0,displayType:t.displayType,typeChart:t.typeChart}}));t.$router.push({name:"MemoryStatsPage",query:{db:t.database,namespace:t.itemsNames[a],index:a,displayType:t.displayType,typeChart:t.typeChart}})}},legend:{position:"pie"===t.typeChart?"left":"top",labels:{generateLabels:function(e){var s=m.a.get(e,"data.datasets[0].data",[]),a=m.a.get(e,"data.datasets[0].backgroundColor",[]),n=m.a.get(e,"data.datasets[0].borderColor",[]),i=[];return m.a.get(e,"data.labels",[]).forEach(function(e,o){i.push({text:e+" – "+s[o]+t.metric,fillStyle:a[o],strokeStyle:n[o]})}),i}}},responsive:!0,tooltips:{callbacks:{title:function(t,e){return e.labels[t[0].index]},label:function(e,s){return""+s.datasets[0].data[e.index]+t.metric}}}}})})}},onPageChange:function(t){this.params.page=t},onPageSizeChange:function(t){this.params.pageSize=t,this.params.page=1},onChangeSortOrder:function(t){this.sortOrder=t,localStorage.setItem("sortOrder",t)},onChangeTypeChart:function(t){"chart"!==this.displayType&&this.onChangeDisplayType("chart"),this.typeChart=t,localStorage.setItem("typeChart",t),this.init()},inIndexes:function(t){"total"!==t&&this.$router.push({name:"MemoryStatsPage",query:{namespace:t,indexes:!0}})}}),mounted:function(){this.init(),this.$watchAll(["sortOrder","cache","indexes","namespace","database","params.page","params.pageSize"],this.init)}},Se={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("div",{attrs:{id:"control-top-block"}},[s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"selected-namespace"},[s("h5",[t._v("Memory consumption statistics")])])]),t._v(" "),s("PageStatusNotifier",{attrs:{isLoadingProgress:t.isLoading,currentDatabaseName:t.database}}),t._v(" "),s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("b-button-group",[s("b-dropdown",{attrs:{text:t.dropdownText,variant:"dark"}},[s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeDisplayType("table")}}},[t._v("table")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeTypeChart("horizontalBar")}}},[t._v("horizontalBar")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeTypeChart("bar")}}},[t._v("bar")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeTypeChart("pie")}}},[t._v("pie")])],1)],1),t._v(" "),t.inChart&&"table"!==t.displayType?s("div",{staticClass:"toUpChart",on:{click:function(e){return t.$router.push({path:"/memory_stats",query:{displayType:t.displayType,db:t.database}})}}},[s("font-awesome-icon",{attrs:{icon:"angle-up",size:"lg"}})],1):t._e()],1),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayType,expression:"displayType === 'chart'"}],attrs:{cols:4}},[s("h5",[t._v(t._s(t.pathRequest))])]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayType,expression:"displayType === 'chart'"}],attrs:{cols:"2"}},[s("b-dropdown",{attrs:{text:t.sortOrder,variant:"dark"}},[s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeSortOrder("asc")}}},[t._v("Asc")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeSortOrder("desc")}}},[t._v("Desc")])],1)],1),t._v(" "),t.inChart?t._e():s("b-col",{attrs:{cols:"2",offset:"chart"===t.displayType?1:7}},[s("b-pagination",{staticClass:"float-right ml-2",attrs:{size:"sm","hide-ellipsis":"","hide-goto-end-buttons":"",limit:null,"total-rows":t.totalItems,"per-page":t.params.pageSize},on:{change:t.onPageChange},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}}),t._v(" "),s("b-dropdown",{staticClass:"float-right",attrs:{size:"sm",variant:"primary",text:t.OutPageSize}},[s("b-dropdown-item",{attrs:{id:"0"},on:{click:function(e){return t.onPageSizeChange(0)}}},[t._v("All")]),t._v(" "),t._l(t.pageSizeVariants,function(e){return s("b-dropdown-item",{key:e,on:{click:function(s){return t.onPageSizeChange(e)}}},[t._v(t._s(e)+"\n            ")])})],2)],1)],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayType,expression:"displayType === 'chart'"}],staticClass:"chart"},[s("canvas",{ref:"chart"})]),t._v(" "),s("data-table",{directives:[{name:"show",rawName:"v-show",value:"table"===t.displayType&&!t.indexes,expression:"displayType === 'table' && !indexes"}],staticClass:"mt-3",attrs:{title:"Namespaces",items:t.table_items,columns:t.columns,columnNames:t.columnsNames,selectedFields:t.selectedFields,sortableFields:t.columns,onSortChange:t.onSortChange,doSomthing:t.inIndexes,sortOrder:t.sortOrder}}),t._v(" "),s("data-table",{directives:[{name:"show",rawName:"v-show",value:"table"===t.displayType&&t.indexes,expression:"displayType === 'table' && indexes"}],staticClass:"mt-3",attrs:{title:"indexes of "+t.namespace,items:t.table_items_indexes,columns:t.columns_indexes,columnNames:t.columnsIndexesNames,selectedFields:t.selectedFieldsIndexes,sortableFields:t.columns_indexes,onSortChange:t.onSortChange,sortOrder:t.sortOrder}},[t.inChart&&"table"===t.displayType?s("div",{staticClass:"toUp float-left mr-3",on:{click:function(e){return t.$router.push({path:"/memory_stats",query:{displayType:t.displayType,db:t.database}})}}},[s("font-awesome-icon",{attrs:{icon:"angle-up",size:"lg"}})],1):t._e()])],1)])},staticRenderFns:[]};var Ee=s("VU/8")(Ce,Se,!1,function(t){s("dvTo")},"data-v-48313ce8",null).exports,we={name:"Profiling",data:function(){return{inx:0}},computed:u()({},Object(v.d)({items:function(t){return t.items.list}}),Object(v.c)({database:"settings/databaseWithDefault"}),{item:function(){var t=this,e=this.items.find(function(e,s){return!!m.a.has(e,"profiling")&&(t.inx=s,!0)});return e},queriesperfstats:{get:function(){return m.a.get(this,"item.profiling.queriesperfstats","")},set:function(t){this.updateItem(this.mutateItem("queriesperfstats",t))}},perfstats:{get:function(){return m.a.get(this,"item.profiling.perfstats","")},set:function(t){this.updateItem(this.mutateItem("perfstats",t))}},activitystats:{get:function(){return m.a.get(this,"item.profiling.activitystats","")},set:function(t){this.updateItem(this.mutateItem("activitystats",t))}},memstats:{get:function(){return m.a.get(this,"item.profiling.memstats","")},set:function(t){this.updateItem(this.mutateItem("memstats",t))}},queries_threshold_us:{get:function(){return m.a.get(this,"item.profiling.queries_threshold_us","")},set:function(t){this.updateItem(this.mutateItem("queries_threshold_us",t))}}}),methods:{mutateItem:function(t,e){return u()({},this.item,{profiling:u()({},this.item.profiling,zt()({},t,e))})},updateItem:function(t){this.$store.dispatch("items/localUpdateItem",{item:t,inx:this.inx})},saveItem:function(){var t={db:this.database,namespace:"#config",item:this.item};this.$store.dispatch("items/updateItem",t)}}},xe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",[s("h4",{staticClass:"col-sm-12 mt-2"},[t._v("ProfilingConfig")]),t._v(" "),t.item?s("div",[s("b-col",{staticClass:"col-sm-12 mt-4 mb-4",attrs:{cols:"12"}},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-12 col-md-2 col-form-label text-md-right font-weight-bold",attrs:{for:"queries_threshold_us"}},[t._v("\n          Minimum time\n        ")]),t._v(" "),s("b-form-input",{staticClass:"col-sm-9 col-md-7 text-md-right",attrs:{id:"queries_threshold_us",variant:"primary",size:"sm",type:"number",placeholder:"Set integer value"},model:{value:t.queries_threshold_us,callback:function(e){t.queries_threshold_us=t._n(e)},expression:"queries_threshold_us"}}),t._v(" "),s("strong",{staticClass:"col-sm-3 col-form-label"},[t._v("us")]),t._v(" "),s("div",{staticClass:"offset-sm-0 offset-md-2"},[t._v("Minimum query execution time to be recoreded in #queriesperfstats namespace")])],1)]),t._v(" "),s("b-col",{staticClass:"col-sm-12 mt-2",attrs:{cols:"12"}},[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-2 col-sm-12 text-right"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.queriesperfstats,expression:"queriesperfstats",modifiers:{lazy:!0}}],staticClass:"form-check-input",attrs:{id:"queriesperfstats",type:"checkbox"},domProps:{checked:Array.isArray(t.queriesperfstats)?t._i(t.queriesperfstats,null)>-1:t.queriesperfstats},on:{change:function(e){var s=t.queriesperfstats,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.queriesperfstats=s.concat([null])):i>-1&&(t.queriesperfstats=s.slice(0,i).concat(s.slice(i+1)))}else t.queriesperfstats=n}}})]),t._v(" "),s("label",{attrs:{for:"queriesperfstats"}},[t._v("Enables record queries perofrmance statistics")])])]),t._v(" "),s("b-col",{staticClass:"col-sm-12 mt-2",attrs:{cols:"12"}},[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-2 col-sm-12 text-right"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.perfstats,expression:"perfstats",modifiers:{lazy:!0}}],staticClass:"form-check-input",attrs:{id:"perfstats",type:"checkbox"},domProps:{checked:Array.isArray(t.perfstats)?t._i(t.perfstats,null)>-1:t.perfstats},on:{change:function(e){var s=t.perfstats,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.perfstats=s.concat([null])):i>-1&&(t.perfstats=s.slice(0,i).concat(s.slice(i+1)))}else t.perfstats=n}}})]),t._v(" "),s("label",{attrs:{for:"perfstats"}},[t._v("Enables tracking overal perofrmance statistics")])])]),t._v(" "),s("b-col",{staticClass:"col-sm-12 mt-2",attrs:{cols:"12"}},[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-2 col-sm-12 text-right"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.memstats,expression:"memstats",modifiers:{lazy:!0}}],staticClass:"form-check-input",attrs:{id:"memstats",type:"checkbox"},domProps:{checked:Array.isArray(t.memstats)?t._i(t.memstats,null)>-1:t.memstats},on:{change:function(e){var s=t.memstats,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.memstats=s.concat([null])):i>-1&&(t.memstats=s.slice(0,i).concat(s.slice(i+1)))}else t.memstats=n}}})]),t._v(" "),s("label",{attrs:{for:"memstats"}},[t._v("Enables tracking memory statistics")])])]),t._v(" "),s("b-col",{staticClass:"col-sm-12 mt-2",attrs:{cols:"12"}},[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-2 col-sm-12 text-right"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.activitystats,expression:"activitystats",modifiers:{lazy:!0}}],staticClass:"form-check-input",attrs:{id:"activitystats",type:"checkbox"},domProps:{checked:Array.isArray(t.activitystats)?t._i(t.activitystats,null)>-1:t.activitystats},on:{change:function(e){var s=t.activitystats,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.activitystats=s.concat([null])):i>-1&&(t.activitystats=s.slice(0,i).concat(s.slice(i+1)))}else t.activitystats=n}}})]),t._v(" "),s("label",{attrs:{for:"activitystats"}},[t._v("Enables activity statistics")])])]),t._v(" "),s("b-col",{staticClass:"col-sm-5 mt-5",attrs:{sm:"5"}},[s("b-button",{staticClass:"button mr-3",attrs:{variant:"primary"},on:{click:t.saveItem}},[t._v("Save")]),t._v(" "),s("b-button",{staticClass:"button",attrs:{variant:"danger"},on:{click:function(e){return t.$emit("reset")}}},[t._v("Revert")])],1)],1):s("div",[t._v("Not found")])])},staticRenderFns:[]},Te=s("VU/8")(we,xe,!1,null,null,null).exports,Ie={log_level:"none",lazyload:!1,unload_idle_threshold:0,join_cache_mode:"on",optimization_timeout_ms:800,optimization_sort_workers:4,start_copy_policy_tx_size:1e4,copy_policy_multiplier:5,tx_size_to_always_copy:1e5,namespace:"*"},ke={name:"Namespaces",computed:u()({},Object(v.d)({items:function(t){return t.items.list}}),Object(v.c)({database:"settings/databaseWithDefault",namespacesSuggest:"namespaces/namesWithoutHash"}),{item:function(){var t=this,e=this.items.find(function(e,s){return!!m.a.has(e,"namespaces")&&(t.inx=s,!0)});return e},namespaces:function(){return m.a.get(this.item,"namespaces",[]).map(function(t){return u()({optimization_timeout_ms:800,optimization_sort_workers:4,start_copy_policy_tx_size:1e4,copy_policy_multiplier:5,tx_size_to_always_copy:1e5},t)})},namespace:function(){return this.namespaces.find(function(t){return"*"===t.namespace})||Ie}}),data:function(){return{log_levels:[{value:"none",text:"none"},{value:"error",text:"error"},{value:"warning",text:"warning"},{value:"info",text:"info"},{value:"trace",text:"trace"}],lazy_loads:[{value:!0,text:"on"},{value:!1,text:"off"}],join_cache_modes:[{value:"off",text:"off"},{value:"on",text:"on"},{value:"aggressive",text:"aggressive"}],inx:0,fields:[{key:"namespace"},{key:"log_level"},{key:"join_cache_mode"},{key:"optimization_timeout_ms"},{key:"optimization_sort_workers"},{key:"start_copy_policy_tx_size"},{key:"copy_policy_multiplier"},{key:"tx_size_to_always_copy"}]}},methods:u()({},Object(v.b)({throwError:"settings/throwError"}),{changeNamespace:function(t,e,s){var a=this.item.namespaces;a[e]=u()({},a[e],zt()({},s,t)),this.updateItem(this.mutateItem(a))},mutateItem:function(t){var e=this.item;return e.namespaces=t,e},updateItem:function(t){this.$store.dispatch("items/localUpdateItem",{item:t,inx:this.inx})},saveItem:function(){var t=this.item,e=0;this.namespaces.forEach(function(t,s){"*"===t.namespace&&(e=s)}),this.namespaces[e]=u()({},this.namespace);var s={db:this.database,namespace:"#config",item:u()({},t,{namespaces:[].concat(st()(this.namespaces))})};this.$store.dispatch("items/updateItem",s)}}),watch:{namespaces:function(){var t=this;this.namespaces.forEach(function(e,s){var a=e.namespace;t.$refs["suggest_"+s]&&a!==t.$refs["suggest_"+s].searchInput&&(t.$refs["suggest_"+s].searchInput=a)})}}},Ae={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",[s("h4",{staticClass:"col-sm-12 mt-2"},[t._v("Default namespace config")]),t._v(" "),s("b-col",{attrs:{cols:"12"}},[s("b-list-group",{staticClass:"mb-4 setting"},[s("b-list-group-item",{staticClass:"field"},[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Log level")])]),t._v(" "),s("i",[t._v("Log level of queries core logger")])]),t._v(" "),s("b-form-select",{staticClass:"mb-3 field-right",attrs:{id:"log_level",value:t.namespace.log_level,options:t.log_levels,size:"md"},on:{change:function(e){return t.changeNamespace(e,0,"log_level")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})],1),t._v(" "),s("b-list-group-item",{staticClass:"field"},[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Join cache mode")])])]),t._v(" "),s("b-form-select",{staticClass:"mb-3 field-right",attrs:{id:"join_cache_mode",value:t.namespace.join_cache_mode,options:t.join_cache_modes,size:"md"},on:{change:function(e){return t.changeNamespace(e,0,"join_cache_mode")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})],1),t._v(" "),s("b-list-group-item",{staticClass:"field"},[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Optimization timeout")])]),t._v(" "),s("i",[t._v("Timeout before background indexes optimization start after last update."),s("br"),t._v("0 - disable optimizations")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespace.optimization_timeout_ms,id:"optimization_timeout_ms",variant:"primary",min:"0",size:"md",type:"number",placeholder:"Set number"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),0,"optimization_timeout_ms")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})],1),t._v(" "),s("b-list-group-item",{staticClass:"field"},[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Optimization sort workers")])]),t._v(" "),s("i",[t._v("Maximum number of background threads of sort indexes optimization."),s("br"),t._v("0 - disable sort optimizations")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespace.optimization_sort_workers,id:"optimization_sort_workers",variant:"primary",min:"0",size:"md",type:"number",placeholder:"Set number"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),0,"optimization_sort_workers")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})],1),t._v(" "),s("b-list-group-item",{staticClass:"field"},[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Start copy policy tx size")])]),t._v(" "),s("i",[t._v("Enable namespace copying for transaction with steps count greater than this value "),s("br"),t._v("(if copy_politics_multiplier also allows this)")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespace.start_copy_policy_tx_size,id:"start_copy_policy_tx_size",variant:"primary",size:"md",type:"number",placeholder:"Set integer value"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),0,"start_copy_policy_tx_size")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})],1),t._v(" "),s("b-list-group-item",{staticClass:"field"},[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Copy policy multiplier")])]),t._v(" "),s("i",[t._v("Disables copy policy if namespace size is greater than copy_policy_multiplier * start_copy_policy_tx_size")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespace.copy_policy_multiplier,id:"copy_policy_multiplier",variant:"primary",size:"md",type:"number",placeholder:"Set integer value"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),0,"copy_policy_multiplier")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})],1),t._v(" "),s("b-list-group-item",{staticClass:"field"},[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Tx size to always copy")])]),t._v(" "),s("i",[t._v("Force namespace copying for transaction with steps count greater than this value")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespace.tx_size_to_always_copy,id:"tx_size_to_always_copy",variant:"primary",size:"md",type:"number",placeholder:"Set integer value"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),0,"tx_size_to_always_copy")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})],1)],1)],1),t._v(" "),s("b-col",{staticClass:"col-sm-5 mt-5",attrs:{sm:"5"}},[s("b-button",{staticClass:"button mr-3",attrs:{variant:"primary"},on:{click:t.saveItem}},[t._v("Save")]),t._v(" "),s("b-button",{staticClass:"button mr-3",attrs:{variant:"danger"},on:{click:function(e){return t.$emit("reset")}}},[t._v("Revert")])],1)],1)},staticRenderFns:[]};var Ne=s("VU/8")(ke,Ae,!1,function(t){s("LD2N")},"data-v-695a48a4",null).exports,Fe={name:"Replication",components:{VueTagsInput:ot.a},computed:u()({},Object(v.d)({items:function(t){return t.items.list}}),Object(v.c)({database:"settings/databaseWithDefault"}),{item:function(){var t=this,e=this.items.find(function(e,s){return!!m.a.has(e,"replication")&&(t.inx=s,!0)});return m.a.isUndefined(e)?e:u()({},e,{replication:u()({timeout_sec:60,enable_compression:!0},e.replication)})},app_name:{get:function(){return m.a.get(this,"item.replication.app_name","")},set:function(t){this.updateItem(this.mutateItem("app_name",t))}},role:{get:function(){return m.a.get(this,"item.replication.role","")},set:function(t){this.updateItem(this.mutateItem("role",t))}},master_dsn:{get:function(){return m.a.get(this,"item.replication.master_dsn","")},set:function(t){this.updateItem(this.mutateItem("master_dsn",t))}},cluster_id:{get:function(){return m.a.get(this,"item.replication.cluster_id","")},set:function(t){this.updateItem(this.mutateItem("cluster_id",t))}},server_id:{get:function(){return m.a.get(this,"item.replication.server_id","")},set:function(t){this.updateItem(this.mutateItem("server_id",t))}},timeout_sec:{get:function(){return m.a.get(this,"item.replication.timeout_sec","")},set:function(t){this.updateItem(this.mutateItem("timeout_sec",t))}},force_sync_on_logic_error:{get:function(){return m.a.get(this,"item.replication.force_sync_on_logic_error","")},set:function(t){this.updateItem(this.mutateItem("force_sync_on_logic_error",t))}},enable_compression:{get:function(){return m.a.get(this,"item.replication.enable_compression",!0)},set:function(t){this.updateItem(this.mutateItem("enable_compression",t))}},force_sync_on_wrong_data_hash:{get:function(){return m.a.get(this,"item.replication.force_sync_on_wrong_data_hash","")},set:function(t){this.updateItem(this.mutateItem("force_sync_on_wrong_data_hash",t))}},namespaces_replication:{get:function(){return m.a.get(this,"item.replication.namespaces",[]).map(function(t){return{text:t}})},set:function(t){var e=t.map(function(t){return t.text});this.updateItem(this.mutateItem("namespaces",e))}}}),data:function(){return{roles:[{value:"none",text:"none"},{value:"slave",text:"slave"},{value:"master",text:"master"}],inx:0,tag:"",serverIdChanged:!1}},methods:{mutateItem:function(t,e){return u()({},this.item,{replication:u()({},this.item.replication,zt()({},t,e))})},validateServerID:function(){var t=this;this.serverIdChanged=!0,this.$nextTick(function(){t.server_id>255&&(t.server_id=255),t.server_id<0&&(t.server_id=0)})},formatter:function(t){return+t.replace(/[^0-9]/g,"")},needDisable:function(t){switch(this.role){case"master":return"cluster_id"!==t&&"server_id"!==t;case"none":return!0;default:return!1}},onTagBlur:function(t){var e=t.target.value,s=[].concat(st()(this.namespaces_replication));s.push({text:e}),this.namespaces_replication=s},updateItem:function(t){this.$store.dispatch("items/localUpdateItem",{item:t,inx:this.inx})},saveItem:function(){var t={db:this.database,namespace:"#config",item:this.item};this.$store.dispatch("items/updateItem",t),this.serverIdChanged&&(this.$store.dispatch("settings/throwError",{response:"Need reload the reindexer"},{root:!0}),this.serverIdChanged=!1)}}},ze={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",[s("h4",{staticClass:"col-sm-12 mt-2"},[t._v("ReplicationConfig")]),t._v(" "),t.item?[s("b-col",{staticClass:"col-sm-8 mt-4",attrs:{cols:"8"}},[s("b-form-group",{attrs:{label:"Replication role"}},[s("b-form-radio-group",{staticClass:"btn-radios-role",attrs:{options:t.roles,buttons:"","button-variant":"outline-primary",size:"md",name:"radio-btn-outline"},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}})],1)],1),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.needDisable("cluster_id"),expression:"!needDisable('cluster_id')"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-form-label text-md-right font-weight-bold",attrs:{for:"cluster_id"}},[t._v("Cluster ID")]),t._v(" "),s("b-form-input",{staticClass:"mb-1",attrs:{disabled:t.needDisable("cluster_id"),id:"cluster_id",variant:"primary",size:"sm",formatter:t.formatter,type:"text",placeholder:"Cluster ID"},model:{value:t.cluster_id,callback:function(e){t.cluster_id=t._n(e)},expression:"cluster_id"}}),t._v(" "),s("i",[t._v("Must be same for client and for master")])],1)]),t._v(" "),s("b-col",{attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-form-label text-md-right font-weight-bold",attrs:{for:"server_id"}},[t._v("Server ID")]),t._v(" "),s("b-form-input",{staticClass:"mb-1",attrs:{disabled:t.needDisable("server_id"),id:"server_id",variant:"primary",size:"sm",formatter:t.formatter,type:"text",placeholder:"Server ID"},on:{input:t.validateServerID},model:{value:t.server_id,callback:function(e){t.server_id=t._n(e)},expression:"server_id"}}),t._v(" "),s("i",[t._v("The ID must be between 0 and 255")]),t._v(" "),s("h5",{directives:[{name:"show",rawName:"v-show",value:t.serverIdChanged,expression:"serverIdChanged"}],staticClass:"alert alert-danger"},[t._v("Restart Reindexer to apply new Server ID")])],1)]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:"slave"===t.role,expression:"role === 'slave'"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-form-label text-md-right font-weight-bold",attrs:{for:"timeout_sec"}},[t._v("Timeout(sec)")]),t._v(" "),s("b-form-input",{staticClass:"mb-1",attrs:{id:"cluster_id",variant:"primary",size:"sm",type:"number",min:"0",placeholder:"Timeout(sec)"},model:{value:t.timeout_sec,callback:function(e){t.timeout_sec=t._n(e)},expression:"timeout_sec"}}),t._v(" "),s("i",[t._v("Network timeout for communication with master, in seconds")])],1)]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.needDisable(),expression:"!needDisable()"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-form-label text-md-right font-weight-bold",attrs:{for:"master_dsn"}},[t._v("DSN to master")]),t._v(" "),s("b-form-input",{staticClass:"mb-1",attrs:{disabled:t.needDisable(),id:"master_dsn",variant:"primary",size:"sm",type:"text",placeholder:"Set cproto schema"},model:{value:t.master_dsn,callback:function(e){t.master_dsn=e},expression:"master_dsn"}}),t._v(" "),s("i",[t._v("Only cproto schema is supported")])],1)]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.needDisable(),expression:"!needDisable()"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"text-md-right"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.force_sync_on_logic_error,expression:"force_sync_on_logic_error",modifiers:{lazy:!0}}],staticClass:"form-check-input",attrs:{disabled:t.needDisable(),id:"force_sync_on_logic_error",type:"checkbox"},domProps:{checked:Array.isArray(t.force_sync_on_logic_error)?t._i(t.force_sync_on_logic_error,null)>-1:t.force_sync_on_logic_error},on:{change:function(e){var s=t.force_sync_on_logic_error,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.force_sync_on_logic_error=s.concat([null])):i>-1&&(t.force_sync_on_logic_error=s.slice(0,i).concat(s.slice(i+1)))}else t.force_sync_on_logic_error=n}}})]),t._v(" "),s("label",{attrs:{for:"force_sync_on_logic_error"}},[s("strong",[t._v("Force resync on logic error conditions")])])])]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.needDisable(),expression:"!needDisable()"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"text-md-right"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.force_sync_on_wrong_data_hash,expression:"force_sync_on_wrong_data_hash",modifiers:{lazy:!0}}],staticClass:"form-check-input",attrs:{disabled:t.needDisable(),id:"force_sync_on_wrong_data_hash",type:"checkbox"},domProps:{checked:Array.isArray(t.force_sync_on_wrong_data_hash)?t._i(t.force_sync_on_wrong_data_hash,null)>-1:t.force_sync_on_wrong_data_hash},on:{change:function(e){var s=t.force_sync_on_wrong_data_hash,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.force_sync_on_wrong_data_hash=s.concat([null])):i>-1&&(t.force_sync_on_wrong_data_hash=s.slice(0,i).concat(s.slice(i+1)))}else t.force_sync_on_wrong_data_hash=n}}})]),t._v(" "),s("label",{attrs:{for:"force_sync_on_wrong_data_hash"}},[s("strong",[t._v("Force resync on wrong data hash conditions")])])])]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.needDisable(),expression:"!needDisable()"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"text-md-right"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.enable_compression,expression:"enable_compression",modifiers:{lazy:!0}}],staticClass:"form-check-input",attrs:{disabled:t.needDisable(),id:"enable_compression",type:"checkbox"},domProps:{checked:Array.isArray(t.enable_compression)?t._i(t.enable_compression,null)>-1:t.enable_compression},on:{change:function(e){var s=t.enable_compression,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.enable_compression=s.concat([null])):i>-1&&(t.enable_compression=s.slice(0,i).concat(s.slice(i+1)))}else t.enable_compression=n}}})]),t._v(" "),s("label",{attrs:{for:"enable_compression"}},[s("strong",[t._v("Enable network traffic compression")])])])]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.needDisable(),expression:"!needDisable()"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-form-label text-md-right font-weight-bold",attrs:{for:"namespaces"}},[t._v("List of namespaces for replication")]),t._v(" "),s("vue-tags-input",{staticClass:"namespace",attrs:{disabled:t.needDisable(),tags:t.namespaces_replication,placeholder:"Add namespace"},on:{"tags-changed":function(e){return t.namespaces_replication=e},blur:t.onTagBlur},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),s("i",[t._v("If emply, all namespaces. All replicated namespaces will become read only for slave")])],1)]),t._v(" "),s("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.needDisable(),expression:"!needDisable()"}],attrs:{cols:"8"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-form-label text-md-right font-weight-bold",attrs:{for:"app_name"}},[t._v("Application name")]),t._v(" "),s("b-form-input",{staticClass:"mb-1",attrs:{id:"app_name",variant:"primary",size:"sm",type:"text",placeholder:"Enter a string"},model:{value:t.app_name,callback:function(e){t.app_name=e},expression:"app_name"}}),t._v(" "),s("i",[t._v("Used by replicator as a login tag")])],1)]),t._v(" "),s("b-col",{staticClass:"col-sm-12 mt-5",attrs:{sm:"5"}},[s("b-button",{staticClass:"button mr-3",attrs:{variant:"primary"},on:{click:t.saveItem}},[t._v("Save")]),t._v(" "),s("b-button",{staticClass:"button",attrs:{variant:"danger"},on:{click:function(e){return t.$emit("reset")}}},[t._v("Revert")])],1)]:[s("div",[t._v("Not found")])]],2)},staticRenderFns:[]};var Me={name:"ConfigPage",components:{DefaultLayout:O,Profiling:Te,Namespaces:Ne,Replication:s("VU/8")(Fe,ze,!1,function(t){s("BzoV"),s("/Gca")},"data-v-25edab0d",null).exports},computed:u()({},Object(v.c)({database:"settings/databaseWithDefault"})),methods:u()({},Object(v.b)({getItemsList:"items/getItemsList"}),{init:function(){if(!m.a.isEmpty(this.database)){var t={db:this.database,namespace:"#config"};this.getItemsList(t)}}}),mounted:function(){this.init()},watch:{database:function(){this.init()}}},Le={render:function(){var t=this.$createElement,e=this._self._c||t;return e("default-layout",[e("div",{attrs:{slot:"page"},slot:"page"},[e("transition",{attrs:{name:"fade"}},[e("div",{staticClass:"selected-namespace"},[e("h5",[this._v("Configuration")])])]),this._v(" "),e("b-tabs",{attrs:{card:""}},[e("b-tab",{attrs:{title:"Profiling"}},[e("Profiling",{on:{reset:this.init}})],1),this._v(" "),e("b-tab",{attrs:{title:"Namespaces"}},[e("Namespaces",{on:{reset:this.init}})],1),this._v(" "),e("b-tab",{attrs:{title:"Replication"}},[e("Replication",{on:{reset:this.init}})],1)],1)],1)])},staticRenderFns:[]},De=s("VU/8")(Me,Le,!1,null,null,null).exports,Pe=s("2kXX"),Re=s.n(Pe),je=s("L/i1"),Oe=s.n(je);function qe(t){return{last_sec_avg_latency_us:"Average latency (execution time) for queries at last second",last_sec_avg_lock_time_us:"Average waiting time for acquiring lock at last second",last_sec_qps:"Count of queries, requested at last second",latency_stddev:"Standard deviation of latency values",max_latency_us:"Maximum latency value",min_latency_us:"Minimal latency value",total_avg_latency_us:"Total latency (execution time) for queries",total_avg_lock_time_us:"Total waiting time for acquiring lock",total_queries_count:"Total count of queries",total_count:"Total transactions count for this namespace",total_copy_count:"Total namespace copy operations",avg_steps_count:"Average steps count in transactions for this namespace",avg_prepare_time_us:"Average transaction preparation time usec",avg_commit_time_us:"Average transaction commit time usec",avg_copy_time_us:"Average namespace copy time usec",min_steps_count:"Minimum steps count in transactions for this namespace",max_steps_count:"Maximum steps count in transactions for this namespace",min_prepare_time_us:"Minimum transaction preparation time usec",max_prepare_time_us:"Maximum transaction preparation time usec",min_commit_time_us:"Minimum transaction commit time usec",max_commit_time_us:"Maximum transaction commit time usec",min_copy_time_us:"Maximum namespace copy time usec",max_copy_time_us:"Minimum namespace copy time usec"}[t]+" ("+t+")"}var Be=function(t){var e=document.getElementById("chartjs-tooltip");if(e||((e=document.createElement("div")).id="chartjs-tooltip",e.innerHTML='<table class="tooltip_chart"></table>',document.body.appendChild(e)),0!==t.opacity){if(e.classList.remove("above","below","no-transform"),t.yAlign?e.classList.add(t.yAlign):e.classList.add("no-transform"),t.body){var s=t.title||[],a=t.body[0].lines,n="<thead>";s.forEach(function(t){n+="<tr><th>"+t+"</th></tr>"}),n+="</thead><tbody>",a.forEach(function(t){var e=t.split(":");n+="<tr><td>"+qe(e[0])+"</td><td>"+e[1]+"</td</tr>"}),n+="</tbody>",e.querySelector("table").innerHTML=n}var i=Oe()(),o=i.x,r=i.y;e.style.opacity=1,e.style.position="absolute",e.style.left=o+"px",e.style.top=r+"px",e.style.fontFamily=m.a.get(t,"_bodyFontFamily"),e.style.fontSize=t.bodyFontSize+"px",e.style.fontStyle=m.a.get(t,"_bodyFontStyle"),e.style.padding=t.yPadding+"px "+t.xPadding+"px",e.style.pointerEvents="none"}else e.style.opacity=0},Ue={name:"PerfstatsPage",components:{DefaultLayout:O,PageStatusNotifier:tt,DataTable:It},computed:u()({},Object(v.d)({database:function(t){return t.settings.database},isLoading:function(t){return t.items.isLoading},items:function(t){return t.items.qList},itemsNames:function(t){return t.items.qList.map(function(t){return t.name})}}),{fields:function(){return k()(m.a.get(this,"items[0].updates",{}))},columns:function(){return["namespace"].concat(st()(this.fields)).map(function(t){return t})},columnsNames:function(){return["namespace"].concat(st()(this.fields)).map(function(t){return t.replace(/_/g," ").replace(/us$/,"ms")})},fieldsTransactions:function(){return k()(m.a.get(this,"items[0].transactions",{}))},columnsTransasctions:function(){return["namespace"].concat(st()(this.fieldsTransactions)).map(function(t){return t})},columnsTransasctionsNames:function(){return["namespace"].concat(st()(this.fieldsTransactions)).map(function(t){return t.replace(/_/g," ").replace(/us$/,"ms")})},updates:function(){var t={labels:this.itemsNames,datasets:[this.datasets("updates")]};if(!this.showEmpty){var e=[];t.datasets[0].data.forEach(function(t,s){0===t&&e.push(s)}),t.datasets[0].data=t.datasets[0].data.filter(function(t,s){return-1===m.a.indexOf(e,s)}),t.labels=t.labels.filter(function(t,s){return-1===m.a.indexOf(e,s)})}return t},selects:function(){var t={labels:this.itemsNames,datasets:[this.datasets("selects")]};if(!this.showEmpty){var e=[];t.datasets[0].data.forEach(function(t,s){0===t&&e.push(s)}),t.datasets[0].data=t.datasets[0].data.filter(function(t,s){return-1===m.a.indexOf(e,s)}),t.labels=t.labels.filter(function(t,s){return-1===m.a.indexOf(e,s)})}return t},transactions:function(){var t={labels:this.itemsNames,datasets:[this.datasets("transactions")]};if(!this.showEmpty){var e=[];t.datasets[0].data.forEach(function(t,s){0===t&&e.push(s)}),t.datasets[0].data=t.datasets[0].data.filter(function(t,s){return-1===m.a.indexOf(e,s)}),t.labels=t.labels.filter(function(t,s){return-1===m.a.indexOf(e,s)})}return t},all_updates:function(){var t=this.items.map(function(t){return t.updates});return m.a.isEmpty(t[0])?[]:this.rounding(t)},all_selects:function(){var t=this.items.map(function(t){return t.selects});return m.a.isEmpty(t[0])?[]:this.rounding(t)},all_transactions:function(){var t=this.items.map(function(t){return t.transactions});return m.a.isEmpty(t[0])?[]:this.rounding(t)},all_selects_table:function(){var t=this.items.map(function(t){return u()({namespace:t.name},t.selects)});return this.showEmpty||(t=this.filterNotEmpty(t)),m.a.isEmpty(t[0])?[]:this.rounding(t)},all_updates_table:function(){var t=this.items.map(function(t){return u()({namespace:t.name},t.updates)});return this.showEmpty||(t=this.filterNotEmpty(t)),m.a.isEmpty(t[0])?[]:this.rounding(t)},all_transactions_table:function(){var t=this.items.map(function(t){return u()({namespace:t.name},t.transactions)});return this.showEmpty||(t=this.filterNotEmpty(t)),m.a.isEmpty(t[0])?[]:this.rounding(t)},updates_last_sec_qps:function(){return this.sumField("last_sec_qps").updates},updates_total_queries_count:function(){return this.sumField("total_queries_count").updates},updates_last_sec_avg_latency_us:function(){return this.averageField("last_sec_avg_latency_us","all_updates")},updates_total_avg_latency_us:function(){return this.averageField("total_avg_latency_us","all_updates")},selects_last_sec_qps:function(){return this.sumField("last_sec_qps").selects},selects_total_queries_count:function(){return this.sumField("total_queries_count").selects},transactions_total_queries_count:function(){return this.sumField("total_count").transactions},selects_last_sec_avg_latency_us:function(){return this.averageField("last_sec_avg_latency_us","all_selects")},selects_total_avg_latency_us:function(){return this.averageField("total_avg_latency_us","all_selects")}}),data:function(){var t=localStorage,e=t.displayTypes,s=void 0===e?null:e,a=t.tabIndex,n=void 0===a?0:a,i=t.selectedFieldsSelect,o=void 0===i?null:i,r=t.selectedFieldsUpdate,c=void 0===r?null:r,l=t.selectedFieldsTransitions,u=void 0===l?null:l;return{updatesChart:null,selectsChart:null,transactionsChart:null,tabIndex:+n,activeField:[],sortOrder:["desc","desc","desc"],rootFields:["selects","updates","transactions"],enabled:!1,selectedFieldsSelect:JSON.parse(o)||["namespace","total_queries_count","total_avg_latency_us"],selectedFieldsUpdate:JSON.parse(c)||["namespace","total_queries_count","total_avg_latency_us"],selectedFieldsTransitions:JSON.parse(u)||["namespace","total_count","total_copy_count","avg_steps_count","avg_prepare_time_us","avg_commit_time_us","avg_copy_time_us"],displayTypes:JSON.parse(s)||["chart","chart","table"],autoRefreshFlag:!1,autoRefreshTimer:null,showEmpty:!1}},methods:u()({},Object(v.b)({getItemsList:"items/getItemsListByQuery",resetStats:"items/createItem"}),{filterNotEmpty:function(t){return t.filter(function(t){var e=!1;return k()(t).forEach(function(s){!m.a.isString(t[s])&&"min_latency_us"!==s&&t[s]>0&&(e=!0)}),e})},toggleAutoRefresh:function(){this.autoRefreshFlag=!this.autoRefreshFlag,this.autoRefreshFlag?this.autoRefreshTimer=setInterval(this.init,5e3):clearInterval(this.autoRefreshTimer)},toggleShowEmpty:function(){this.showEmpty=!this.showEmpty,this.init()},sumField:function(t){return{updates:this.all_updates.reduce(function(e,s){return m.a.isNumber(s[t])?e+s[t]:e},0),selects:this.all_selects.reduce(function(e,s){return m.a.isNumber(s[t])?e+s[t]:e},0),transactions:this.all_transactions.reduce(function(e,s){return m.a.isNumber(s[t])?e+s[t]:e},0)}},averageField:function(t,e){var s=0,a=this[e].reduce(function(e,a){return a[t]>0&&(s+=1),e+a[t]},0);return a?(a/s).toFixed(2):0},datasets:function(t){var e=this,s="milliseconds",a=[],n=[],i=[];this.items.forEach(function(s){var o=m.a.get(s,t),r=m.a.get(o,"["+e.activeField[e.tabIndex]+"]");a.push(.001*r),n.push("#007bff94"),i.push("#fff")});var o=Re()(m.a.max(a)||0),r=o.days,c=o.hours,l=o.minutes,u=o.seconds;return"total_queries_count"===this.activeField[this.tabIndex]||"last_sec_qps"===this.activeField[this.tabIndex]||"total_copy_count"===this.activeField[this.tabIndex]||"avg_steps_count"===this.activeField[this.tabIndex]||"min_steps_count"===this.activeField[this.tabIndex]||"max_steps_count"===this.activeField[this.tabIndex]||"total_count"===this.activeField[this.tabIndex]?(s="units",a=a.map(function(t){return t/.001})):r>0?(s="days",a=a.map(function(t){return Re()(t).days})):c>0?(s="hours",a=a.map(function(t){return Re()(t).hours})):l>0?(s="minutes",a=a.map(function(t){return Re()(t).minutes})):u>0&&(s="seconds",a=a.map(function(t){return Re()(t).seconds})),{label:s,data:a,backgroundColor:n,borderColor:i}},rounding:function(t){return t.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return k()(t).forEach(function(s){switch(s){case"namespace":case"total_queries_count":case"last_sec_qps":case"total_copy_count":case"avg_steps_count":case"min_steps_count":case"max_steps_count":case"total_count":e[s]=t[s];break;default:e[s]=m.a.round(.001*t[s],4)}}),e})},checkEnable:function(){var t=this;if(!m.a.isEmpty(this.database)){var e={q:'select * from #config where type == "profiling"',width:window.innerWidth/P.width,with_columns:1};this.getItemsList({db:this.database,params:e}).then(function(){m.a.get(t,"items[0].profiling.perfstats",!1)?t.enabled=!0:t.$modal.show("redirect")})}},reset:function(){var t=this;this.resetStats({db:this.database,namespace:"#perfstats",item:{},isReset:!0}).then(function(){return t.init()})},init:function(){var t=this;if(!m.a.isEmpty(this.database)&&this.enabled){var e={desc:!0,width:window.innerWidth/P.width,with_columns:1,q:"select * from #perfstats order by '"+this.rootFields[this.tabIndex]+"."+this.activeField[this.tabIndex]+"' "+this.sortOrder[this.tabIndex]};this.getItemsList({db:this.database,params:e}).then(function(){var e=t.activeField[t.tabIndex],s=t.all_updates,a=t.all_selects,n=t.items,i=t.all_transactions;switch(t.tabIndex){case 1:t.updatesChart?(t.updatesChart.data=t.updates,t.updatesChart.options.animation.duration=0,t.updatesChart.update()):t.updatesChart=new ye.a(t.$refs.updatesChart,{type:"horizontalBar",data:t.updates,options:{responsive:!0,tooltips:{enabled:!1,custom:Be,callbacks:{label:function(t){var e=t.index;return W()(s[e]).replace(/{|}|"/g,"").split(",")},title:function(t){var a=t[0].index;return n[a].name+": "+s[a][e]}}},scales:{xAxes:[{ticks:{min:0}}]}}});break;case 2:t.transactionsChart?(t.transactionsChart.data=t.transactions,t.transactionsChart.options.animation.duration=0,t.transactionsChart.update()):t.transactionsChart=new ye.a(t.$refs.transactionsChart,{type:"horizontalBar",data:t.transactions,options:{responsive:!0,tooltips:{enabled:!1,custom:Be,callbacks:{label:function(t){var e=t.index;return W()(i[e]).replace(/{|}|"/g,"").split(",")},title:function(t){var s=t[0].index;return n[s].name+": "+i[s][e]}}},scales:{xAxes:[{ticks:{min:0}}]}}});break;case 0:t.selectsChart?(t.selectsChart.data=t.selects,t.selectsChart.options.animation.duration=0,t.selectsChart.update()):t.selectsChart=new ye.a(t.$refs.selectsChart,{type:"horizontalBar",data:t.selects,options:{responsive:!0,tooltips:{enabled:!1,custom:Be,callbacks:{label:function(t){var e=t.index;return W()(a[e]).replace(/{|}|"/g,"").split(",")},title:function(t){var s=t[0].index;return n[s].name+": "+a[s][e]}}},scales:{xAxes:[{ticks:{min:0}}]}}})}})}},onChangeActiveField:function(t){var e=this.activeField;e[this.tabIndex]=t,this.activeField=[].concat(st()(e)),localStorage.activeField=W()(this.activeField)},onChangeSortOrder:function(t){var e=this.sortOrder;e[this.tabIndex]=t,this.sortOrder=[].concat(st()(e))},humanityField:function(t){return qe(t)},hideModal:function(){this.$modal.hide("redirect")},goToSettings:function(){this.$router.push({name:"ConfigPage"})},onSortChange:m.a.debounce(function(t){var e=t.sortField,s=t.sortOrder,a=e.replace(/ms$/,"").replace(/ $/,"_us").replace(/ /g,"_");this.onChangeActiveField(a),this.onChangeSortOrder(s)},100),onChangeDisplayType:function(t){var e=this.displayTypes;e[this.tabIndex]=t,this.displayTypes=[].concat(st()(e)),localStorage.displayTypes=W()(this.displayTypes)}}),mounted:function(){var t=localStorage.activeField,e=void 0===t?null:t;this.activeField[0]=JSON.parse(e)?JSON.parse(e)[0]:this.fields[0],this.activeField[1]=JSON.parse(e)?JSON.parse(e)[1]:this.fields[0],this.activeField[2]=JSON.parse(e)?JSON.parse(e)[2]:"total_count",this.checkEnable(),this.selectedFieldsUpdate=[].concat(st()(this.selectedFieldsUpdate)),this.selectedFieldsSelect=[].concat(st()(this.selectedFieldsSelect)),this.selectedFieldsTransitions=[].concat(st()(this.selectedFieldsTransitions)),this.$watchAll(["database","tabIndex","activeField","sortOrder"],this.checkEnable),this.$watchAll(["enabled","tabIndex","sortOrder","activeField","displayTypes","database"],this.init)},beforeDestroy:function(){clearInterval(this.autoRefreshTimer)},watch:{fields:function(){this.activeField[0]||(this.activeField[0]=this.fields[0]||"total_queries_count"),this.activeField[1]||(this.activeField[1]=this.fields[0]||"total_queries_count"),this.activeField[2]||(this.activeField[2]="total_count")},selectedFieldsUpdate:function(){localStorage.setItem("selectedFieldsUpdate",W()(this.selectedFieldsUpdate))},selectedFieldsSelect:function(){localStorage.setItem("selectedFieldsSelect",W()(this.selectedFieldsSelect))},selectedFieldsTransitions:function(){localStorage.setItem("selectedFieldsTransitions",W()(this.selectedFieldsTransitions))},tabIndex:function(){localStorage.tabIndex=this.tabIndex},displayTypes:function(){var t=localStorage,e=t.selectedFieldsSelect,s=void 0===e?null:e,a=t.selectedFieldsTransitions,n=void 0===a?null:a,i=t.selectedFieldsUpdate,o=void 0===i?null:i;this.selectedFieldsSelect=JSON.parse(s)||m.a.cloneDeep(this.columns),this.selectedFieldsUpdate=JSON.parse(o)||m.a.cloneDeep(this.columns),this.selectedFieldsTransitions=JSON.parse(n)||m.a.cloneDeep(this.columnsTransasctions)}}},$e={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"selected-namespace"},[s("h5",[t._v("Overal performance statistics")])])]),t._v(" "),s("PageStatusNotifier",{attrs:{isLoadingProgress:t.isLoading,currentDatabaseName:t.database}}),t._v(" "),s("v-modal",{attrs:{name:"redirect",adaptive:!0,scrollable:!0,minWidth:500,minHeight:200}},[s("div",{staticClass:"redirect_message"},[s("h4",[t._v("Performance statistics is disabled")]),t._v(" "),s("div",[t._v("They can be enabled in settings")]),t._v(" "),s("div",{staticClass:"redirect_message_buttons"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.hideModal()}}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.goToSettings()}}},[t._v("Go to setting")])])])]),t._v(" "),s("b-tabs",{attrs:{card:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[s("b-tab",{attrs:{title:"Selects"}},[s("b-row",[s("b-col",{attrs:{md:"12",xl:"8"}},[s("label",{staticClass:"form-check-label",attrs:{for:"displayTypesSelects"}},[t._v("View type:")]),t._v(" "),s("b-dropdown",{attrs:{id:"displayTypesSelects",text:t.displayTypes[t.tabIndex],variant:"dark"}},[s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeDisplayType("chart")}}},[t._v("chart")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeDisplayType("table")}}},[t._v("table")])],1),t._v(" "),s("label",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],staticClass:"form-check-label",attrs:{for:"sortSelects"}},[t._v("Sort:")]),t._v(" "),s("b-dropdown",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],attrs:{id:"sortSelects",text:t.humanityField(t.activeField[t.tabIndex]),variant:"dark"}},t._l(t.fields,function(e){return s("b-dropdown-item-button",{key:e,on:{click:function(s){return t.onChangeActiveField(e)}}},[t._v(t._s(t.humanityField(e)))])}),1)],1),t._v(" "),s("b-col",{attrs:{sm:"12",xl:"2"}},[s("div",{staticClass:"form-check text-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.showEmpty,expression:"showEmpty"}],staticClass:"form-check-input mr-3 mt-2",attrs:{id:"showEmptySelects",type:"checkbox"},domProps:{checked:Array.isArray(t.showEmpty)?t._i(t.showEmpty,null)>-1:t.showEmpty},on:{click:t.toggleShowEmpty,change:function(e){var s=t.showEmpty,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.showEmpty=s.concat([null])):i>-1&&(t.showEmpty=s.slice(0,i).concat(s.slice(i+1)))}else t.showEmpty=n}}}),t._v(" "),s("label",{staticClass:"form-check-label mt-1",attrs:{for:"showEmptySelects"}},[t._v("Show empty")])])]),t._v(" "),s("b-col",{attrs:{sm:"12",xl:"2"}},[s("div",{staticClass:"form-check text-right"},[s("input",{staticClass:"form-check-input mr-3 mt-2",attrs:{id:"autoRefreshSelects",type:"checkbox"},on:{click:t.toggleAutoRefresh}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"autoRefreshSelects"}},[t._v("Auto refresh")])])])],1),t._v(" "),s("b-row",[s("b-col",{attrs:{cols:"4",offset:"8"}},[s("div",{staticClass:"form-check text-right mt-3"},[s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.init}},[t._v("Refresh")]),t._v(" "),s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.reset}},[t._v("Reset")])],1)])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],staticClass:"chart"},[s("canvas",{ref:"selectsChart"})]),t._v(" "),s("data-table",{directives:[{name:"show",rawName:"v-show",value:"table"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'table'"}],staticClass:"mt-1",attrs:{title:"Selects",items:t.all_selects_table,columns:t.columns,columnNames:t.columnsNames,selectedFields:t.selectedFieldsSelect,sortableFields:t.fields,onSortChange:t.onSortChange,sortOrder:t.sortOrder[t.tabIndex]}}),t._v(" "),s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",[s("strong",[t._v("Total сount of queries, requested at last second:")])]),t._v(" "),s("td",[t._v(t._s(t.selects_last_sec_qps))])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Total count of queries:")])]),t._v(" "),s("td",[t._v(t._s(t.selects_total_queries_count))])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Average latency (execution time) for queries at last second:")])]),t._v(" "),s("td",[t._v(t._s(t.selects_last_sec_avg_latency_us)+"ms")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Average latency (execution time) for queries:")])]),t._v(" "),s("td",[t._v(t._s(t.selects_total_avg_latency_us)+"ms")])])])])],1),t._v(" "),s("b-tab",{attrs:{title:"Updates"}},[s("b-row",[s("b-col",{attrs:{md:"12",xl:"8"}},[s("label",{staticClass:"form-check-label",attrs:{for:"displayTypesUpdates"}},[t._v("View type:")]),t._v(" "),s("b-dropdown",{attrs:{id:"displayTypesUpdates",text:t.displayTypes[t.tabIndex],variant:"dark"}},[s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeDisplayType("chart")}}},[t._v("chart")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeDisplayType("table")}}},[t._v("table")])],1),t._v(" "),s("label",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],staticClass:"form-check-label",attrs:{for:"sortUpdates"}},[t._v("Sort:")]),t._v(" "),s("b-dropdown",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],attrs:{id:"sortUpdates",text:t.humanityField(t.activeField[t.tabIndex]),variant:"dark"}},t._l(t.fields,function(e){return s("b-dropdown-item-button",{key:e,on:{click:function(s){return t.onChangeActiveField(e)}}},[t._v(t._s(t.humanityField(e)))])}),1)],1),t._v(" "),s("b-col",{attrs:{sm:"12",xl:"2"}},[s("div",{staticClass:"form-check text-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.showEmpty,expression:"showEmpty"}],staticClass:"form-check-input mr-3 mt-2",attrs:{id:"showEmptyUpdates",type:"checkbox"},domProps:{checked:Array.isArray(t.showEmpty)?t._i(t.showEmpty,null)>-1:t.showEmpty},on:{click:t.toggleShowEmpty,change:function(e){var s=t.showEmpty,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.showEmpty=s.concat([null])):i>-1&&(t.showEmpty=s.slice(0,i).concat(s.slice(i+1)))}else t.showEmpty=n}}}),t._v(" "),s("label",{staticClass:"form-check-label mt-1",attrs:{for:"showEmptyUpdates"}},[t._v("Show empty")])])]),t._v(" "),s("b-col",{attrs:{sm:"12",xl:"2"}},[s("div",{staticClass:"form-check text-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshFlag,expression:"autoRefreshFlag"}],staticClass:"form-check-input mr-3 mt-2",attrs:{id:"autoRefreshUpdates",type:"checkbox"},domProps:{checked:Array.isArray(t.autoRefreshFlag)?t._i(t.autoRefreshFlag,null)>-1:t.autoRefreshFlag},on:{click:t.toggleAutoRefresh,change:function(e){var s=t.autoRefreshFlag,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.autoRefreshFlag=s.concat([null])):i>-1&&(t.autoRefreshFlag=s.slice(0,i).concat(s.slice(i+1)))}else t.autoRefreshFlag=n}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"autoRefreshUpdates"}},[t._v("Auto refresh")])])])],1),t._v(" "),s("b-row",[s("b-col",{attrs:{cols:"4",offset:"8"}},[s("div",{staticClass:"form-check text-right mt-3"},[s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.init}},[t._v("Refresh")]),t._v(" "),s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.reset}},[t._v("Reset")])],1)])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],staticClass:"chart"},[s("canvas",{ref:"updatesChart"})]),t._v(" "),s("data-table",{directives:[{name:"show",rawName:"v-show",value:"table"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'table'"}],staticClass:"mt-1",attrs:{title:"Updates",items:t.all_updates_table,columns:t.columns,columnNames:t.columnsNames,selectedFields:t.selectedFieldsUpdate,sortableFields:t.fields,onSortChange:t.onSortChange,sortOrder:t.sortOrder[t.tabIndex]}}),t._v(" "),s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",[s("strong",[t._v("Total сount of queries, requested at last second:")])]),t._v(" "),s("td",[t._v(t._s(t.updates_last_sec_qps))])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Total count of queries:")])]),t._v(" "),s("td",[t._v(t._s(t.updates_total_queries_count))])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Average latency (execution time) for queries at last second:")])]),t._v(" "),s("td",[t._v(t._s(t.updates_last_sec_avg_latency_us)+"ms")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Average latency (execution time) for queries:")])]),t._v(" "),s("td",[t._v(t._s(t.updates_total_avg_latency_us)+"ms")])])])])],1),t._v(" "),s("b-tab",{attrs:{title:"Transactions"}},[s("b-row",[s("b-col",{attrs:{md:"12",xl:"8"}},[s("label",{staticClass:"form-check-label",attrs:{for:"displayTypesTransactions"}},[t._v("View type:")]),t._v(" "),s("b-dropdown",{attrs:{id:"displayTypesTransactions",text:t.displayTypes[t.tabIndex],variant:"dark"}},[s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeDisplayType("chart")}}},[t._v("chart")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){return t.onChangeDisplayType("table")}}},[t._v("table")])],1),t._v(" "),s("label",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],staticClass:"form-check-label",attrs:{for:"sortTransactions"}},[t._v("Sort:")]),t._v(" "),s("b-dropdown",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],attrs:{id:"sortTransactions",text:t.humanityField(t.activeField[t.tabIndex]),variant:"dark"}},t._l(t.fieldsTransactions,function(e){return s("b-dropdown-item-button",{key:e,on:{click:function(s){return t.onChangeActiveField(e)}}},[t._v(t._s(t.humanityField(e)))])}),1)],1),t._v(" "),s("b-col",{attrs:{sm:"12",xl:"2"}},[s("div",{staticClass:"form-check text-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.showEmpty,expression:"showEmpty"}],staticClass:"form-check-input mr-3 mt-2",attrs:{id:"showEmptyTransactions",type:"checkbox"},domProps:{checked:Array.isArray(t.showEmpty)?t._i(t.showEmpty,null)>-1:t.showEmpty},on:{click:t.toggleShowEmpty,change:function(e){var s=t.showEmpty,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.showEmpty=s.concat([null])):i>-1&&(t.showEmpty=s.slice(0,i).concat(s.slice(i+1)))}else t.showEmpty=n}}}),t._v(" "),s("label",{staticClass:"form-check-label mt-1",attrs:{for:"showEmptyTransactions"}},[t._v("Show empty")])])]),t._v(" "),s("b-col",{attrs:{sm:"12",xl:"2"}},[s("div",{staticClass:"form-check text-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshFlag,expression:"autoRefreshFlag"}],staticClass:"form-check-input mr-3 mt-2",attrs:{id:"autoRefreshTransactions",type:"checkbox"},domProps:{checked:Array.isArray(t.autoRefreshFlag)?t._i(t.autoRefreshFlag,null)>-1:t.autoRefreshFlag},on:{click:t.toggleAutoRefresh,change:function(e){var s=t.autoRefreshFlag,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.autoRefreshFlag=s.concat([null])):i>-1&&(t.autoRefreshFlag=s.slice(0,i).concat(s.slice(i+1)))}else t.autoRefreshFlag=n}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"autoRefreshTransactions"}},[t._v("Auto refresh")])])])],1),t._v(" "),s("b-row",[s("b-col",{attrs:{cols:"4",offset:"8"}},[s("div",{staticClass:"form-check text-right mt-3"},[s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.init}},[t._v("Refresh")]),t._v(" "),s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.reset}},[t._v("Reset")])],1)])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'chart'"}],staticClass:"chart"},[s("canvas",{ref:"transactionsChart"})]),t._v(" "),s("data-table",{directives:[{name:"show",rawName:"v-show",value:"table"===t.displayTypes[t.tabIndex],expression:"displayTypes[tabIndex] === 'table'"}],staticClass:"mt-1",attrs:{title:"Transactions",items:t.all_transactions_table,columns:t.columnsTransasctions,columnNames:t.columnsTransasctionsNames,selectedFields:t.selectedFieldsTransitions,sortableFields:t.fieldsTransactions,onSortChange:t.onSortChange,sortOrder:t.sortOrder[t.tabIndex]}}),t._v(" "),s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",[s("strong",[t._v("Total count of transactions:")])]),t._v(" "),s("td",[t._v(t._s(t.transactions_total_queries_count))])])])])],1)],1)],1)])},staticRenderFns:[]};var Qe=s("VU/8")(Ue,$e,!1,function(t){s("taED")},"data-v-12cca162",null).exports,Xe={name:"QueriesPerfstatsPage",components:{DefaultLayout:O,PageStatusNotifier:tt,DataTable:It},props:{page:{type:Number,default:jt.page},pageSize:{type:Number||String,default:jt.pageSize}},computed:u()({},Object(v.d)({database:function(t){return t.settings.database},isLoading:function(t){return t.items.isLoading},items:function(t){return t.items.qList},itemsNames:function(t){return t.items.qList.map(function(t){return t.query})},totalItems:function(t){return t.items.qTotal}}),{paginationInfo:function(){if(!this.totalItems)return"No items found";var t=this.params.page*this.params.pageSize,e=this.totalItems<t?this.totalItems:t;return"showing items from "+(this.params.page-1)*this.params.pageSize+" to "+e+" of "+this.totalItems},pageSizeVariants:function(){return Rt},fields:function(){return k()(m.a.get(this,"items[0]",{}))},columns:function(){return[].concat(st()(this.fields)).map(function(t){return t})},columnsNames:function(){return[].concat(st()(this.fields)).map(function(t){return t.replace(/_/g," ").replace(/us$/,"")})},all_selects:function(){return m.a.isEmpty(this.items[0])?[]:this.rounding(this.items)},all_selects_table:function(){return m.a.isEmpty(this.items[0])?[]:this.rounding(this.items)}}),data:function(){var t=this.$props;return{updatesChart:null,selectsChart:null,activeField:"",sortOrder:"desc",rootFields:["selects","updates"],params:{page:t.page,pageSize:t.pageSize},enabled:!1,selectedFields:["last_sec_avg_latency_us","last_sec_avg_lock_time_us","last_sec_qps","latency_stddev","longest_query","max_latency_us","min_latency_us","query","total_avg_latency_us","total_avg_lock_time_us","total_queries_count"],autoRefreshFlag:!1,autoRefreshTimer:null}},methods:u()({},Object(v.b)({getItemsList:"items/getItemsListByQuery",resetStats:"items/createItem"}),{toggleAutoRefresh:function(){this.autoRefreshFlag=!this.autoRefreshFlag,this.autoRefreshFlag?this.autoRefreshTimer=setInterval(this.init,5e3):clearInterval(this.autoRefreshTimer)},sumField:function(t){return this.all_selects.reduce(function(e,s){return m.a.isNumber(s[t])?e+s[t]:e},0)},averageField:function(t,e){var s=0,a=this[e].reduce(function(e,a){return a[t]>0&&(s+=1),e+a[t]},0);return a?(a/s).toFixed(2):0},rounding:function(t){var e=this;return t.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s={};return k()(t).forEach(function(a){if("query"===a||"longest_query"===a||"total_queries_count"===a||"last_sec_qps"===a)s[a]=t[a];else{var n=Re()(.001*t[a]||0),i=n.days,o=n.hours,r=n.minutes,c=n.seconds,l=n.milliseconds;s[a]=i>0?24*i*60*60*1e3+60*o*60*1e3+60*r*1e3+1e3*c+l:o>0?60*o*60*1e3+60*r*1e3+1e3*c+l:r>0?60*r*1e3+1e3*c+l:c>0?1e3*c+l:m.a.round(.001*t[a],4);var u=a.replace(/_/g," ").replace(/us$/,""),d=e.columnsNames.indexOf(u);d>-1&&(e.columnsNames[d]=e.columnsNames[d]+" (ms)")}}),s})},checkEnable:function(){var t=this;if(!m.a.isEmpty(this.database)){var e={q:'select * from #config where type == "profiling"',width:window.innerWidth/P.width,with_columns:1};this.getItemsList({db:this.database,params:e}).then(function(){m.a.get(t,"items[0].profiling.queriesperfstats",!1)?t.enabled=!0:t.$modal.show("redirect")})}},onPageChange:function(t){this.params.page=t,this.init()},onPageSizeChange:function(t){this.params.pageSize=t,this.params.page=1,this.init()},reset:function(){var t=this;this.resetStats({db:this.database,namespace:"#queriesperfstats",item:{},isReset:!0}).then(function(){return t.init()})},init:function(){if(!m.a.isEmpty(this.database)&&this.enabled){var t=u()({desc:!0,q:"select * from #queriesperfstats order by '"+this.activeField+"' "+this.sortOrder,width:window.innerWidth/P.width,with_columns:1},this.params);this.getItemsList({db:this.database,params:t})}},onChangeActiveField:function(t){this.activeField=t},onChangeSortOrder:function(t){this.sortOrder=t},humanityField:function(t){return qe(t)},hideModal:function(){this.$modal.hide("redirect")},goToSettings:function(){this.$router.push({name:"ConfigPage"})},onSortChange:function(t){var e=t.sortField,s=t.sortOrder,a=e.replace(/\(ms\)$/,"").replace(/ $/,"_us").replace(/ /g,"_");this.onChangeActiveField(a),this.onChangeSortOrder(s)}}),mounted:function(){this.checkEnable(),this.$watchAll(["database","sortOrder"],this.checkEnable),this.$watchAll(["enabled","tabIndex","sortOrder","activeField","database"],this.init)},beforeDestroy:function(){clearInterval(this.autoRefreshTimer)},watch:{fields:function(){this.activeField||(this.activeField="total_avg_latency_us")}}},Ge={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"selected-namespace"},[s("h5",[t._v("Queries performance statistics")])])]),t._v(" "),s("PageStatusNotifier",{attrs:{isLoadingProgress:t.isLoading,currentDatabaseName:t.database}}),t._v(" "),s("v-modal",{attrs:{name:"redirect",adaptive:!0,scrollable:!0,minWidth:500,minHeight:200}},[s("div",{staticClass:"redirect_message"},[s("h4",[t._v("Query performance statistics is disabled")]),t._v(" "),s("div",[t._v("They can be enabled in settings")]),t._v(" "),s("div",{staticClass:"redirect_message_buttons"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.hideModal()}}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.goToSettings()}}},[t._v("Go to setting")])])])]),t._v(" "),s("div",[s("b-row",[s("b-col",{attrs:{offset:"6",cols:"6"}},[s("div",{staticClass:"form-check text-right"},[s("input",{staticClass:"form-check-input mr-3 mt-2",attrs:{id:"autoRefreshSelects",type:"checkbox"},on:{click:t.toggleAutoRefresh}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"autoRefreshSelects"}},[t._v("Auto refresh")]),t._v(" "),s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.init}},[t._v("Refresh")]),t._v(" "),s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.reset}},[t._v("Reset")])],1)])],1),t._v(" "),s("b-row",[s("b-col",{attrs:{cols:"7",offset:"3"}},[s("center",[s("strong",{staticClass:"pagin"},[t._v(t._s(t.paginationInfo))])])],1),t._v(" "),s("b-col",{attrs:{cols:"2"}},[s("div",{staticClass:"pagin"},[s("b-pagination",{staticClass:"float-right ml-2",attrs:{size:"sm","hide-ellipsis":"","hide-goto-end-buttons":"",limit:null,"total-rows":t.totalItems,"per-page":t.params.pageSize},on:{change:t.onPageChange},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}}),t._v(" "),s("b-dropdown",{staticClass:"float-right",attrs:{size:"sm",variant:"primary",text:String(t.params.pageSize)}},t._l(t.pageSizeVariants,function(e){return s("b-dropdown-item",{key:e,on:{click:function(s){return t.onPageSizeChange(e)}}},[t._v(t._s(e)+"\n                ")])}),1)],1)])],1),t._v(" "),s("data-table",{staticClass:"mt-1 queries_table",attrs:{items:t.all_selects_table,columns:t.columns,columnNames:t.columnsNames,selectedFields:t.selectedFields,sortableFields:t.fields,onSortChange:t.onSortChange,sortOrder:t.sortOrder}})],1)],1)])},staticRenderFns:[]};var He=s("VU/8")(Xe,Ge,!1,function(t){s("w1/J"),s("5Wvt")},"data-v-99fe8cc2",null).exports,Ve={name:"MetaPage",components:{DefaultLayout:O,PageStatusNotifier:tt,DataTable:It,Modal:S,Octicon:f.a},props:{page:{type:Number,default:jt.page},pageSize:{type:Number,default:jt.pageSize},db:{type:String,default:jt.db},namespace:{type:String,default:jt.namespace}},data:function(){var t=this.$props;return{params:u()({},t),newMeta:{key:null,value:null},columns:["key","value","show_details"],tableItems:[],mutableItems:[]}},computed:u()({},Object(v.d)({dbUsed:function(t){return t.settings.database},namespaceUsed:function(t){return t.settings.namespace||t.namespaces.one.name},isLoading:function(t){return t.metas.isLoading},metas:function(t){return t.metas.list},totalItems:function(t){return t.metas.totalItems}}),{keymap:function(){var t=this;return{"shift+right":function(){return t.onPageChange(t.params.page+1)},"shift+left":function(){return t.onPageChange(t.params.page-1)}}},pageSizeVariants:function(){return Rt},selectedDb:function(){return this.db||this.dbUsed},selectedNs:function(){return this.namespace||this.namespaceUsed},selectedFields:function(){return m.a.cloneDeep(this.columns)},allDataSpecified:function(){return this.selectedDb&&this.selectedNs}}),methods:u()({},Object(v.b)({selectDatabase:"settings/selectDatabase",selectNamespace:"settings/selectNamespace",getNamespaceOne:"namespaces/getNamespaceOne",getMetas:"metas/getMetas",setMeta:"metas/setMeta"}),{onPageChange:function(t){this.params.page=t,this.onQuery()},onPageSizeChange:function(t){this.params.pageSize=t,this.params.page=1,this.onQuery()},openNewMetaModal:function(){this.$modal.show("newMeta")},addMeta:function(){var t=this,e=m.a.pickBy(this.params),s={db:this.selectedDb,namespace:this.selectedNs,item:u()({},this.newMeta),params:u()({with_values:!0},e)};this.setMeta(s).then(function(){t.$modal.hide("newMeta"),t.newMeta={key:null,value:null}})},onQuery:function(){var t=this;if(this.allDataSpecified){this.params.db=this.selectedDb,this.params.namespace=this.selectedNs;var e=m.a.pickBy(this.params),s={db:this.selectedDb,namespace:this.selectedNs,params:u()({with_values:!0},e)},a=m.a.mapKeys(e,function(t,e){return m.a.snakeCase(e)});this.getMetas(s).then(function(){t.$router.push({path:t.$router.path,query:a})})}},onItemUpdateQuestion:function(t){var e=W()(t,null,2);this.$cmodal.show({header:"Are you sure?",message:"This action will change the existed item:",strongMessage:e,event:"updateMeta",eventParams:t})}}),mounted:function(){var t=this;this.selectDatabase(this.selectedDb),this.selectNamespace(this.selectedNs),this.allDataSpecified&&this.getNamespaceOne({db:this.selectedDb,namespace:this.selectedNs}).then(function(){t.onQuery()})},watch:{selectedNs:function(){this.onQuery()},metas:function(){this.tableItems=m.a.cloneDeep(this.metas),this.mutableItems=m.a.cloneDeep(this.metas)}}},We={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.keymap,expression:"keymap"}],attrs:{slot:"page"},slot:"page"},[s("PageStatusNotifier",{attrs:{isLoadingProgress:t.isLoading,currentDatabaseName:t.selectedDb,currentNamespaceName:t.selectedNs}}),t._v(" "),t.allDataSpecified?s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("b-btn",{staticClass:"mb-3 mt-3",attrs:{size:"md",variant:"success"},on:{click:t.openNewMetaModal}},[t._v("Add key")])],1),t._v(" "),s("b-col",{attrs:{cols:"9"}},[s("b-pagination",{staticClass:"float-right ml-2",attrs:{size:"sm","hide-ellipsis":"","hide-goto-end-buttons":"",limit:null,"total-rows":t.totalItems,"per-page":t.params.pageSize},on:{change:t.onPageChange},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}}),t._v(" "),s("b-dropdown",{staticClass:"float-right",attrs:{size:"sm",variant:"primary",text:String(t.params.pageSize)}},t._l(t.pageSizeVariants,function(e){return s("b-dropdown-item",{key:e,on:{click:function(s){return t.onPageSizeChange(e)}}},[t._v(t._s(e)+"\n            ")])}),1)],1),t._v(" "),s("b-col",{attrs:{cols:"12"}},[s("b-table",{attrs:{striped:"",bordered:"",hover:"",fixed:"",small:"","no-local-sorting":"",items:t.tableItems,fields:t.columns},scopedSlots:t._u([{key:"show_details",fn:function(t){return[s("b-button",{staticClass:"mr-2",attrs:{variant:t.detailsShowing?"primary":"",size:"sm"},on:{click:function(e){return e.stopPropagation(),t.toggleDetails(e)}}},[s("octicon",{attrs:{name:"pencil"}})],1)]}},{key:"row-details",fn:function(e){return[s("b-card",[s("b-row",[s("b-col",[s("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"New value of metakey"},model:{value:t.mutableItems[e.index].value,callback:function(s){t.$set(t.mutableItems[e.index],"value",s)},expression:"mutableItems[row.index].value"}})],1),t._v(" "),s("b-col",[s("b-btn",{staticClass:"button",attrs:{variant:"success"},on:{click:function(s){return t.onItemUpdateQuestion(t.mutableItems[e.index])}}},[t._v("Save changes")])],1)],1)],1)]}}],null,!1,3051849978)})],1)],1)],1):t._e(),t._v(" "),s("v-modal",{attrs:{name:"newMeta",adaptive:!0,minWidth:500,maxHeight:225}},[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.addMeta(e)}}},[s("b-card",{attrs:{title:"Create metakey"}},[s("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"Enter key"},model:{value:t.newMeta.key,callback:function(e){t.$set(t.newMeta,"key",e)},expression:"newMeta.key"}}),t._v(" "),s("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"Enter value"},model:{value:t.newMeta.value,callback:function(e){t.$set(t.newMeta,"value",e)},expression:"newMeta.value"}}),t._v(" "),s("div",{staticClass:"text-right"},[s("b-button",{staticClass:"button",attrs:{type:"submit",variant:"success"}},[t._v("Create")])],1)],1)],1)],1)],1)])},staticRenderFns:[]},Je=s("VU/8")(Ve,We,!1,null,null,null).exports,Ye={name:"ActivityPage",components:{DefaultLayout:O,DataTable:It},data:function(){return{columns:["query","client","query_start","query_id","state"],columnsNames:["Query","Client","Query start","Query Id","State"],sortField:"",sortOrder:"desc",webroutes:E,autoRefreshFlag:!1,autoRefreshTimer:null}},computed:u()({},Object(v.d)({database:function(t){return t.settings.database},error:function(t){return t.items.error}}),Object(v.c)({items:"items/itemsForActivityState"}),{selectedFields:function(){return m.a.cloneDeep(this.columns)},table_items:function(){var t=m.a.sortBy(this.items,[this.sortField]);return"desc"===this.sortOrder?t.reverse():t}}),methods:u()({},Object(v.b)({getItemsList:"items/getItemsList"}),{toggleAutoRefresh:function(){this.autoRefreshFlag=!this.autoRefreshFlag,this.autoRefreshFlag?this.autoRefreshTimer=setInterval(this.init,5e3):clearInterval(this.autoRefreshTimer)},onSortChange:function(t){var e=t.sortField,s=t.sortOrder,a=e.replace(/ /g,"_");this.sortField=a.toLowerCase(),this.sortOrder=s},init:function(){if(this.database){var t={db:this.database,namespace:"#activitystats",params:{width:window.innerWidth/P.width,with_columns:1,sort_field:this.sortField,sort_order:this.sortOrder}};this.getItemsList(t)}}}),mounted:function(){this.init(),this.$watchAll(["database","sortOrder"],this.init)}},Ke={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"selected-namespace"},[s("h5",[t._v("Current activities statistics")])])]),t._v(" "),t.error?[s("h5",[t._v('Make sure that "activity" enabled in '),s("b-link",{attrs:{to:t.webroutes.config}},[t._v("Profiling")])],1)]:t._e(),t._v(" "),t.items?t._e():[s("div",[t._v("Not found")])],t._v(" "),s("b-row",[s("b-col",{attrs:{offset:"6",cols:"6"}},[s("div",{staticClass:"form-check text-right"},[s("input",{staticClass:"form-check-input mr-3 mt-2",attrs:{id:"autoRefreshSelects",type:"checkbox"},on:{click:t.toggleAutoRefresh}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"autoRefreshSelects"}},[t._v("Auto refresh")]),t._v(" "),s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.init}},[t._v("Refresh")])],1)])],1),t._v(" "),s("data-table",{staticClass:"mt-1 queries_table",attrs:{items:t.table_items,columns:t.columns,columnNames:t.columnsNames,selectedFields:t.selectedFields,sortableFields:t.columns,onSortChange:t.onSortChange,sortOrder:t.sortOrder}})],2)])},staticRenderFns:[]};var Ze=s("VU/8")(Ye,Ke,!1,function(t){s("Vgni")},null,null).exports,ts={name:"ClientsStatsPage",components:{DefaultLayout:O,DataTable:It},props:{page:{type:Number,default:jt.page},pageSize:{type:Number||String,default:jt.pageSize}},data:function(){var t=this.$props,e=t.page,s=t.pageSize;return{columns:["connection_id","ip","user_name","db_name","sent_bytes","recv_bytes","user_rights","start_time","current_activity","app_name"],columnsNames:["Connection ID","Ip","User name","DB name","Sent bytes","Recv bytes","User rights","Start time","Current activity","Application name"],sortField:"",sortOrder:"desc",webroutes:E,autoRefreshFlag:!1,autoRefreshTimer:null,params:{page:e,pageSize:s}}},computed:u()({},Object(v.d)({database:function(t){return t.settings.database},error:function(t){return t.items.error},items:function(t){return t.items.list},totalItems:function(t){return t.items.total}}),{paginationInfo:function(){if(!this.totalItems)return"No items found";var t=this.params.page*this.params.pageSize,e=this.totalItems<t?this.totalItems:t;return"showing items from "+(this.params.page-1)*this.params.pageSize+" to "+e+" of "+this.totalItems},pageSizeVariants:function(){return Rt},selectedFields:function(){return m.a.cloneDeep(this.columns)},table_items:function(){var t=m.a.sortBy(this.items.map(function(t){return u()({},t,{start_time:h.a.unix(t.start_time).format("DD.MM.YYYY HH:MM:ss")})}),[this.sortField]);return"desc"===this.sortOrder?t.reverse():t}}),methods:u()({},Object(v.b)({getItemsList:"items/getItemsList"}),{onPageChange:function(t){this.params.page=t,this.init()},onPageSizeChange:function(t){this.params.pageSize=t,this.params.page=1,this.init()},toggleAutoRefresh:function(){this.autoRefreshFlag=!this.autoRefreshFlag,this.autoRefreshFlag?this.autoRefreshTimer=setInterval(this.init,5e3):clearInterval(this.autoRefreshTimer)},onSortChange:function(t){var e=t.sortField,s=t.sortOrder,a=e.replace(/ /g,"_");this.sortField=a.toLowerCase(),this.sortOrder=s},init:function(){if(this.database){var t={db:this.database,namespace:"#clientsstats",params:u()({},this.params,{width:window.innerWidth/P.width,with_columns:1,sort_field:this.sortField,sort_order:this.sortOrder})};this.getItemsList(t)}}}),mounted:function(){this.init(),this.$watchAll(["database","sortOrder"],this.init)}},es={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"selected-namespace"},[s("h5",[t._v("Clients statistics")])])]),t._v(" "),s("b-row",[s("b-col",{attrs:{offset:"6",cols:"6"}},[s("div",{staticClass:"form-check text-right"},[s("input",{staticClass:"form-check-input mr-3 mt-2",attrs:{id:"autoRefreshSelects",type:"checkbox"},on:{click:t.toggleAutoRefresh}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"autoRefreshSelects"}},[t._v("Auto refresh")]),t._v(" "),s("b-button",{staticClass:"button ml-3",attrs:{variant:"primary"},on:{click:t.init}},[t._v("Refresh")])],1)])],1),t._v(" "),s("b-row",[s("b-col",{attrs:{cols:"7",offset:"3"}},[s("center",[s("strong",{staticClass:"pagin"},[t._v(t._s(t.paginationInfo))])])],1),t._v(" "),s("b-col",{attrs:{cols:"2"}},[s("div",{staticClass:"pagin"},[s("b-pagination",{staticClass:"float-right ml-2",attrs:{size:"sm","hide-ellipsis":"","hide-goto-end-buttons":"",limit:null,"total-rows":t.totalItems,"per-page":t.params.pageSize},on:{change:t.onPageChange},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}}),t._v(" "),s("b-dropdown",{staticClass:"float-right",attrs:{size:"sm",variant:"primary",text:String(t.params.pageSize)}},t._l(t.pageSizeVariants,function(e){return s("b-dropdown-item",{key:e,on:{click:function(s){return t.onPageSizeChange(e)}}},[t._v(t._s(e)+"\n            ")])}),1)],1)])],1),t._v(" "),s("data-table",{staticClass:"mt-1 queries_table",attrs:{items:t.table_items,columns:t.columns,columnNames:t.columnsNames,selectedFields:t.selectedFields,sortableFields:t.columns,onSortChange:t.onSortChange,sortOrder:t.sortOrder}})],1)])},staticRenderFns:[]};var ss=s("VU/8")(ts,es,!1,function(t){s("kydX")},null,null).exports,as={name:"Namespaces",components:{DefaultLayout:O,Editor:nt.a},props:{namespace:{type:String,default:jt.namespace}},computed:u()({},Object(v.d)({items:function(t){return t.items.list},schemaObj:function(t){return t.namespaces.schema},namespaceFromSettings:function(t){return t.namespaces.one.name}}),Object(v.c)({database:"settings/databaseWithDefault",namespacesSuggest:"namespaces/namesWithoutHash"}),{item:function(){var t=this,e=this.items.find(function(e,s){return!!m.a.has(e,"namespaces")&&(t.inx=s,!0)});return e},index:function(){var t=this,e=-1;return this.namespaces.forEach(function(s,a){s.namespace===t.namespace&&(e=a)}),e}}),data:function(){return{use_default:!0,rightJSON:!0,namespaces:[],schema:"{}",log_levels:[{value:"none",text:"none"},{value:"error",text:"error"},{value:"warning",text:"warning"},{value:"info",text:"info"},{value:"trace",text:"trace"}],lazy_loads:[{value:!0,text:"on"},{value:!1,text:"off"}],join_cache_modes:[{value:"off",text:"off"},{value:"on",text:"on"},{value:"aggressive",text:"aggressive"}],inx:0,fields:[{key:"namespace"},{key:"log_level"},{key:"join_cache_mode"},{key:"optimization_timeout_ms"},{key:"optimization_sort_workers"},{key:"start_copy_policy_tx_size"},{key:"copy_policy_multiplier"},{key:"tx_size_to_always_copy"}]}},methods:u()({},Object(v.b)({throwError:"settings/throwError",getItemsList:"items/getItemsList",getNamespaceOne:"namespaces/getNamespaceOne",updateSchema:"namespaces/updateSchema",getSchema:"namespaces/getSchema"}),{applyEditorChanges:function(t){this.schema=t},resetSchema:function(){this.schema="{}"},saveSchema:function(){try{var t=JSON.parse(this.schema);this.updateSchema({db:this.database,namespace:this.namespace,schema:t}),this.rightJSON=!0}catch(t){this.$store.dispatch("settings/throwError",{response:"parsing error"},{root:!0}),this.rightJSON=!1}},changeNamespace:function(t,e,s){this.namespaces[e]=u()({},this.namespaces[e],zt()({},s,t)),this.namespaces=[].concat(st()(this.namespaces))},saveItem:function(){var t={db:this.database,namespace:"#config",item:u()({},this.item,{namespaces:[].concat(st()(this.namespaces))})};this.$store.dispatch("items/updateItem",t)},init:function(){var t=this;if(!m.a.isEmpty(this.database)){var e={db:this.database,namespace:"#config"};if(!this.namespace)return void this.$router.push({query:{namespace:this.namespaceFromSettings,db:this.database}});this.getNamespaceOne({db:this.database,namespace:this.namespace}),this.getSchema({db:this.database,namespace:this.namespace}).then(function(){t.schema=W()(t.schemaObj,null,"  "),t.rightJSON=!0}),this.getItemsList(e).then(function(){t.namespaces=m.a.get(t.item,"namespaces",[]).map(function(t){return u()({optimization_timeout_ms:800,optimization_sort_workers:4,start_copy_policy_tx_size:1e4,copy_policy_multiplier:5,tx_size_to_always_copy:1e5},t)}),t.namespaces[t.index]?t.use_default=!1:t.use_default=!0})}}}),mounted:function(){this.init()},watch:{namespaces:function(){var t=this;this.namespaces.forEach(function(e,s){var a=e.namespace;t.$refs["suggest_"+s]&&a!==t.$refs["suggest_"+s].searchInput&&(t.$refs["suggest_"+s].searchInput=a)})},namespace:function(t){this.init(),this.namespaces[this.index]&&this.namespaces[this.index].namespace===t?this.use_default=!1:this.use_default=!0},use_default:function(t){var e=this;if(t)this.namespaces=this.namespaces.filter(function(t){return t.namespace!==e.namespace});else{var s=!1;this.namespaces.forEach(function(t){t.namespace===e.namespace&&(s=!0)}),s||this.namespaces.push(u()({},Ie,{namespace:this.namespace}))}}}},ns={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("default-layout",[s("div",{attrs:{slot:"page"},slot:"page"},[s("b-tabs",{attrs:{card:""}},[s("b-tab",{attrs:{title:"Config"}},[s("b-row",[s("b-col",{attrs:{cols:"24"}},[s("div",{staticClass:"ml-3"},[s("label",{attrs:{for:"default_ch"}},[t._v("Use default config")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.use_default,expression:"use_default"}],staticClass:"ml-2",attrs:{id:"default_ch",type:"checkbox"},domProps:{checked:Array.isArray(t.use_default)?t._i(t.use_default,null)>-1:t.use_default},on:{change:function(e){var s=t.use_default,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.use_default=s.concat([null])):i>-1&&(t.use_default=s.slice(0,i).concat(s.slice(i+1)))}else t.use_default=n}}})])])],1),t._v(" "),s("b-row",[!t.use_default&&t.namespaces[t.index]?s("b-col",{attrs:{cols:"12"}},[s("h5",{directives:[{name:"show",rawName:"v-show",value:"*"!==t.namespaces[t.index].namespace,expression:"namespaces[index].namespace !== '*'"}]},[t._v(t._s(t.namespaces[t.index].namespace))]),t._v(" "),"*"!==t.namespaces[t.index].namespace?s("b-list-group",{staticClass:"mb-4 setting"},t._l(t.fields,function(e,a){return s("b-list-group-item",{key:a,staticClass:"field"},["log_level"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Log level")])]),t._v(" "),s("i",[t._v("Log level of queries core logger")])]),t._v(" "),s("b-form-select",{staticClass:"field-right",attrs:{id:"log_level",value:t.namespaces[t.index].log_level,options:t.log_levels,size:"md"},on:{change:function(e){return t.changeNamespace(e,t.index,"log_level")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"optimization_timeout_ms"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Optimization timeout")])]),t._v(" "),s("i",[t._v("Timeout before background indexes optimization start after last update."),s("br"),t._v("0 - disable optimizations")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespaces[t.index].optimization_timeout_ms,id:"optimization_timeout_ms",variant:"primary",min:"0",size:"md",type:"number",placeholder:"Set number"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),t.index,"optimization_timeout_ms")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"optimization_sort_workers"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Optimization sort workers")])]),t._v(" "),s("i",[t._v("Maximum number of background threads of sort indexes optimization."),s("br"),t._v("0 - disable sort optimizations")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespaces[t.index].optimization_sort_workers,id:"optimization_sort_workers",variant:"primary",min:"0",size:"md",type:"number",placeholder:"Set number"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),t.index,"optimization_sort_workers")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"join_cache_mode"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Join cache mode")])])]),t._v(" "),s("b-form-select",{staticClass:"mb-3 field-right",attrs:{id:"join_cache_mode",value:t.namespaces[t.index].join_cache_mode,options:t.join_cache_modes,size:"md"},on:{change:function(e){return t.changeNamespace(e,t.index,"join_cache_mode")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"start_copy_politics_count"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Start copy politics count")])]),t._v(" "),s("i",[t._v("Copy namespace policts will start only after item's count become greater in this param")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespaces[t.index].start_copy_politics_count,id:"start_copy_politics_count",variant:"primary",size:"md",type:"number",placeholder:"Set start copy namespace policts"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),t.index,"start_copy_politics_count")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"merge_limit_count"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Merge limit count")])]),t._v(" "),s("i",[t._v("Merge write namespace after get thi count of operations")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespaces[t.index].merge_limit_count,id:"merge_limit_count",variant:"primary",size:"md",type:"number",placeholder:"Set count operations namespace merge"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),t.index,"merge_limit_count")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"start_copy_policy_tx_size"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Start copy policy tx size")])]),t._v(" "),s("i",[t._v("Enable namespace copying for transaction with steps count greater than this value "),s("br"),t._v("(if copy_politics_multiplier also allows this)")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespaces[t.index].start_copy_policy_tx_size,id:"start_copy_policy_tx_size",variant:"primary",size:"md",type:"number",placeholder:"Set integer value"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),t.index,"start_copy_policy_tx_size")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"copy_policy_multiplier"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Copy policy multiplier")])]),t._v(" "),s("i",[t._v("Disables copy policy if namespace size is greater than copy_policy_multiplier * start_copy_policy_tx_size")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespaces[t.index].copy_policy_multiplier,id:"copy_policy_multiplier",variant:"primary",size:"md",type:"number",placeholder:"Set integer value"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),t.index,"copy_policy_multiplier")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e(),t._v(" "),"tx_size_to_always_copy"===e.key?[s("div",{staticClass:"field-left"},[s("div",[s("strong",{staticClass:"setting-name"},[t._v("Tx size to always copy")])]),t._v(" "),s("i",[t._v("Force namespace copying for transaction with steps count greater than this value")])]),t._v(" "),s("b-form-input",{staticClass:"field-right",attrs:{value:t.namespaces[t.index].tx_size_to_always_copy,id:"tx_size_to_always_copy",variant:"primary",size:"md",type:"number",placeholder:"Set integer value"},on:{input:function(e){return t.changeNamespace(parseInt(e,10),t.index,"tx_size_to_always_copy")}}}),t._v(" "),s("div",{staticClass:"field-bottom"})]:t._e()],2)}),1):t._e()],1):t._e(),t._v(" "),s("b-col",{attrs:{cols:"24"}},[s("div",{staticClass:"ml-3"},[s("b-button",{staticClass:"button mr-3",attrs:{variant:"primary"},on:{click:t.saveItem}},[t._v("Save")]),t._v(" "),s("b-button",{staticClass:"button mr-3",attrs:{variant:"danger"},on:{click:t.init}},[t._v("Revert")])],1)])],1)],1),t._v(" "),s("b-tab",{attrs:{title:"Schema"}},[s("b-row",[s("b-col",{attrs:{cols:"24"}},[s("div",{staticClass:"ml-3"},[t._v("*Schema must be in json schema format,\n              "),s("a",{attrs:{href:"https://json-schema.org/specification.html",target:"_blank"}},[t._v("read")]),t._v(" for details")])])],1),t._v(" "),s("div",{class:{editor_container:!0,editor_wrong_json:!t.rightJSON}},[s("editor",{staticClass:"editor editor_config",attrs:{lang:"json",theme:"chrome",width:"100%",height:"700px",value:t.schema},on:{input:function(e){t.applyEditorChanges(e)}}})],1),t._v(" "),s("b-row",[s("b-col",{attrs:{cols:"24"}},[s("div",{staticClass:"ml-3 mt-2"},[s("b-button",{staticClass:"button mr-3",attrs:{variant:"primary"},on:{click:t.saveSchema}},[t._v("Save")]),t._v(" "),s("b-button",{staticClass:"button mr-3",attrs:{variant:"danger"},on:{click:t.resetSchema}},[t._v("Reset")])],1)])],1)],1)],1)],1)])},staticRenderFns:[]};var is=s("VU/8")(as,ns,!1,function(t){s("4kF5")},"data-v-b1336480",null).exports,os=s("qJdz"),rs=s.n(os),cs={db:function(t){return m.a.isEmpty(t.db)?jt.db:decodeURIComponent(t.db)},namespace:function(t){return m.a.isEmpty(t.namespace)?jt.namespace:decodeURIComponent(t.namespace)},index:function(t){return parseInt(decodeURIComponent(t.index),10)},indexes:function(t){return"true"===decodeURIComponent(t.indexes)},cache:function(t){return"true"===decodeURIComponent(t.cache)},filter:function(t){return m.a.isEmpty(t.filter)?jt.filter:decodeURIComponent(t.filter)},q:function(t){return m.a.isEmpty(t.q)?jt.q:decodeURIComponent(t.q)},viewType:function(t){return m.a.isEmpty(t.viewType)?jt.viewType:decodeURIComponent(t.viewType)},page:function(t){return parseInt(t.page,10)||jt.page},pageSize:function(t){return parseInt(t.pageSize,10)||jt.pageSize},pageSizeForMemoryStat:function(t){return parseInt(t.pageSize,10)||0},sortOrder:function(t){return parseInt(t.sortOrder,10)||jt.sortOrder},sortField:function(t){return parseInt(t.sortField,10)||jt.sortField},makeForItemsPage:function(t){var e=rs.a.camelizeKeys(t);return{db:this.db(e),namespace:this.namespace(e),page:this.page(e),pageSize:this.pageSize(e),sortField:this.sortField(e),sortOrder:this.sortOrder(e),viewType:this.viewType(e),filter:this.filter(e)}},makeForQueriesPage:function(t){var e=rs.a.camelizeKeys(t);return{db:this.db(e),page:this.page(e),pageSize:this.pageSize(e),viewType:this.viewType(e),q:this.q(e)}},makeForConfigPage:function(t){var e=rs.a.camelizeKeys(t);return{db:this.db(e),namespace:this.namespace(e)}},makeForSystemPage:function(t){var e=rs.a.camelizeKeys(t);return{namespace:this.namespace(e),index:this.index(e),indexes:this.indexes(e),cache:this.cache(e),page:this.page(e),pageSize:this.pageSizeForMemoryStat(e)}}};a.default.use(o.a);var ls,us=new o.a({mode:"history",base:"/face",routes:[{path:"*",name:"NotFoundPage",component:c},{path:E.root,name:"MainPage",component:H},{path:E.indexes,name:"IndexesPage",component:Nt},{path:E.items,name:"ItemsPage",component:Gt,props:function(t){return cs.makeForItemsPage(t.query)}},{path:E.queries,name:"QueriesPage",component:ve,props:function(t){return cs.makeForQueriesPage(t.query)}},{path:E.memory_stats,name:"MemoryStatsPage",component:Ee,props:function(t){return cs.makeForSystemPage(t.query)}},{path:E.config,name:"ConfigPage",component:De},{path:E.custom_config,name:"CustomConfigPage",component:is,props:function(t){return cs.makeForConfigPage(t.query)}},{path:E.perfstats,name:"PerfstatsPage",component:Qe},{path:E.queriesperfstats,name:"QueriesPerfstatsPage",component:He},{path:E.meta,name:"MetaPage",component:Je},{path:E.activity_stat,name:"ActivityPage",component:Ze},{path:E.clients_stats,name:"ClientsStatsPage",component:ss}]}),ds=(s("sax8"),s("lHA8")),ms=s.n(ds),ps=function(t){return m.a.get(t,"items",[])},hs=function(t){return m.a.get(t,"meta",[])},fs=function(t){return m.a.get(t,"explain",null)},vs=function(t){return m.a.get(t,"columns",[])},_s=function(t){return m.a.get(t,"aggregations",[])},gs=function(t){return m.a.get(t,"total_items",0)},bs=function(t){return m.a.get(t,"cache_enabled",!1)},ys=function(t){return m.a.get(t,"namespaces",[])},Cs=function(t){return m.a.get(t,"query_total_items",0)},Ss=function(t){if(m.a.isEmpty(t))return[];var e=t.reduce(function(t,e){var s=m.a.keys(e);return[].concat(st()(t),st()(s))},m.a.keys(t[0]));return[].concat(st()(new ms.a(e)))},Es=function(t){return m.a.get(t,"response.data.description","")||m.a.get(t,"response","")||"Error is occurred"},ws=function(t){return m.a.get(t,"indexes",[])},xs=function(t){return m.a.get(t,"suggests",[])},Ts=te()({SET_DATABASE:null,SET_NAMESPACE:null,SIDEBAR_TOGGLE:null,TABLE_SET_NAMESPACES_COLUMNS:null,SETTINGS_DATABASE_RESET:null,SETTINGS_NAMESPACE_RESET:null,LOAD_QUERIES_FROM_HISTORY:null,PUSH_QUERY_TO_HISTORY:null}),Is=u()({},Ts),ks=15;var As={namespaced:!0,actions:{resetSelectedNamespace:function(t){(0,t.commit)(Is.SETTINGS_NAMESPACE_RESET)},selectDatabase:function(t,e){var s={name:e};(0,t.commit)(Is.SET_DATABASE,s)},selectNamespace:function(t,e){var s={name:e};(0,t.commit)(Is.SET_NAMESPACE,s)},sidebarToggle:function(t){(0,t.commit)(Is.SIDEBAR_TOGGLE)},throwError:function(t,e){return(0,t.dispatch)(_.ADD_TOAST_MESSAGE,{text:Es(e),type:"danger"},{root:!0})},showSuccessMessage:function(t,e){return(0,t.dispatch)(_.ADD_TOAST_MESSAGE,{text:e,type:"success"},{root:!0})},setSelectedFieldsForNamespace:function(t,e){(0,t.commit)(Is.TABLE_SET_NAMESPACES_COLUMNS,e)},loadQueriesFromHistory:function(t,e){(0,t.commit)(Is.LOAD_QUERIES_FROM_HISTORY,e)},pushQueryToHistory:function(t,e){(0,t.commit)(Is.PUSH_QUERY_TO_HISTORY,e)}},getters:{databaseWithDefault:function(t){return t.database||jt.db}},mutations:(ls={},zt()(ls,Is.SETTINGS_DATABASE_RESET,function(t){t.database=""}),zt()(ls,Is.SETTINGS_NAMESPACE_RESET,function(t){t.namespace="",t.namespacesSelectedFields={}}),zt()(ls,Is.SET_DATABASE,function(t,e){var s=e.name;t.database=s}),zt()(ls,Is.SET_NAMESPACE,function(t,e){var s=e.name;t.namespace=s}),zt()(ls,Is.SIDEBAR_TOGGLE,function(t){t.isSidebarOpened=!t.isSidebarOpened}),zt()(ls,Is.TABLE_SET_NAMESPACES_COLUMNS,function(t,e){var s=e.db,a=e.namespace,n=e.fields;m.a.isEmpty(t.namespacesSelectedFields[s])&&(t.namespacesSelectedFields[s]={}),t.namespacesSelectedFields[s][a]=n}),zt()(ls,Is.LOAD_QUERIES_FROM_HISTORY,function(t){t.queryHistory=function(){var t=localStorage.getItem("reindexerQueryHistory"),e=JSON.parse(t);if(!m.a.isArray(e))return[];var s=[].concat(st()(m.a.slice(e,0,ks)));return m.a.without(s,null,void 0)}()}),zt()(ls,Is.PUSH_QUERY_TO_HISTORY,function(t,e){var s=e.query,a=t.queryHistory,n=void 0;n=m.a.size(a)?m.a.size(a)<ks?[s].concat(st()(a)):[s].concat(st()(m.a.slice(a,0,ks-1))):[s];var i=m.a.uniq(n),o=m.a.without(i,null,void 0);!function(t){var e=W()(t);localStorage.setItem("reindexerQueryHistory",e)}(o),t.queryHistory=o}),ls),state:{database:"",namespace:"",namespacesSelectedFields:{},isSidebarOpened:!0,queryHistory:[]}},Ns=s("Zrlr"),Fs=s.n(Ns),zs=s("wxAW"),Ms=s.n(zs),Ls=s("mtWM"),Ds=s.n(Ls),Ps=s("OAwv"),Rs=s.n(Ps),js=s("mTx5"),Os=s.n(js),qs=new(function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fs()(this,t),this.isCancel=Ls.isCancel,this.baseurl=e,this.metadata={headers:s},this.sources={}}return Ms()(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.sources[t];if(s){a&&a.cancel();var n=Ls.CancelToken.source();this.sources[t]=n,this.metadata=u()({},this.metadata,{cancelToken:n.token})}if(m.a.isEmpty(e))return Ds.a.get(Os()(this.baseurl,t),this.metadata);var i=rs.a.decamelizeKeys(e),o="?"+Rs.a.stringify(i);return Ds.a.get(Os()(this.baseurl,t,o),this.metadata)}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ds.a.post(Os()(this.baseurl,t),e,{headers:{"Content-Type":"application/json"}})}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ds.a.put(Os()(this.baseurl,t),e,{headers:{"Content-Type":"application/json"}})}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ds.a.delete(Os()(this.baseurl,t),{data:e})}}]),t}())("/api/v1");function Bs(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=0;t.includes(":"+e);)t=t.replace(":"+e,encodeURIComponent(arguments.length<=e+1?void 0:arguments[e+1])||null),e+=1;return t}var Us=u()({},{status:"/check",databases:"/db",database:"/db/:0",namespaces:"/db/:0/namespaces",namespace:"/db/:0/namespaces/:1",items:"/db/:0/namespaces/:1/items",indexes:"/db/:0/namespaces/:1/indexes",index:"/db/:0/namespaces/:1/indexes/:2",query:"/db/:0/query",suggest:"/db/:0/suggest",metas:"/db/:0/namespaces/:1/metalist",metakey:"db/:0/namespaces/:1/metabykey",activity:"/activity",schema:"/db/:0/namespaces/:1/schema"});function $s(t){var e=rs.a.decamelize(t).toUpperCase();return{REQUEST:e+"_REQUEST",SUCCESS:e+"_SUCCESS",FAIL:e+"_FAIL"}}var Qs,Xs,Gs,Hs,Vs,Ws,Js=te()({MODIFY_SERVICE_STATE_AS_KEY_VALUE:null}),Ys={STATUS_GET:$s("getStatus")},Ks=u()({},Ys,Js),Zs={namespaced:!0,actions:{modifyStateAsKV:function(t,e){(0,t.commit)(Ks.MODIFY_SERVICE_STATE_AS_KEY_VALUE,e)},getStatus:function(t,e){var s=t.commit;return new Vt.a(function(t,a){qs.get(Us.status,e).then(function(e){var a={status:e.data};s(Ks.STATUS_GET.SUCCESS,a),t()},function(t){s(Ks.STATUS_GET.FAIL,t),a()}).catch(function(t){s(Ks.STATUS_GET.FAIL,t),a()})})}},getters:{},mutations:(Qs={},zt()(Qs,Ks.MODIFY_SERVICE_STATE_AS_KEY_VALUE,function(t,e){for(var s=k()(e)||[],a=0;a<=m.a.size(s);a+=1)t[s[a]]=e[s[a]]}),zt()(Qs,Ks.STATUS_GET.REQUEST,function(t){t.status={}}),zt()(Qs,Ks.STATUS_GET.SUCCESS,function(t,e){var s=e.status;t.status=s}),zt()(Qs,Ks.STATUS_GET.FAIL,function(t){t.status={}}),Qs),state:{status:{},startTime:0,uptime:0,version:""}},ta={DB_GET_LIST:$s("getDbList"),DB_DELETE:$s("deleteDb"),DB_CREATE:$s("createDb")},ea=u()({},ta),sa={namespaced:!0,actions:{getDbList:function(t,e){var s=t.commit,a=t.dispatch,n=u()({},e,{sortOrder:"asc"});return new Vt.a(function(t,e){qs.get(Us.databases,n).then(function(e){var a=e.data,n={list:ps(a)};s(ea.DB_GET_LIST.SUCCESS,n),t()},function(t){s(ea.DB_GET_LIST.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ea.DB_GET_LIST.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},createDb:function(t,e){var s=t.commit,a=t.dispatch;s(ea.DB_CREATE.REQUEST);var n={name:e};return new Vt.a(function(t,e){qs.create(Us.databases,n).then(function(){s(ea.DB_CREATE.SUCCESS),a("settings/showSuccessMessage","Database is created",{root:!0}),a("getDbList").then(function(){return t()})},function(t){s(ea.DB_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ea.DB_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},deleteDb:function(t,e){var s=t.commit,a=t.dispatch;return s(ea.DB_DELETE.REQUEST),new Vt.a(function(t,n){qs.delete(Bs(Us.database,e)).then(function(){s(ea.DB_DELETE.SUCCESS),a("settings/showSuccessMessage","Database is deleted",{root:!0}),a("getDbList").then(function(){return t()})},function(t){s(ea.DB_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),n()}).catch(function(t){s(ea.DB_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),n()})})}},getters:{},mutations:(Xs={},zt()(Xs,ea.DB_GET_LIST.REQUEST,function(t){t.isLoading=!0}),zt()(Xs,ea.DB_GET_LIST.FAIL,function(t){t.isLoading=!1}),zt()(Xs,ea.DB_GET_LIST.SUCCESS,function(t,e){t.list=e.list,t.isLoading=!1}),zt()(Xs,ea.DB_DELETE.REQUEST,function(t){t.isLoading=!0}),zt()(Xs,ea.DB_DELETE.FAIL,function(t){t.isLoading=!1}),zt()(Xs,ea.DB_DELETE.SUCCESS,function(t){t.isLoading=!1}),zt()(Xs,ea.DB_CREATE.REQUEST,function(t){t.isLoading=!0}),zt()(Xs,ea.DB_CREATE.FAIL,function(t){t.isLoading=!1}),zt()(Xs,ea.DB_CREATE.SUCCESS,function(t){t.isLoading=!1}),Xs),state:{list:[],one:[],isLoading:!1}},aa={NAMESPACES_GET_LIST:$s("getNamespacesList"),NAMESPACES_GET_ONE:$s("getNamespace"),NAMESPACE_DELETE:$s("deleteNamespace"),NAMESPACE_CREATE:$s("createNamespace"),NAMESPACE_INDEX_DELETE:$s("deleteIndex"),NAMESPACE_INDEX_CREATE:$s("createIndex"),NAMESPACE_INDEX_UPDATE:$s("updateIndex"),GET_INDEXES_FROM_NAMESPACE:$s("getIndexesFromNamespace"),RENAME_NAMESPACE:$s("renameNamespace"),SCHEMA_UPDATE:$s("schemaUpdate"),GET_SCHEMA:$s("getSchema")},na=te()({NAMESPACES_PARAMS_SET:null,NAMESPACES_RESET:null,NAMESPACES_IS_LOADED:null}),ia=u()({},aa,na),oa={namespaced:!0,actions:{reset:function(t){(0,t.commit)(ia.NAMESPACES_RESET)},getNamespacesList:function(t,e){var s=t.commit,a=t.dispatch,n={sortOrder:"asc"};return s(ia.NAMESPACES_GET_LIST.REQUEST),new Vt.a(function(t,i){qs.get(Bs(Us.namespaces,e),n).then(function(e){var a=e.data,n={list:ps(a)};s(ia.NAMESPACES_GET_LIST.SUCCESS,n),setTimeout(function(){return s(ia.NAMESPACES_IS_LOADED)},500),t()},function(t){s(ia.NAMESPACES_GET_LIST.FAIL,t),a("settings/throwError",t,{root:!0}),i()}).catch(function(t){s(ia.NAMESPACES_GET_LIST.FAIL,t),a("settings/throwError",t,{root:!0}),i()})})},getNamespaceOne:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace;return s(ia.NAMESPACES_GET_ONE.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.namespace,n,i)).then(function(e){var a=e.data;s(ia.NAMESPACES_GET_ONE.SUCCESS,{one:a}),t()},function(t){s(ia.NAMESPACES_GET_ONE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.NAMESPACES_GET_ONE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},setNamespacesParams:function(t){var e={params:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};(0,t.commit)(ia.NAMESPACES_PARAMS_SET,e)},createNamespace:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.json;return s(ia.NAMESPACE_CREATE.REQUEST),new Vt.a(function(t,e){qs.create(Bs(Us.namespaces,n),i).then(function(){s(ia.NAMESPACE_CREATE.SUCCESS),a("settings/showSuccessMessage","Namespace is created",{root:!0}),a("getNamespacesList",n).then(function(){return t()})},function(t){s(ia.NAMESPACE_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.NAMESPACE_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},deleteNamespace:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace;return s(ia.NAMESPACE_DELETE.REQUEST),new Vt.a(function(t,e){qs.delete(Bs(Us.namespace,n,i)).then(function(){s(ia.NAMESPACE_DELETE.SUCCESS),a("settings/showSuccessMessage","Namespace is deleted",{root:!0}),a("getNamespacesList",n).then(function(){return t()})},function(t){s(ia.NAMESPACE_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.NAMESPACE_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},deleteIndex:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.index;return s(ia.NAMESPACE_INDEX_DELETE.REQUEST),new Vt.a(function(t,e){qs.delete(Bs(Us.index,n,i,o)).then(function(){s(ia.NAMESPACE_INDEX_DELETE.SUCCESS),a("settings/showSuccessMessage","Index '"+o+"' is deleted from namespace '"+i+"'",{root:!0}),a("getNamespaceOne",{db:n,namespace:i}).then(function(){return t()})},function(t){s(ia.NAMESPACE_INDEX_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.NAMESPACE_INDEX_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},createIndex:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.index;s(ia.NAMESPACE_INDEX_CREATE.REQUEST);var r=m.a.mapKeys(o,function(t,e){return m.a.snakeCase(e)});return new Vt.a(function(t,e){qs.create(Bs(Us.indexes,n,i),r).then(function(){s(ia.NAMESPACE_INDEX_CREATE.SUCCESS),a("settings/showSuccessMessage","Index '"+o.name+"' is added to namespace '"+i+"'",{root:!0}),a("getNamespaceOne",{db:n,namespace:i}).then(function(){return t()})},function(t){s(ia.NAMESPACE_INDEX_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.NAMESPACE_INDEX_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},updateIndex:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.index;s(ia.NAMESPACE_INDEX_UPDATE.REQUEST);var r=m.a.mapKeys(o,function(t,e){return m.a.snakeCase(e)});return new Vt.a(function(t,e){qs.update(Bs(Us.indexes,n,i),r).then(function(){s(ia.NAMESPACE_INDEX_UPDATE.SUCCESS),a("settings/showSuccessMessage","Index '"+o.name+"' is added to namespace '"+i+"'",{root:!0}),a("getNamespaceOne",{db:n,namespace:i}).then(function(){return t()})},function(t){s(ia.NAMESPACE_INDEX_UPDATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.NAMESPACE_INDEX_UPDATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},getIndexesFromNamespace:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace;return s(ia.GET_INDEXES_FROM_NAMESPACE.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.namespaces,n)+"/"+i).then(function(e){var a=m.a.get(e,"data",{}),n={indexes:ws(a)};s(ia.GET_INDEXES_FROM_NAMESPACE.SUCCESS,n),t()},function(t){s(ia.GET_INDEXES_FROM_NAMESPACE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.GET_INDEXES_FROM_NAMESPACE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},renameNamespace:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.newNamespace;return s(ia.RENAME_NAMESPACE.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.namespaces,n)+"/"+i+"/rename/"+o).then(function(){s(ia.RENAME_NAMESPACE.SUCCESS),t()},function(t){s(ia.RENAME_NAMESPACE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.RENAME_NAMESPACE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},updateSchema:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.schema;return s(ia.SCHEMA_UPDATE.REQUEST),new Vt.a(function(t,e){qs.update(Bs(Us.schema,n,i),o).then(function(){s(ia.SCHEMA_UPDATE.SUCCESS),a("settings/showSuccessMessage","Schema for '"+i+"' is updated",{root:!0})},function(t){s(ia.SCHEMA_UPDATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.SCHEMA_UPDATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},getSchema:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace;return s(ia.GET_SCHEMA.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.schema,n,i)).then(function(e){var a=e.data;s(ia.GET_SCHEMA.SUCCESS,{schema:a}),t()},function(t){s(ia.GET_SCHEMA.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ia.GET_SCHEMA.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})}},getters:{names:function(t){return m.a.map(t.list,function(t){return t.name})},namesWithoutHash:function(t){return m.a.map(t.list,function(t){return t.name}).filter(function(t){return"#"!==t[0]})},icons:function(t){return m.a.map(t.list,function(t){return t.storage_enabled?"database":"flame"})},indexes:function(t){return m.a.get(t,"one.indexes",[])},pk:function(t,e){return m.a.filter(e.indexes,{is_pk:!0})},notArrayIndexes:function(t,e){return m.a.filter(e.indexes,{is_array:!1})},sortableFields:function(t,e){return e.notArrayIndexes.map(function(t){return t.name})},indexesNames:function(t,e){return e.indexes.map(function(t){return t.name})},indexFields:function(t,e){return Ss(e.indexes)},itemTemplate:function(t,e){var s=e.indexes.reduce(function(t,e,s){var a=e.json_paths,n=e.field_type;if("composite"===n)return t;var i=void 0;switch(n){case"string":i='""';break;case"bool":i=!0;break;case"double":i=.1;break;case"int":case"int64":i=0;break;default:i=null}var o="";return a.forEach(function(t,e){var s=t.split(".");o+='"'+s.shift()+'": ',s.forEach(function(t){o+='{\n"'+t+'": '}),o+=i,s.forEach(function(){o+="\n}"}),a.length-1!==e&&(o+=",\n")}),s>0?t+",\n"+o:"\n"+o},"");return W()(JSON.parse("{"+s+"}"),null,2)}},mutations:(Gs={},zt()(Gs,ia.NAMESPACES_RESET,function(t){t.list=[],t.one=[],t.params={},t.isLoading=!1}),zt()(Gs,ia.NAMESPACES_GET_LIST.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.NAMESPACES_GET_LIST.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACES_GET_LIST.SUCCESS,function(t,e){t.list=e.list}),zt()(Gs,ia.RENAME_NAMESPACE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.RENAME_NAMESPACE.SUCCESS,function(t){t.isLoading=!1}),zt()(Gs,ia.RENAME_NAMESPACE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACES_IS_LOADED,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACES_GET_ONE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.NAMESPACES_GET_ONE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACES_GET_ONE.SUCCESS,function(t,e){t.one=e.one;var s=e.one.indexes.map(function(t){return u()({},t,{config:W()(t.config)})});t.one.indexes=s,t.isLoading=!1}),zt()(Gs,ia.NAMESPACES_PARAMS_SET,function(t,e){var s=e.params;t.params=s}),zt()(Gs,ia.NAMESPACE_DELETE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.NAMESPACE_DELETE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_DELETE.SUCCESS,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_CREATE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.NAMESPACE_CREATE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_CREATE.SUCCESS,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_INDEX_DELETE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.NAMESPACE_INDEX_DELETE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_INDEX_DELETE.SUCCESS,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_INDEX_CREATE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.NAMESPACE_INDEX_CREATE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_INDEX_CREATE.SUCCESS,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_INDEX_UPDATE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.NAMESPACE_INDEX_UPDATE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.NAMESPACE_INDEX_UPDATE.SUCCESS,function(t){t.isLoading=!1}),zt()(Gs,ia.GET_INDEXES_FROM_NAMESPACE.REQUEST,function(t){t.indexes=[]}),zt()(Gs,ia.GET_INDEXES_FROM_NAMESPACE.FAIL,function(t){t.indexes=[]}),zt()(Gs,ia.GET_INDEXES_FROM_NAMESPACE.SUCCESS,function(t,e){var s=e.indexes;t.indexes=s}),zt()(Gs,ia.SCHEMA_UPDATE.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.GET_SCHEMA.REQUEST,function(t){t.isLoading=!0}),zt()(Gs,ia.SCHEMA_UPDATE.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.GET_SCHEMA.FAIL,function(t){t.isLoading=!1}),zt()(Gs,ia.GET_SCHEMA.SUCCESS,function(t,e){var s=e.schema;t.schema=u()({},s),t.isLoading=!1}),zt()(Gs,ia.SCHEMA_UPDATE.SUCCESS,function(t){t.isLoading=!1}),Gs),state:{list:[],one:[],isLoading:!1,indexes:[],schema:{}}},ra={limit:function(t){return t.pageSize||jt.limit},offset:function(t){return(t.page-1)*t.pageSize||jt.offset},sortOrder:function(t){var e=t.sortOrder;return e||jt.sortOrder},sortField:function(t){var e=t.sortField;return e||jt.sortField},filter:function(t){var e=t.filter;return e||jt.filter},q:function(t){var e=t.q;return e||jt.q},transform:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k()(e).reduce(function(s,a){var n=u()({},s);return"pageSize"===a?n.limit=t.limit(e):"page"===a?n.offset=t.offset(e):"sortField"===a?n.sortField=t.sortField(e):"sortOrder"===a?n.sortOrder=t.sortOrder(e):"filter"===a?n.filter=t.filter(e):"q"===a?n.q=t.q(e):n[a]=e[a],n},{})}},ca={ITEMS_GET_LIST:$s("getItemsList"),ITEMS_GET_LIST_BY_QUERY:$s("getItemsListByQuery"),ITEMS_GET_LIST_BY_POST:$s("getItemsListByPost"),ITEMS_DELETE:$s("deleteItem"),ITEMS_UPDATE:$s("updateItem"),ITEMS_CREATE:$s("createItem"),CLEAR_NAMESPACE:$s("clearNamespace")},la=te()({ITEMS_RESET:null,ITEMS_LOCAL_UPDATE:null,CLEAR_ERROR:null}),ua=u()({},ca,la),da={namespaced:!0,actions:{reset:function(t){(0,t.commit)(ua.ITEMS_RESET)},getItemsList:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.params;return s(ua.ITEMS_GET_LIST.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.items,n,i),ra.transform(o)).then(function(e){var a=m.a.get(e,"data",{}),n={list:ps(a),total:gs(a),columns:vs(a)};s(ua.ITEMS_GET_LIST.SUCCESS,n),t()},function(t){s(ua.ITEMS_GET_LIST.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ua.ITEMS_GET_LIST.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},getItemsListByQuery:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.params;return s(ua.ITEMS_GET_LIST_BY_QUERY.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.query,n),ra.transform(i)).then(function(e){var a=m.a.get(e,"data",{}),n={cacheEnabled:bs(a),namespaces:ys(a),list:ps(a),explain:fs(a),aggregations:_s(a),total:gs(a),queryTotal:Cs(a),columns:vs(a)};s(ua.ITEMS_GET_LIST_BY_QUERY.SUCCESS,n),t()},function(t){s(ua.ITEMS_GET_LIST_BY_QUERY.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ua.ITEMS_GET_LIST_BY_QUERY.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},getItemsListByPost:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.params,o=e.query;s(ua.ITEMS_GET_LIST_BY_POST.REQUEST);var r=rs.a.decamelizeKeys(ra.transform(o)),c="?"+Rs.a.stringify(r);return new Vt.a(function(t,e){qs.create(Bs(Os()(Us.query,c),n),i).then(function(e){var a=m.a.get(e,"data",{}),n={cacheEnabled:bs(a),namespaces:ys(a),list:ps(a),explain:fs(a),aggregations:_s(a),total:gs(a),queryTotal:Cs(a),columns:vs(a)};s(ua.ITEMS_GET_LIST_BY_POST.SUCCESS,n),t()},function(t){s(ua.ITEMS_GET_LIST_BY_POST.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ua.ITEMS_GET_LIST_BY_POST.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},deleteItem:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.item,r=e.params;return s(ua.ITEMS_DELETE.REQUEST),new Vt.a(function(t,e){qs.delete(Bs(Us.items,n,i),o).then(function(){s(ua.ITEMS_DELETE.SUCCESS),a("settings/showSuccessMessage","Item is deleted",{root:!0}),a("getItemsList",{db:n,namespace:i,params:r}).then(function(){return t()})},function(t){s(ua.ITEMS_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ua.ITEMS_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},clearNamespace:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace;return s(ua.CLEAR_NAMESPACE.REQUEST),new Vt.a(function(t,e){qs.delete(Bs(Us.query,n,i),{namespace:i}).then(function(){s(ua.CLEAR_NAMESPACE.SUCCESS),a("settings/showSuccessMessage","Namespace is cleared",{root:!0}),a("getItemsList",{db:n,namespace:i}).then(function(){return t()})},function(t){s(ua.CLEAR_NAMESPACE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ua.ITEMS_DELETE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},updateItem:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.item,r=e.params;return s(ua.ITEMS_UPDATE.REQUEST),new Vt.a(function(t,e){qs.update(Bs(Us.items,n,i),o).then(function(){s(ua.ITEMS_UPDATE.SUCCESS),a("settings/showSuccessMessage","Item is updated",{root:!0}),a("getItemsList",{db:n,namespace:i,params:r}).then(function(){return t()})},function(t){s(ua.ITEMS_UPDATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ua.ITEMS_UPDATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},createItem:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.item,r=e.isReset,c=void 0!==r&&r,l=e.precepts;s(ua.ITEMS_CREATE.REQUEST);var u=Bs(Us.items,n,i,l);return m.a.isEmpty(l)||(u+="?",l.split("\n").forEach(function(t){u+="precepts="+encodeURIComponent(t.trim())+"&"})),new Vt.a(function(t,e){qs.create(u,W()(o,null,2)).then(function(e){var o=m.a.get(e,"data.updated");if(c)return s(ua.ITEMS_CREATE.SUCCESS),a("settings/showSuccessMessage","Stats reseted",{root:!0}),void a("getItemsList",{db:n,namespace:i}).then(function(){return t()});m.a.isUndefined(o)||0!==o?(s(ua.ITEMS_CREATE.SUCCESS),a("settings/showSuccessMessage","Item is created",{root:!0}),a("getItemsList",{db:n,namespace:i}).then(function(){return t()})):(s(ua.ITEMS_CREATE.SUCCESS),a("settings/throwError",{response:"Can't add item: Not uniq PK"},{root:!0}),a("getItemsList",{db:n,namespace:i}).then(function(){return t()}))},function(t){s(ua.ITEMS_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ua.ITEMS_CREATE.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},localUpdateItem:function(t,e){(0,t.commit)(ua.ITEMS_LOCAL_UPDATE,e)},clearError:function(t){(0,t.commit)(ua.CLEAR_ERROR)}},getters:{fields:function(t){var e=m.a.get(t,"list",[]);return Ss(e)},qFields:function(t){var e=m.a.get(t,"qList",[]);return Ss(e)},itemsSize:function(t){var e=m.a.get(t,"list",[]);return m.a.size(e)},qItemsSize:function(t){var e=m.a.get(t,"qList",[]);return m.a.size(e)},itemsJson:function(t){var e=m.a.get(t,"list",[]);return W()(e)},qItemsJson:function(t){var e=m.a.get(t,"qList",[]);return W()(e)},itemsForActivityState:function(t){return t.list.map(function(t){return u()({},t,{client:t.client+"\n"+t.user})})}},mutations:(Hs={},zt()(Hs,ua.ITEMS_RESET,function(t){t.list=[],t.qList=[],t.qTotal=0,t.total=0,t.isLoading=!1,t.columns=[]}),zt()(Hs,ua.ITEMS_GET_LIST.REQUEST,function(t){t.isLoading=!0}),zt()(Hs,ua.ITEMS_GET_LIST.FAIL,function(t,e){t.isLoading=!1,t.error=u()({},e)}),zt()(Hs,ua.ITEMS_GET_LIST.SUCCESS,function(t,e){var s=e.list,a=e.total,n=e.columns;t.list=s,t.total=a,t.isLoading=!1,t.error=null,t.columns=n}),zt()(Hs,ua.ITEMS_GET_LIST_BY_QUERY.REQUEST,function(t){t.error=null,t.isLoading=!0}),zt()(Hs,ua.ITEMS_GET_LIST_BY_QUERY.FAIL,function(t,e){t.error=e,t.isLoading=!1}),zt()(Hs,ua.CLEAR_ERROR,function(t){t.error=null}),zt()(Hs,ua.ITEMS_GET_LIST_BY_QUERY.SUCCESS,function(t,e){var s=e.list,a=e.explain,n=e.aggregations,i=e.total,o=e.queryTotal,r=e.namespaces,c=e.cacheEnabled,l=e.columns;t.qList=s,t.explain=a,t.qTotal=i,t.isLoading=!1,t.queryTotal=o,t.aggregations=n,t.namespaces=r,t.cacheEnabled=c,t.error=null,t.columns=l}),zt()(Hs,ua.ITEMS_GET_LIST_BY_POST.REQUEST,function(t){t.isLoading=!0}),zt()(Hs,ua.ITEMS_GET_LIST_BY_POST.FAIL,function(t){t.isLoading=!1}),zt()(Hs,ua.ITEMS_GET_LIST_BY_POST.SUCCESS,function(t,e){var s=e.list,a=e.explain,n=e.aggregations,i=e.total,o=e.queryTotal,r=e.namespaces,c=e.cacheEnabled,l=e.columns;t.qList=s,t.explain=a,t.qTotal=i,t.isLoading=!1,t.queryTotal=o,t.aggregations=n,t.namespaces=r,t.cacheEnabled=c,t.columns=l}),zt()(Hs,ua.ITEMS_DELETE.REQUEST,function(t){t.isLoading=!0}),zt()(Hs,ua.ITEMS_DELETE.FAIL,function(t){t.isLoading=!1}),zt()(Hs,ua.ITEMS_DELETE.SUCCESS,function(t){t.isLoading=!1}),zt()(Hs,ua.CLEAR_NAMESPACE.REQUEST,function(t){t.isLoading=!0}),zt()(Hs,ua.CLEAR_NAMESPACE.FAIL,function(t){t.isLoading=!1}),zt()(Hs,ua.CLEAR_NAMESPACE.SUCCESS,function(t){t.isLoading=!1}),zt()(Hs,ua.ITEMS_UPDATE.REQUEST,function(t){t.isLoading=!0}),zt()(Hs,ua.ITEMS_UPDATE.FAIL,function(t){t.isLoading=!1}),zt()(Hs,ua.ITEMS_UPDATE.SUCCESS,function(t){t.isLoading=!1}),zt()(Hs,ua.ITEMS_CREATE.REQUEST,function(t){t.isLoading=!0}),zt()(Hs,ua.ITEMS_CREATE.FAIL,function(t){t.isLoading=!1}),zt()(Hs,ua.ITEMS_CREATE.SUCCESS,function(t){t.isLoading=!1}),zt()(Hs,ua.ITEMS_LOCAL_UPDATE,function(t,e){var s=e.item,a=e.inx,n=t.list;n[a]=s,t.list=[].concat(st()(n))}),Hs),state:{list:[],explain:null,aggregations:[],total:0,qList:[],qTotal:0,queryTotal:0,isLoading:!1,namespaces:[],cacheEnabled:!1,error:null,columns:[]}},ma={GET_SUGGEST:$s("getSuggest")},pa=te()({CLEAR_SUGGEST:null}),ha=u()({},ma,pa),fa={namespaced:!0,actions:{getSuggest:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.params;return s(ha.GET_SUGGEST.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.suggest,n),ra.transform(i)).then(function(e){var a=m.a.get(e,"data",{}),n={suggests:xs(a)};s(ha.GET_SUGGEST.SUCCESS,n),t()},function(t){s(ha.GET_SUGGEST.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(ha.GET_SUGGEST.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},clearSuggest:function(t){(0,t.commit)(ha.CLEAR_SUGGEST)}},mutations:(Vs={},zt()(Vs,ha.GET_SUGGEST.REQUEST,function(t){t.isLoading=!0}),zt()(Vs,ha.GET_SUGGEST.FAIL,function(t){t.isLoading=!1}),zt()(Vs,ha.GET_SUGGEST.SUCCESS,function(t,e){var s=e.suggests;t.suggests=s}),zt()(Vs,ha.CLEAR_SUGGEST,function(t){t.suggests=[]}),Vs),state:{suggests:[],isLoading:!1}},va={GET_METAS:$s("getMetaList"),SET_META:$s("setMeta")},_a=u()({},va),ga={namespaced:!0,actions:{getMetas:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.params;return s(_a.GET_METAS.REQUEST),new Vt.a(function(t,e){qs.get(Bs(Us.metas,n,i),ra.transform(o)).then(function(e){var a=m.a.get(e,"data",{}),n={list:hs(a),totalItems:gs(a)};s(_a.GET_METAS.SUCCESS,n),t()},function(t){s(_a.GET_METAS.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(_a.GET_METAS.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})},setMeta:function(t,e){var s=t.commit,a=t.dispatch,n=e.db,i=e.namespace,o=e.item,r=e.params;return s(_a.SET_META.REQUEST),new Vt.a(function(t,e){qs.update(Bs(Us.metakey,n,i),o).then(function(){s(_a.SET_META.SUCCESS),a("settings/showSuccessMessage","Metakey is updated",{root:!0}),a("getMetas",{db:n,namespace:i,params:r}).then(function(){return t()})},function(t){s(_a.SET_META.FAIL,t),a("settings/throwError",t,{root:!0}),e()}).catch(function(t){s(_a.SET_META.FAIL,t),a("settings/throwError",t,{root:!0}),e()})})}},mutations:(Ws={},zt()(Ws,_a.GET_METAS.REQUEST,function(t){t.isLoading=!0}),zt()(Ws,_a.GET_METAS.FAIL,function(t){t.isLoading=!1}),zt()(Ws,_a.GET_METAS.SUCCESS,function(t,e){var s=e.list,a=e.totalItems;t.list=s,t.totalItems=a,t.isLoading=!1}),zt()(Ws,_a.SET_META.REQUEST,function(t){t.isLoading=!0}),zt()(Ws,_a.SET_META.FAIL,function(t){t.isLoading=!1}),zt()(Ws,_a.SET_META.SUCCESS,function(t){t.isLoading=!1}),Ws),state:{list:[],isLoading:!1}};a.default.use(v.a);var ba=new v.a.Store({modules:{service:Zs,settings:As,dbs:sa,namespaces:oa,items:da,metas:ga,toast:Object(_.createModule)({dismissInterval:5e3}),suggest:fa},strict:!1,plugins:[]}),ya=s("Tqaz"),Ca=s("efYS"),Sa=s.n(Ca),Ea=s("wYzO"),wa=s.n(Ea),xa=s("rifk"),Ta=s.n(xa),Ia=s("NOBz"),ka=s("x4/L"),Aa=s.n(ka),Na=s("P7Ml"),Fa=s.n(Na),za=s("8/7D"),Ma=s.n(za),La=s("C/JF"),Da=s("fhbW"),Pa=s("1e6/"),Ra=s("K97M"),ja=s.n(Ra),Oa=s("E5Az"),qa=s.n(Oa),Ba=(s("JGZi"),s("jQeI"),s("ryyk"),s("NbQv"),s("Dukv"),s("Jmt5"),s("9M+g"),s("hRG5"),s("4/hK"),s("PsxY"),s("GUiZ"),s("M/VQ"),s("oPmM"),{install:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={$vm:null,state:{},data:u()({},e),init:function(t){this.$vm=t},show:function(t){this.$vm&&g.$emit("show",t)}};s.init(g),t.component("Modal",C),t.prototype.$cmodal=s}});s("sz3z");La.c.add(Da.b,Da.c,Da.d,Da.a),a.default.component("font-awesome-icon",Pa.a),a.default.component("vue-simple-suggest",Ia.a),a.default.config.productionTip=!1,a.default.use(ya.a),a.default.use(Sa.a),a.default.use(Ba),a.default.use(wa.a),a.default.use(Ta.a,{componentName:"v-modal",dialog:!0,dynamic:!0}),a.default.use(Aa.a),a.default.use(ja.a),a.default.use(Fa.a),a.default.use(qa.a),a.default.use(Ma.a),a.default.prototype.$watchAll=function(t,e){var s=this;t.forEach(function(t){s.$watch(t,e)})},a.default.directive("focus",{inserted:function(t){t.focus()}}),a.default.config.productionTip=!1,new a.default({el:"#app",router:us,store:ba,template:"<App/>",components:{App:i}})},PsxY:function(t,e){},QCFS:function(t,e){},SyuR:function(t,e){},Vgni:function(t,e){},Vu5b:function(t,e){},X2Yw:function(t,e){},XP3n:function(t,e){},XTMt:function(t,e){},bnvi:function(t,e){},"csa/":function(t,e){},dvTo:function(t,e){},etaR:function(t,e){},fhoY:function(t,e){},jfUk:function(t,e){},kape:function(t,e){},kydX:function(t,e){},mj8Y:function(t,e,s){var a={"./af":"el6m","./af.js":"el6m","./ar":"k/LX","./ar-dz":"8sQJ","./ar-dz.js":"8sQJ","./ar-kw":"Ypiv","./ar-kw.js":"Ypiv","./ar-ly":"vFBa","./ar-ly.js":"vFBa","./ar-ma":"5srG","./ar-ma.js":"5srG","./ar-sa":"OWdl","./ar-sa.js":"OWdl","./ar-tn":"zbnz","./ar-tn.js":"zbnz","./ar.js":"k/LX","./az":"+TbT","./az.js":"+TbT","./be":"I3+K","./be.js":"I3+K","./bg":"6pzG","./bg.js":"6pzG","./bm":"XaRw","./bm.js":"XaRw","./bn":"BSxz","./bn.js":"BSxz","./bo":"xZM4","./bo.js":"xZM4","./br":"z7xq","./br.js":"z7xq","./bs":"CRbE","./bs.js":"CRbE","./ca":"vtJn","./ca.js":"vtJn","./cs":"50M2","./cs.js":"50M2","./cv":"imKR","./cv.js":"imKR","./cy":"0GzN","./cy.js":"0GzN","./da":"w5+c","./da.js":"w5+c","./de":"EVTu","./de-at":"nG3g","./de-at.js":"nG3g","./de-ch":"Yt6q","./de-ch.js":"Yt6q","./de.js":"EVTu","./dv":"qtbI","./dv.js":"qtbI","./el":"5alt","./el.js":"5alt","./en-au":"z0Rx","./en-au.js":"z0Rx","./en-ca":"3NXy","./en-ca.js":"3NXy","./en-gb":"+etJ","./en-gb.js":"+etJ","./en-ie":"9aRM","./en-ie.js":"9aRM","./en-il":"FSWH","./en-il.js":"FSWH","./en-nz":"nuu6","./en-nz.js":"nuu6","./eo":"ScLw","./eo.js":"ScLw","./es":"dvvA","./es-do":"yg1m","./es-do.js":"yg1m","./es-us":"iYIl","./es-us.js":"iYIl","./es.js":"dvvA","./et":"0unr","./et.js":"0unr","./eu":"RwsK","./eu.js":"RwsK","./fa":"0MmL","./fa.js":"0MmL","./fi":"3jre","./fi.js":"3jre","./fo":"wY+L","./fo.js":"wY+L","./fr":"khqN","./fr-ca":"bEN0","./fr-ca.js":"bEN0","./fr-ch":"S4fe","./fr-ch.js":"S4fe","./fr.js":"khqN","./fy":"1XdY","./fy.js":"1XdY","./gd":"Q4Vj","./gd.js":"Q4Vj","./gl":"ZUnQ","./gl.js":"ZUnQ","./gom-latn":"4dEw","./gom-latn.js":"4dEw","./gu":"YpSa","./gu.js":"YpSa","./he":"9PWd","./he.js":"9PWd","./hi":"d8Wo","./hi.js":"d8Wo","./hr":"YkY+","./hr.js":"YkY+","./hu":"79Lb","./hu.js":"79Lb","./hy-am":"DMpe","./hy-am.js":"DMpe","./id":"Ibyo","./id.js":"Ibyo","./is":"L3mU","./is.js":"L3mU","./it":"9XIi","./it.js":"9XIi","./ja":"x5kd","./ja.js":"x5kd","./jv":"30df","./jv.js":"30df","./ka":"JI1o","./ka.js":"JI1o","./kk":"HJwE","./kk.js":"HJwE","./km":"OTi2","./km.js":"OTi2","./kn":"2230","./kn.js":"2230","./ko":"dDkv","./ko.js":"dDkv","./ku":"L83Z","./ku.js":"L83Z","./ky":"PHd1","./ky.js":"PHd1","./lb":"vxmX","./lb.js":"vxmX","./lo":"K877","./lo.js":"K877","./lt":"Zk7u","./lt.js":"Zk7u","./lv":"JOTR","./lv.js":"JOTR","./me":"Ex1I","./me.js":"Ex1I","./mi":"jjiy","./mi.js":"jjiy","./mk":"gWcD","./mk.js":"gWcD","./ml":"kBLj","./ml.js":"kBLj","./mn":"k+VG","./mn.js":"k+VG","./mr":"V2NI","./mr.js":"V2NI","./ms":"KQOe","./ms-my":"POgm","./ms-my.js":"POgm","./ms.js":"KQOe","./mt":"mxKv","./mt.js":"mxKv","./my":"ZAKQ","./my.js":"ZAKQ","./nb":"MQ71","./nb.js":"MQ71","./ne":"PefK","./ne.js":"PefK","./nl":"aSId","./nl-be":"Fpiv","./nl-be.js":"Fpiv","./nl.js":"aSId","./nn":"YpEG","./nn.js":"YpEG","./pa-in":"r+L2","./pa-in.js":"r+L2","./pl":"eXAp","./pl.js":"eXAp","./pt":"I4bD","./pt-br":"iAmb","./pt-br.js":"iAmb","./pt.js":"I4bD","./ro":"tXyB","./ro.js":"tXyB","./ru":"ngkl","./ru.js":"ngkl","./sd":"OWeY","./sd.js":"OWeY","./se":"+EdD","./se.js":"+EdD","./si":"gaPs","./si.js":"gaPs","./sk":"jUKU","./sk.js":"jUKU","./sl":"DQFe","./sl.js":"DQFe","./sq":"M7V7","./sq.js":"M7V7","./sr":"bzhX","./sr-cyrl":"33c5","./sr-cyrl.js":"33c5","./sr.js":"bzhX","./ss":"NejB","./ss.js":"NejB","./sv":"w+2E","./sv.js":"w+2E","./sw":"Dll1","./sw.js":"Dll1","./ta":"jbxT","./ta.js":"jbxT","./te":"jB/5","./te.js":"jB/5","./tet":"VbPC","./tet.js":"VbPC","./tg":"7sF4","./tg.js":"7sF4","./th":"nLNk","./th.js":"nLNk","./tl-ph":"mfkQ","./tl-ph.js":"mfkQ","./tlh":"jXJl","./tlh.js":"jXJl","./tr":"92cT","./tr.js":"92cT","./tzl":"5MIk","./tzl.js":"5MIk","./tzm":"0vIq","./tzm-latn":"3+Cq","./tzm-latn.js":"3+Cq","./tzm.js":"0vIq","./ug-cn":"ktU2","./ug-cn.js":"ktU2","./uk":"Hd7b","./uk.js":"Hd7b","./ur":"XtGu","./ur.js":"XtGu","./uz":"uRCu","./uz-latn":"1AHx","./uz-latn.js":"1AHx","./uz.js":"uRCu","./vi":"FB03","./vi.js":"FB03","./x-pseudo":"APXS","./x-pseudo.js":"APXS","./yo":"/1ch","./yo.js":"/1ch","./zh-cn":"yEKL","./zh-cn.js":"yEKL","./zh-hk":"sjvb","./zh-hk.js":"sjvb","./zh-tw":"f55z","./zh-tw.js":"f55z"};function n(t){return s(i(t))}function i(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="mj8Y"},mxeB:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAoCAMAAAChHKjRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACslBMVEUAAADwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCb1lB7zeSLwXCbwXCbwXCb1lB7wXSbwXCbwXCbwXCb1lB71lB7wXCbwXCb1lB71lB7ycyPwXCbwXCb1lB71lB71lB7wXCbwXCbwXCbwXCb1lB71lB71lB7wXCbwXCbwXCbwXCb1lB71lB71lB7wXCbwXCbwXCb1lB71lB71lB71lB7wXCbwXCbwXCb1lB71lB71lB7wXCbwXCbwXCb1lB71lB7wXCbwXCbwXCb1lB71lB71lB7wXCbwXCbwXCbz6BHz6BH1lB71lB71lB7wXCbwXCbwXCbz6BHz6BH1lB71lB7wXCbz6BHz6BH1lB71lB7wXCbwXCbwXCbz6BHz6BH1lB71lB71lB71lB7wXCbwXCbwXCbz6BHz6BHz6BH1lB71lB71lB71lB7wXCbwXCbwXCbwXCbz6BHz6BHz1BT1lB71lB71lB7wXCbwXCbwXCbwXCbz6BHz6BHz6BHz6BH1lB71lB71lB71lB7wXCbwXCbz6BHz6BHz2hP1lB71lB71lB7wXCbwXCbwXCbz6BHz6BHz6BHz6BH1lB7z6BHz6BHz6BH1lB71lB71lB7wXCbwXCbwXCbwXCbyuhjz4hLz6BH1lB71lB71lB71lB7wXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCb1lB71lB71lB7wXCbwXCbwXCbwXCbwXCbwXCbwXybzfyH1lB7wXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCbwXCYAKkYAKkYAKkYAKkYAKkbwXCb1lB7z6BH///9KXAc2AAAA4nRSTlMAASsNBmdQB4GtAgR+90ACAVrdECof6LUFPySMnhl9DuWWAX5VKPunAx3QJzn91g5o1RI//kcEtMgGLPy+EOvDDO5eLwey5jBY4RxLzhsBFXL8VAi5FBs0vQszWC9ZbG36kaUrKP3yRAquZRPWSAjP6jsa1PA84JQCc/7kMezKFg7Q7CMb290zXIeSqwX7yxSh7TIq6vtmgFDTCx/S5aT4Jw8nQgIlzvUOaW+T0cyvdzgal99hmfPy0otEJBiX3OS3kIm8uAli9deEFcCYaGpzenhWNhNdyUGa380iSgMSAQ8GX2aG2wAAAAFiS0dE5VhlC78AAAAHdElNRQfhDBgRNi9+uJWdAAAB/ElEQVQ4y2NgQAeMTMwMhAALKxtBNewcnFyE1HDz8PIRUMIvIMgrJExAjYio2CNxCfyKJKWkHz2SYcSrRlZOXuHRI0W8apSUVVTVHj1S18CnSFNLW0f30SM9fXyKDAyNjIGKTEzxqDEzt7C0sn706JENN25Ftnb2/A6OQEW6TrgVOT+2cGFwBSp65OaOU5HHY08vBm9dkCofX+xK/PwDHgcGMQSHgBQ9Eg/FqigsPODx44hIhigxkCITdaxJKjom9vHjwDglrvgEsKpELOnFLyk5JfXx47R0hoxMsIUJWZiKsnNy8/IfP35cUKhUVAxWVVKK6aSy8orKKqCqakmlmlqwqrp6dEUNjU3NLa1ARY/b2hk6IM7qRI9pv64n3T0GvSBVff3sE8BGTZyEbtTkKVOnRZqDFD2ezmA1EawKM9HMKJs5a/YckKK5ZlzzwIrmL0BTo7Fw0eIlDEuXARUtX8GwEqzo0SpUNcyr16xdt35DxsZNbZunKzFsMQEr2oqqyH0bSHD7jp27du8xY2CBuPzRXlRFRfsgwo/m7z9w8NDhBAhHEM1NHdseoQPdI0fRFHEdc0RVcvzEyVOY0cd3GpTAE86cPXf+wsX4S5evYE1S+lev6T7SVcSbo4Dg6PUbN4/f8iZQGAAD9bbpyjsEVQ0icPfefQTnwUM0WQBFhxKT8nbd+AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMi0yNFQxNzo1NDo0NyswMTowMG/vPH8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTItMjRUMTc6NTQ6NDcrMDE6MDAesoTDAAAAHXRFWHRqaXJhLXN5c3RlbS1pbWFnZS10eXBlAGF2YXRhcuQCGmEAAAAASUVORK5CYII="},oPmM:function(t,e){},olqt:function(t,e){},pMoH:function(t,e){},sz3z:function(t,e){},taED:function(t,e){},uslO:function(t,e,s){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function n(t){return s(i(t))}function i(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="uslO"},vqpw:function(t,e){},"w1/J":function(t,e){}},["NHnr"]);